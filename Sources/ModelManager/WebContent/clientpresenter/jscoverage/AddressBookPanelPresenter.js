/* automatically generated by JSCoverage - do not edit */
try {
  if (typeof top === 'object' && top !== null && typeof top.opener === 'object' && top.opener !== null) {
    // this is a browser window that was opened from another window

    if (! top.opener._$jscoverage) {
      top.opener._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null) {
    // this is a browser window

    try {
      if (typeof top.opener === 'object' && top.opener !== null && top.opener._$jscoverage) {
        top._$jscoverage = top.opener._$jscoverage;
      }
    }
    catch (e) {}

    if (! top._$jscoverage) {
      top._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null && top._$jscoverage) {
    _$jscoverage = top._$jscoverage;
  }
}
catch (e) {}
if (typeof _$jscoverage !== 'object') {
  _$jscoverage = {};
}
if (! _$jscoverage['AddressBookPanelPresenter.js']) {
  _$jscoverage['AddressBookPanelPresenter.js'] = [];
  _$jscoverage['AddressBookPanelPresenter.js'][15] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][20] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][32] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][34] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][36] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][38] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][49] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][50] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][51] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][52] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][53] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][54] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][56] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][57] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][59] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][60] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][61] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][63] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][64] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][65] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][67] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][69] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][70] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][71] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][73] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][74] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][85] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][87] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][88] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][89] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][90] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][92] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][93] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][94] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][95] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][97] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][98] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][101] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][102] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][103] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][105] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][106] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][108] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][109] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][111] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][112] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][114] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][126] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][128] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][135] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][136] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][137] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][138] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][139] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][140] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][141] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][143] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][144] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][145] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][148] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][149] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][151] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][152] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][156] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][157] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][160] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][162] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][163] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][166] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][167] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][168] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][172] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][186] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][188] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][189] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][190] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][193] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][206] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][208] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][209] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][210] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][212] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][224] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][226] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][227] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][229] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][230] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][231] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][232] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][233] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][234] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][235] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][236] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][237] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][238] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][241] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][242] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][243] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][244] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][245] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][247] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][248] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][250] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][251] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][252] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][253] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][254] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][256] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][257] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][258] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][259] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][262] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][263] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][266] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][267] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][270] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][271] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][272] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][273] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][274] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][277] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][278] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][279] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][280] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][281] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][284] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][300] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][302] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][306] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][307] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][309] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][310] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][315] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][316] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][318] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][319] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][328] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][329] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][330] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][342] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][344] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][345] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][349] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][350] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][351] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][353] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][357] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][358] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][359] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][360] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][362] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][373] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][375] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][376] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][379] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][380] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][381] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][383] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][387] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][388] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][389] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][390] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][392] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][405] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][407] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][408] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][411] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][412] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][413] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][415] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][419] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][420] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][421] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][422] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][424] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][437] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][439] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][440] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][443] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][444] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][445] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][447] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][451] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][452] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][453] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][454] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][456] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][469] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][470] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][471] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][472] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][477] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][478] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][479] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][481] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][485] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][486] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][487] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][488] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][490] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][502] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][503] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][505] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][506] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][507] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][508] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][510] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][511] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][514] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][515] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][516] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][518] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][522] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][523] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][524] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][525] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][527] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][539] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][541] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][544] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][545] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][546] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][549] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][554] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][566] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][567] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][584] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][586] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][587] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][592] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][594] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][606] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][609] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][610] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][611] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][614] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][625] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][627] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][628] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][630] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][631] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][635] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][636] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][637] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][639] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][642] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][643] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][644] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][645] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][646] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][648] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][659] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][661] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][662] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][664] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][665] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][669] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][670] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][671] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][673] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][676] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][677] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][678] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][679] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][680] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][682] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][695] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][697] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][699] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][701] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][703] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][706] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][712] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][727] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][728] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][730] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][731] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][733] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][734] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][736] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][737] = 0;
}
_$jscoverage['AddressBookPanelPresenter.js'].source = ["<span class=\"c\">/**</span>","<span class=\"c\"> * Presenter incaricato di gestire il pannello della rubrica, contiene le</span>","<span class=\"c\"> * funzioni associate ai widget grafici della vista relativi alla rubrica e ha</span>","<span class=\"c\"> * la responsabilit&#195;&#160; di aggiornare la vista sulla base dei dati ricevuti dal</span>","<span class=\"c\"> * server</span>","<span class=\"c\"> * </span>","<span class=\"c\"> * @constructor</span>","<span class=\"c\"> * @this {AddressBookPanelPresenter}</span>","<span class=\"c\"> * @param {String}</span>","<span class=\"c\"> *            url URL della servlet con cui il presenter deve comunicare</span>","<span class=\"c\"> * @author Marco Schivo</span>","<span class=\"c\"> * @author Riccardo Tresoldi</span>","<span class=\"c\"> * @author Diego Beraldin</span>","<span class=\"c\"> */</span>","<span class=\"k\">function</span> AddressBookPanelPresenter<span class=\"k\">()</span> <span class=\"k\">{</span>","\t<span class=\"c\">/***************************************************************************</span>","<span class=\"c\">\t * VARIABILI PRIVATE</span>","<span class=\"c\">\t **************************************************************************/</span>","\t<span class=\"c\">// elemento controllato da questo presenter</span>","\t<span class=\"k\">var</span> element <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"AddressBookPanel\"</span><span class=\"k\">);</span>","","\t<span class=\"c\">/*</span>","<span class=\"c\">\t * OPERATION ON SERVER: - 0 = ottieni i contatti della rubrica - 1 =</span>","<span class=\"c\">\t * aggiungi contatto ad una rubrica - 2 = elimina contatto da una rubrica -</span>","<span class=\"c\">\t * 3 = aggiunge un contatto ad un gruppo - 4 = eliminare un contatto da un</span>","<span class=\"c\">\t * gruppo - 5 = aggiunta di un gruppo - 6 = eliminazione di un gruppo - 7 =</span>","<span class=\"c\">\t * ottieni i gruppi della rubrica - 8 = bloccare un utente - 9 = sbloccare</span>","<span class=\"c\">\t * un utente - 10 = restituire una ricerca</span>","<span class=\"c\">\t */</span>","","\t<span class=\"c\">// array dei contatti della rubrica dell'utente</span>","\t<span class=\"k\">var</span> contacts <span class=\"k\">=</span> <span class=\"k\">new</span> Array<span class=\"k\">();</span>","\t<span class=\"c\">// array dei gruppi della rubrica</span>","\t<span class=\"k\">var</span> groups <span class=\"k\">=</span> <span class=\"k\">new</span> Array<span class=\"k\">();</span>","\t<span class=\"c\">// URL delle servlet</span>","\t<span class=\"k\">var</span> servlets <span class=\"k\">=</span> <span class=\"k\">new</span> Array<span class=\"k\">();</span>","\t<span class=\"c\">// inizializza l'array delle servlet</span>","\tgetServletURLs<span class=\"k\">();</span>","","\t<span class=\"c\">/***************************************************************************</span>","<span class=\"c\">\t * METODI PRIVATI</span>","<span class=\"c\">\t **************************************************************************/</span>","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Configura gli URL delle servlet da interrogare leggendoli dal file di</span>","<span class=\"c\">\t * configurazione</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Diego Beraldin</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> getServletURLs<span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> configurationRequest <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\tconfigurationRequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> configurationFile<span class=\"k\">,</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\tconfigurationRequest<span class=\"k\">.</span>send<span class=\"k\">();</span>","\t\t<span class=\"k\">var</span> XMLDocument <span class=\"k\">=</span> configurationRequest<span class=\"k\">.</span>responseXML<span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> baseURL <span class=\"k\">=</span> XMLDocument<span class=\"k\">.</span>getElementsByTagName<span class=\"k\">(</span><span class=\"s\">\"baseURL\"</span><span class=\"k\">)[</span><span class=\"s\">0</span><span class=\"k\">].</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">;</span>","","\t\t<span class=\"k\">var</span> names <span class=\"k\">=</span> Array<span class=\"k\">();</span>","\t\tnames","\t\t\t\t<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"getcontacts\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\t<span class=\"k\">;</span>","\t\tnames<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"addcontact\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames","\t\t\t\t<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"deletecontact\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"insert\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"remove\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames","\t\t\t\t<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"creategroup\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames","\t\t\t\t<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"deletegroup\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"getgroups\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"block\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"unblock\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> i <span class=\"k\">in</span> names<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\tservlets<span class=\"k\">.</span>push<span class=\"k\">(</span>baseURL <span class=\"k\">+</span> names<span class=\"k\">[</span>i<span class=\"k\">]);</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Recupera i contatti e i gruppi della propria rubrica dal server tramite</span>","<span class=\"c\">\t * AJAX</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Marco Schivo</span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> getAddressBookContacts<span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// apro due XMLHttprequest rispettivamente per contatti e gruppi</span>","\t\t<span class=\"k\">var</span> contactRequest <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\t<span class=\"k\">var</span> groupRequest <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\tcontactRequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\tcontactRequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\tcontactRequest<span class=\"k\">.</span>send<span class=\"k\">();</span>","\t\tcontacts <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>contactRequest<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\tgroupRequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">7</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\tgroupRequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\tgroupRequest<span class=\"k\">.</span>send<span class=\"k\">();</span>","\t\tgroups <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>groupRequest<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t<span class=\"k\">}</span>","\t","\t<span class=\"k\">function</span> getImageSrc<span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\tpath <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">switch</span> <span class=\"k\">(</span>contact<span class=\"k\">.</span>state<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">case</span> <span class=\"s\">\"available\"</span><span class=\"k\">:</span>","\t\t\tpath <span class=\"k\">=</span> <span class=\"s\">\"img/stateavailable.png\"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">case</span> <span class=\"s\">\"occupied\"</span><span class=\"k\">:</span>","\t\t\tpath <span class=\"k\">=</span> <span class=\"s\">\"img/stateoccupied.png\"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">default</span><span class=\"k\">:</span>","\t\t\tpath <span class=\"k\">=</span> <span class=\"s\">\"img/stateoffline.png\"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">return</span> path<span class=\"k\">;</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Aggiunge una voce di rubrica a una lista</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {HTMLUListElement}</span>","<span class=\"c\">\t *            list lista cui il contatto deve essere aggiunto</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact contatto da aggiungere</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> addListItem<span class=\"k\">(</span>list<span class=\"k\">,</span> contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// creo l'elemento &lt;li&gt;</span>","\t\t<span class=\"k\">var</span> item <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"li\"</span><span class=\"k\">);</span>","","\t\t<span class=\"c\">/*</span>","<span class=\"c\">\t\t * creo le variabili contenenti i dati del contatto da attribuire al</span>","<span class=\"c\">\t\t * 'li', dove le propriet&#195;&#160; name, surname e presenter sono le tipiche</span>","<span class=\"c\">\t\t * degli oggetti JSUserData</span>","<span class=\"c\">\t\t */</span>","\t\t<span class=\"k\">var</span> name <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>contact<span class=\"k\">.</span>name <span class=\"k\">!=</span> <span class=\"k\">null</span><span class=\"k\">)</span>","\t\t\tname <span class=\"k\">+=</span> contact<span class=\"k\">.</span>name<span class=\"k\">;</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>contact<span class=\"k\">.</span>surname <span class=\"k\">!=</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>name <span class=\"k\">!=</span> <span class=\"s\">\"\"</span><span class=\"k\">)</span>","\t\t\t\tname <span class=\"k\">+=</span> <span class=\"s\">\" \"</span><span class=\"k\">;</span>","\t\t\tname <span class=\"k\">+=</span> contact<span class=\"k\">.</span>surname<span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>name <span class=\"k\">==</span> <span class=\"s\">\"\"</span><span class=\"k\">)</span>","\t\t\tname <span class=\"k\">+=</span> contact<span class=\"k\">.</span>email<span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> avatar <span class=\"k\">=</span> contact<span class=\"k\">.</span>picturePath<span class=\"k\">;</span>","","\t\t<span class=\"c\">// imposto gli attributi corretti</span>","\t\titem<span class=\"k\">.</span>setAttribute<span class=\"k\">(</span><span class=\"s\">\"id\"</span><span class=\"k\">,</span> contact<span class=\"k\">.</span>id<span class=\"k\">);</span>","\t\titem<span class=\"k\">.</span>setAttribute<span class=\"k\">(</span><span class=\"s\">\"class\"</span><span class=\"k\">,</span> contact<span class=\"k\">.</span>state<span class=\"k\">);</span>","\t\t<span class=\"c\">// la variabile 'mediator' &#195;&#168; una variabile globale</span>","\t\titem<span class=\"k\">.</span>onclick <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t\tmediator<span class=\"k\">.</span>onContactSelected<span class=\"k\">(</span>contact<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// genero i valori da attribuire all'&lt;li&gt;</span>","\t\t<span class=\"k\">var</span> avatarNode <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'img'</span><span class=\"k\">);</span>","\t\tavatarNode<span class=\"k\">.</span>setAttribute<span class=\"k\">(</span><span class=\"s\">\"src\"</span><span class=\"k\">,</span> avatar<span class=\"k\">);</span>","\t\t<span class=\"c\">// avatarNode.setAttribute(\"class\", \"\");</span>","","\t\t<span class=\"k\">var</span> textNode <span class=\"k\">=</span> document<span class=\"k\">.</span>createTextNode<span class=\"k\">(</span>name<span class=\"k\">);</span>","","\t\t<span class=\"k\">var</span> stateNode <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'img'</span><span class=\"k\">);</span>\t\t","\t\tstateNode<span class=\"k\">.</span>src <span class=\"k\">=</span> getImageSrc<span class=\"k\">(</span>contact<span class=\"k\">);</span>","","\t\t<span class=\"c\">// imposto il valore dell'&lt;li&gt;</span>","\t\titem<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>avatarNode<span class=\"k\">);</span>","\t\titem<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>textNode<span class=\"k\">);</span>","\t\titem<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>stateNode<span class=\"k\">);</span>","","\t\t<span class=\"c\">// aggiungo il &lt;li&gt; al elemento &lt;ul&gt; dell'oggetto ulList su cui viene</span>","\t\t<span class=\"c\">// invocata la funzione</span>","\t\tlist<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>item<span class=\"k\">);</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Aggiungere una &lt;option&gt; ad una Select</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {HTMLSelectElement}</span>","<span class=\"c\">\t *            select rappresenta la select a cui aggiungere la &lt;option&gt;</span>","<span class=\"c\">\t * @param {String}</span>","<span class=\"c\">\t *            value rappresenta il valore da attribuire alla nuova &lt;option&gt;</span>","<span class=\"c\">\t * @param {String}</span>","<span class=\"c\">\t *            text rappresenta il testo da attribuire alla nuova &lt;option&gt;</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> addOptionToSelect<span class=\"k\">(</span>select<span class=\"k\">,</span> value<span class=\"k\">,</span> text<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// creo la option</span>","\t\t<span class=\"k\">var</span> option <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"option\"</span><span class=\"k\">);</span>","\t\toption<span class=\"k\">.</span>value <span class=\"k\">=</span> value<span class=\"k\">;</span>","\t\toption<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>document<span class=\"k\">.</span>createTextNode<span class=\"k\">(</span>text<span class=\"k\">));</span>","","\t\t<span class=\"c\">// appendo la nuova option alla select</span>","\t\tselect<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>option<span class=\"k\">);</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Controlla se un contatto &#195;&#168; presente nel gruppo passato come parametro</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact contatto da verificare se presente nel gruppo</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            group gruppo su cui verificare</span>","<span class=\"c\">\t * @return {Boolean} ritorna true solo se il contatto &#195;&#168; presente nel gruppo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> contactExistInGroup<span class=\"k\">(</span>contact<span class=\"k\">,</span> group<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// ciclo l'array di contatti del gruppo</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> c <span class=\"k\">in</span> group<span class=\"k\">.</span>contacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>c <span class=\"k\">==</span> contact<span class=\"k\">.</span>id<span class=\"k\">)</span>","\t\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">return</span> <span class=\"k\">false</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/***************************************************************************</span>","<span class=\"c\">\t * METODI PUBBLICI</span>","<span class=\"c\">\t **************************************************************************/</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Inizializza 'AddressBookPanel' e lo popola con i contatti della rubrica</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>initialize <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// mi imposto come visibile</span>","\t\telement<span class=\"k\">.</span>style<span class=\"k\">.</span>display <span class=\"k\">=</span> <span class=\"s\">\"block\"</span><span class=\"k\">;</span>","\t\telement<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t<span class=\"c\">// creo i tre div principali</span>","\t\t<span class=\"k\">var</span> addressBookHeader <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'h1'</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> divFilter <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> divSort <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> divList <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> divGroup <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","\t\taddressBookHeader<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>document<span class=\"k\">.</span>createTextNode<span class=\"k\">(</span><span class=\"s\">\"RUBRICA\"</span><span class=\"k\">));</span>","\t\tdivFilter<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"divFilter\"</span><span class=\"k\">;</span>","\t\tdivSort<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"divSort\"</span><span class=\"k\">;</span>","\t\tdivList<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"divList\"</span><span class=\"k\">;</span>","\t\tdivGroup<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"divGroup\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// creo contenuto divFilter</span>","\t\t<span class=\"k\">var</span> inputText <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'input'</span><span class=\"k\">);</span>","\t\tinputText<span class=\"k\">.</span>type <span class=\"k\">=</span> <span class=\"s\">\"text\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> inputButton <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'input'</span><span class=\"k\">);</span>","\t\tinputButton<span class=\"k\">.</span>type <span class=\"k\">=</span> <span class=\"s\">\"image\"</span><span class=\"k\">;</span>","\t\tinputButton<span class=\"k\">.</span>src <span class=\"k\">=</span> <span class=\"s\">\"img/search.png\"</span><span class=\"k\">;</span>","\t\t","\t\t<span class=\"k\">var</span> selectGroup <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'select'</span><span class=\"k\">);</span>","\t\tselectGroup<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"selectGroup\"</span><span class=\"k\">;</span>","\t\t<span class=\"c\">// attribuisco gli eventi per la ricerca</span>","\t\t<span class=\"k\">var</span> self <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">;</span>","\t\tinputButton<span class=\"k\">.</span>onclick <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">var</span> serchField <span class=\"k\">=</span> inputText<span class=\"k\">.</span>value<span class=\"k\">;</span>","\t\t\t<span class=\"k\">var</span> filtredContacts <span class=\"k\">=</span> self<span class=\"k\">.</span>applyFilterByString<span class=\"k\">(</span>serchField<span class=\"k\">);</span>","\t\t\tself<span class=\"k\">.</span>showFilter<span class=\"k\">(</span>filtredContacts<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t\tselectGroup<span class=\"k\">.</span>onchange <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">var</span> idGroupSelected <span class=\"k\">=</span> selectGroup<span class=\"k\">.</span>options<span class=\"k\">[</span>selectGroup<span class=\"k\">.</span>selectedIndex<span class=\"k\">].</span>value<span class=\"k\">;</span>","\t\t\t<span class=\"k\">var</span> filtredContacts <span class=\"k\">=</span> self<span class=\"k\">.</span>applyFilterByGroup<span class=\"k\">(</span>idGroupSelected<span class=\"k\">);</span>","\t\t\tself<span class=\"k\">.</span>showFilter<span class=\"k\">(</span>filtredContacts<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t\t<span class=\"c\">// creo contenuto divSort</span>","\t\t<span class=\"k\">var</span> selectSort <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'select'</span><span class=\"k\">);</span>","\t\tselectSort<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"selectSort\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// creo contenuto divList</span>","\t\t<span class=\"k\">var</span> ul <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'ul'</span><span class=\"k\">);</span>","\t\tul<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"AddressBookList\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// appendo i sottonodi ai nodi principali</span>","\t\tdivFilter<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>inputText<span class=\"k\">);</span>","\t\tdivFilter<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>inputButton<span class=\"k\">);</span>","\t\tdivSort<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>selectSort<span class=\"k\">);</span>","\t\tdivList<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>ul<span class=\"k\">);</span>","\t\tdivGroup<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>selectGroup<span class=\"k\">);</span>","","\t\t<span class=\"c\">// appendo il sottoalbero al DOM</span>","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>addressBookHeader<span class=\"k\">);</span>","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>divFilter<span class=\"k\">);</span>","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>divSort<span class=\"k\">);</span>","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>divList<span class=\"k\">);</span>","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>divGroup<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizza i contatti nel pannello</span>","\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Scarica la rubrica dal server popolando la lista dei contatti, quindi</span>","<span class=\"c\">\t * inserisce i contatti estratti dal server all'interno della lista</span>","<span class=\"c\">\t * all'interno di 'AddressBookPanel'</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * NOTA PER I VERIFICATORI Richiede che il 'document' abbia al suo interno</span>","<span class=\"c\">\t * un elemento di tipo '</span>","<span class=\"c\">\t * &lt;ul&gt;' con 'id' uguale a 'AddressBookList' Al termine della funzione la</span>","<span class=\"c\">\t * lista dei contatti contacts deve essere popolata con i contatti che passa</span>","<span class=\"c\">\t * lo stub</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>setup <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// scarica i contatti dal server</span>","\t\tgetAddressBookContacts<span class=\"k\">();</span>","","\t\t<span class=\"c\">// popolo la parte dei contatti</span>","\t\t<span class=\"c\">// estraggo l'&lt;ul&gt; del Addressbook e lo inizializzo</span>","\t\t<span class=\"k\">var</span> ulList <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"AddressBookList\"</span><span class=\"k\">);</span>","\t\tulList<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t<span class=\"c\">// ciclo i contatti e agiungo un &lt;li&gt; per ogni contatto</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> contact <span class=\"k\">in</span> contacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\taddListItem<span class=\"k\">(</span>ulList<span class=\"k\">,</span> contacts<span class=\"k\">[</span>contact<span class=\"k\">]);</span>","\t\t<span class=\"k\">}</span>","","\t\t<span class=\"c\">// popolo la parte dei gruppi</span>","\t\t<span class=\"c\">// estraggo la &lt;select&gt; dal DOM e la inizializzo</span>","\t\t<span class=\"k\">var</span> selectGroup <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"selectGroup\"</span><span class=\"k\">);</span>","\t\tselectGroup<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t<span class=\"c\">// ciclo i gruppi e li aggiungo alla &lt;select&gt;</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> group <span class=\"k\">in</span> groups<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\taddOptionToSelect<span class=\"k\">(</span>selectGroup<span class=\"k\">,</span> group<span class=\"k\">,</span> groups<span class=\"k\">[</span>group<span class=\"k\">].</span>name<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Rende invisibile il pannello della rubrica all'occorrenza</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Diego Beraldin</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>hide <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>element<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\telement<span class=\"k\">.</span>style<span class=\"k\">.</span>display <span class=\"k\">=</span> <span class=\"s\">\"none\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Aggiunge un contatto alla rubrica se non gi&#195;&#160; presente</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact rappresenta il contatto da aggiungere</span>","<span class=\"c\">\t * @returns {Boolean} true solo se l'aggiunta ha avuto successo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>addContact <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// controllo che non sia gi&#195;&#160; presente nella rubrica</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>contactAlreadyPresent<span class=\"k\">(</span>contact<span class=\"k\">))</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Contatto gi&#195;&#160; presente nella rubrica.\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","","\t\t<span class=\"c\">// invio la richiesta al server e attendo il risultato</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">1</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"contactId=\"</span> <span class=\"k\">+</span> contact<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizzo l'esito della richiesta. Se esito positivo refresh della</span>","\t\t<span class=\"c\">// rubrica</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Rimovere un contatto alla rubrica se presente</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact rappresenta il contatto da eliminare</span>","<span class=\"c\">\t * @returns {Boolean} true solo se l'eliminazione ha avuto successo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>removeContact <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// controllo se presente nella rubrica</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span><span class=\"k\">this</span><span class=\"k\">.</span>contactAlreadyPresent<span class=\"k\">(</span>contact<span class=\"k\">))</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Non puoi eliminare un contatto non presente in rubrica.\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// invio la richiesta al server e attendo il risultato</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">2</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"contactId=\"</span> <span class=\"k\">+</span> contact<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizzo l'esito della richiesta. Se esito positivo refresh della</span>","\t\t<span class=\"c\">// rubrica</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Aggiungere un contatto della propria rubrica ad un proprio gruppo</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact rappresenta il contatto da aggiungere al gruppo</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            group rappresenta il gruppo in cui aggiungere il contatto</span>","<span class=\"c\">\t * @returns {Boolean} true solo se l'aggiunta ha avuto successo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>addContactInGroup <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">,</span> group<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// controllo che il contatto non sia gi&#195;&#160; presente nel gruppo</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>contactExistInGroup<span class=\"k\">(</span>contact<span class=\"k\">,</span> group<span class=\"k\">))</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Il contatto &#195;&#168; gi&#195;&#160; presente nel gruppo.\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// invio la richiesta al server e attendo il risultato</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">3</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"contactId=\"</span> <span class=\"k\">+</span> contact<span class=\"k\">.</span>id <span class=\"k\">+</span> <span class=\"s\">\"&amp;groupId=\"</span> <span class=\"k\">+</span> group<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizzo l'esito della richiesta. Se esito positivo refresh della</span>","\t\t<span class=\"c\">// rubrica</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Elimina un contatto della propria rubrica da un proprio gruppo</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact rappresenta il contatto da eliminare dal gruppo</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            group rappresenta il gruppo in cui eliminare il contatto</span>","<span class=\"c\">\t * @returns {Boolean} true solo se l'eliminazione ha avuto successo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>deleteContactFromGroup <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">,</span> group<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// controllo che il contatto sia presente nel gruppo</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span>contactExistInGroup<span class=\"k\">(</span>contact<span class=\"k\">,</span> group<span class=\"k\">))</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Il contatto non &#195;&#168; presente nel gruppo.\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// invio la richiesta al server e attendo il risultato</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">4</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"contactId=\"</span> <span class=\"k\">+</span> contact<span class=\"k\">.</span>id <span class=\"k\">+</span> <span class=\"s\">\"&amp;groupId=\"</span> <span class=\"k\">+</span> group<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizzo l'esito della richiesta. Se esito positivo refresh della</span>","\t\t<span class=\"c\">// rubrica</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Aggiunge un gruppo alla rubrica</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {String}</span>","<span class=\"c\">\t *            name rappresenta il nome del gruppo da aggiungere</span>","<span class=\"c\">\t * @throws {String}</span>","<span class=\"c\">\t *             errore nel caso in cui il gruppo esista gi&#195;&#160;</span>","<span class=\"c\">\t * @returns {Boolean} true solo se l'aggiunta ha avuto successo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>addGroup <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>name<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> key <span class=\"k\">in</span> groups<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>groups<span class=\"k\">[</span>key<span class=\"k\">].</span>name <span class=\"k\">=</span> name<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Il gruppo che stai cercando di inserire esiste gi&#195;&#160;.\"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">}</span>","","\t\t<span class=\"c\">// invio la richiesta al server e attendo il risultato</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">5</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"groupName=\"</span> <span class=\"k\">+</span> name<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizzo l'esito della richiesta. Se esito positivo refresh della</span>","\t\t<span class=\"c\">// rubrica</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Rimuovere un gruppo alla rubrica, gli utenti appartenenti a quel gruppo</span>","<span class=\"c\">\t * non verranno eliminati</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            group rappresenta l'id del gruppo da eliminare</span>","<span class=\"c\">\t * @returns {Boolean} true solo se la rimozione ha avuto successo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>deleteGroup <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>group<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\tconsole<span class=\"k\">.</span>log<span class=\"k\">(</span>groups<span class=\"k\">.</span>length<span class=\"k\">);</span>","\t\t<span class=\"c\">// controllo che il gruppo esista</span>","\t\t<span class=\"k\">var</span> existGroup <span class=\"k\">=</span> <span class=\"k\">false</span><span class=\"k\">;</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> g <span class=\"k\">in</span> groups<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>g <span class=\"k\">==</span> group<span class=\"k\">.</span>id<span class=\"k\">)</span>","\t\t\t\texistGroup <span class=\"k\">=</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span>existGroup<span class=\"k\">)</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Il gruppo che stai cercando di eliminare non esiste.\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// invio la richiesta al server e attendo il risultato</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">6</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"groupId=\"</span> <span class=\"k\">+</span> group<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizzo l'esito della richiesta. Se esito positivo refresh della</span>","\t\t<span class=\"c\">// rubrica</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Dato una stringa in ingresso questa funzione filtra i contatti presenti</span>","<span class=\"c\">\t * in locale</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {String}</span>","<span class=\"c\">\t *            param string da cercare tra i contatti</span>","<span class=\"c\">\t * @returns {Array} lista di contatti filtrata</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>applyFilterByString <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>param<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// creo array di utenti filtrati</span>","\t\t<span class=\"k\">var</span> filtred <span class=\"k\">=</span> <span class=\"k\">new</span> Array<span class=\"k\">();</span>","","\t\t<span class=\"c\">// specifico aspessione regolare</span>","\t\t<span class=\"k\">var</span> pattern <span class=\"k\">=</span> <span class=\"k\">new</span> RegExp<span class=\"k\">(</span>param<span class=\"k\">);</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> contact <span class=\"k\">in</span> contacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">((</span>pattern<span class=\"k\">.</span>test<span class=\"k\">(</span>contacts<span class=\"k\">[</span>contact<span class=\"k\">].</span>name<span class=\"k\">))</span>","\t\t\t\t\t<span class=\"k\">||</span> <span class=\"k\">(</span>pattern<span class=\"k\">.</span>test<span class=\"k\">(</span>contacts<span class=\"k\">[</span>contact<span class=\"k\">].</span>surname<span class=\"k\">))</span>","\t\t\t\t\t<span class=\"k\">||</span> <span class=\"k\">(</span>pattern<span class=\"k\">.</span>test<span class=\"k\">(</span>contacts<span class=\"k\">[</span>contact<span class=\"k\">].</span>email<span class=\"k\">)))</span> <span class=\"k\">{</span>","\t\t\t\tfiltred<span class=\"k\">.</span>push<span class=\"k\">(</span>contact<span class=\"k\">);</span>","\t\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">}</span>","","\t\t<span class=\"c\">// visualizzo l'utente filtrato</span>","\t\t<span class=\"k\">return</span> filtred<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Dato l'id di un gruppo in ingresso questa funzione filtra i contatti</span>","<span class=\"c\">\t * presenti in locale</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Number}</span>","<span class=\"c\">\t *            idGroup id del gruppo su cui filtrare i contatti</span>","<span class=\"c\">\t * @returns {Array} lista di contatti filtrata</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>applyFilterByGroup <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>idGroup<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">return</span> groups<span class=\"k\">[</span>idGroup<span class=\"k\">].</span>contacts<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Elimina il contenuto preesistente e visualizza il nuovo contenuto</span>","<span class=\"c\">\t * filtrato della</span>","<span class=\"c\">\t * &lt;ul&gt;</span>","<span class=\"c\">\t * dei contatti</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * NOTA PER I VERIFICATORI Richiede che il 'document' abbia al suo interno</span>","<span class=\"c\">\t * un elemento di tipo '</span>","<span class=\"c\">\t * &lt;ul&gt;' con 'id' uguale a 'AddressBookList'</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Ricardo tresoldi</span>","<span class=\"c\">\t * @param {Array}</span>","<span class=\"c\">\t *            filtredContacts Array di contrati</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>showFilter <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>filtredContacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// estraggo l'&lt;ul&gt; del Addressbook e lo inizializzo</span>","\t\t<span class=\"k\">var</span> ulList <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"AddressBookList\"</span><span class=\"k\">);</span>","\t\tulList<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// TODO aggiungere una label per avvisare che i campi visualizzati sono</span>","\t\t<span class=\"c\">// filtrati</span>","","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> id <span class=\"k\">in</span> filtredContacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"c\">// ciclo i contatti e agiungo un &lt;li&gt; per ogni contatto</span>","\t\t\taddListItem<span class=\"k\">(</span>ulList<span class=\"k\">,</span> contacts<span class=\"k\">[</span>id<span class=\"k\">]);</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Dato un contatto verifica se appartiene alla rubrica</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact contatto da verificare</span>","<span class=\"c\">\t * @return {Boolean} true solo se presente in rubrica</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>contactAlreadyPresent <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// scorro la rubrica e controllo se contact.id=rubrica.contact.id.</span>","\t\t<span class=\"c\">// ritorno true solo se presente</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> key <span class=\"k\">in</span> contacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>contacts<span class=\"k\">[</span>key<span class=\"k\">].</span>id <span class=\"k\">==</span> contact<span class=\"k\">.</span>id<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">return</span> <span class=\"k\">false</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Funzione che blocca l'utente passato per parametro</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact contatto da bloccare</span>","<span class=\"c\">\t * @return {Boolean} true solo se l'utente &#195;&#168; stato bloccato correttemente</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>blockUser <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// controllo che sia presente nella rubrica</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span><span class=\"k\">this</span><span class=\"k\">.</span>contactAlreadyPresent<span class=\"k\">(</span>contact<span class=\"k\">))</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Contatto non presente nella rubrica.\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>contact<span class=\"k\">.</span>blocked<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Contatto gi&#195;&#160; bloccato.\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","","\t\t<span class=\"c\">// invio la richiesta di bloccaggio dell'utente</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">8</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"contactId=\"</span> <span class=\"k\">+</span> contact<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// controllo il risultato</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\tmediator<span class=\"k\">.</span>displayContact<span class=\"k\">(</span>contact<span class=\"k\">);</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Funzione che sblocca l'utente passato per parametro</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact contatto da sbloccare</span>","<span class=\"c\">\t * @return {Boolean} true solo se l'utente &#195;&#168; stato sbloccato correttemente</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>unlockUser <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// controllo che sia presente nella rubrica</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span><span class=\"k\">this</span><span class=\"k\">.</span>contactAlreadyPresent<span class=\"k\">(</span>contact<span class=\"k\">))</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Contatto non presente nella rubrica.\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span>contact<span class=\"k\">.</span>blocked<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Contatto gi&#195;&#160; sbloccato.\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","","\t\t<span class=\"c\">// invio la richiesta di bloccaggio dell'utente</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">9</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"contactId=\"</span> <span class=\"k\">+</span> contact<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// controllo il risultato</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\tmediator<span class=\"k\">.</span>displayContact<span class=\"k\">(</span>contact<span class=\"k\">);</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Funzione che dato un utente restituisce i gruppi in cui &#195;&#168; stato inserito</span>","<span class=\"c\">\t * nell'addressBook</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact contatto di cui ricercare i gruppi in cui &#195;&#168; inserito</span>","<span class=\"c\">\t * @return {Object} array associativo che presenta la lista dei gruppi in</span>","<span class=\"c\">\t *         cui &#195;&#168; presente il contatto</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>getGroupsWhereContactsIs <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// creo l'array da tornare</span>","\t\t<span class=\"k\">var</span> groupSelected <span class=\"k\">=</span> <span class=\"k\">new</span> Object<span class=\"k\">();</span>","\t\t<span class=\"c\">// ciclo tutti i gruppi</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> group <span class=\"k\">in</span> groups<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"c\">// ciclo tutti i contatti di un gruppo</span>","\t\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> groupContact <span class=\"k\">in</span> groups<span class=\"k\">[</span>group<span class=\"k\">].</span>contacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t<span class=\"c\">// contriollo se il contatto &#195;&#168; uguale al contatto del gruppo</span>","\t\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>groupContact <span class=\"k\">==</span> contact<span class=\"k\">.</span>id<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t\t<span class=\"c\">// se i contatti coincidono aggiungo il gruppo alla lista di</span>","\t\t\t\t\t<span class=\"c\">// ritorno e blocco lo scorrimento dell'array</span>","\t\t\t\t\tgroupSelected<span class=\"k\">[</span>groups<span class=\"k\">[</span>group<span class=\"k\">].</span>id<span class=\"k\">]</span> <span class=\"k\">=</span> groups<span class=\"k\">[</span>group<span class=\"k\">].</span>name<span class=\"k\">;</span>","\t\t\t\t\t<span class=\"c\">// break;</span>","\t\t\t\t<span class=\"k\">}</span>","\t\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"c\">// ritorno l'array formato</span>","\t\t<span class=\"k\">return</span> groupSelected<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/*</span>","<span class=\"c\">\t * FILE JSON CHE RAFFIGURA LA RUBRICA { \"idUser1\":{ \"name\": \"\", \"surname\":</span>","<span class=\"c\">\t * \"\", \"email\": \"\", \"id\": \"\", \"picturePath\": \"\", \"state\": \"\", \"blocked\":</span>","<span class=\"c\">\t * \"true|false\" },</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * \"idUser2\": {.......}, }</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * FILE JSON CHE RAFFIGURA I GRUPPI { \"idGruppo1\":{ \"name\": \"\", \"id\": \"\",</span>","<span class=\"c\">\t * \"contacts\": [ 1, 2, 3 ] },</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * \"idGruppo2\": {........}. }</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>getContacts <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">return</span> contacts<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>setContacts <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>cont<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\tcontacts <span class=\"k\">=</span> cont<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>getGroups <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">return</span> groups<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>setGroups <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>cont<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\tgroups <span class=\"k\">=</span> cont<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","<span class=\"k\">}</span>"];
_$jscoverage['AddressBookPanelPresenter.js'][15]++;
function AddressBookPanelPresenter() {
  _$jscoverage['AddressBookPanelPresenter.js'][20]++;
  var element = document.getElementById("AddressBookPanel");
  _$jscoverage['AddressBookPanelPresenter.js'][32]++;
  var contacts = new Array();
  _$jscoverage['AddressBookPanelPresenter.js'][34]++;
  var groups = new Array();
  _$jscoverage['AddressBookPanelPresenter.js'][36]++;
  var servlets = new Array();
  _$jscoverage['AddressBookPanelPresenter.js'][38]++;
  getServletURLs();
  _$jscoverage['AddressBookPanelPresenter.js'][49]++;
  function getServletURLs() {
    _$jscoverage['AddressBookPanelPresenter.js'][50]++;
    var configurationRequest = new XMLHttpRequest();
    _$jscoverage['AddressBookPanelPresenter.js'][51]++;
    configurationRequest.open("POST", configurationFile, false);
    _$jscoverage['AddressBookPanelPresenter.js'][52]++;
    configurationRequest.send();
    _$jscoverage['AddressBookPanelPresenter.js'][53]++;
    var XMLDocument = configurationRequest.responseXML;
    _$jscoverage['AddressBookPanelPresenter.js'][54]++;
    var baseURL = XMLDocument.getElementsByTagName("baseURL")[0].childNodes[0].data;
    _$jscoverage['AddressBookPanelPresenter.js'][56]++;
    var names = Array();
    _$jscoverage['AddressBookPanelPresenter.js'][57]++;
    names.push(XMLDocument.getElementById("getcontacts").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][59]++;
    ;
    _$jscoverage['AddressBookPanelPresenter.js'][60]++;
    names.push(XMLDocument.getElementById("addcontact").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][61]++;
    names.push(XMLDocument.getElementById("deletecontact").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][63]++;
    names.push(XMLDocument.getElementById("insert").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][64]++;
    names.push(XMLDocument.getElementById("remove").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][65]++;
    names.push(XMLDocument.getElementById("creategroup").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][67]++;
    names.push(XMLDocument.getElementById("deletegroup").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][69]++;
    names.push(XMLDocument.getElementById("getgroups").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][70]++;
    names.push(XMLDocument.getElementById("block").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][71]++;
    names.push(XMLDocument.getElementById("unblock").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][73]++;
    for (var i in names) {
      _$jscoverage['AddressBookPanelPresenter.js'][74]++;
      servlets.push((baseURL + names[i]));
}
}
  _$jscoverage['AddressBookPanelPresenter.js'][85]++;
  function getAddressBookContacts() {
    _$jscoverage['AddressBookPanelPresenter.js'][87]++;
    var contactRequest = new XMLHttpRequest();
    _$jscoverage['AddressBookPanelPresenter.js'][88]++;
    var groupRequest = new XMLHttpRequest();
    _$jscoverage['AddressBookPanelPresenter.js'][89]++;
    contactRequest.open("POST", servlets[0], false);
    _$jscoverage['AddressBookPanelPresenter.js'][90]++;
    contactRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    _$jscoverage['AddressBookPanelPresenter.js'][92]++;
    contactRequest.send();
    _$jscoverage['AddressBookPanelPresenter.js'][93]++;
    contacts = JSON.parse(contactRequest.responseText);
    _$jscoverage['AddressBookPanelPresenter.js'][94]++;
    groupRequest.open("POST", servlets[7], false);
    _$jscoverage['AddressBookPanelPresenter.js'][95]++;
    groupRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    _$jscoverage['AddressBookPanelPresenter.js'][97]++;
    groupRequest.send();
    _$jscoverage['AddressBookPanelPresenter.js'][98]++;
    groups = JSON.parse(groupRequest.responseText);
}
  _$jscoverage['AddressBookPanelPresenter.js'][101]++;
  function getImageSrc(contact) {
    _$jscoverage['AddressBookPanelPresenter.js'][102]++;
    path = "";
    _$jscoverage['AddressBookPanelPresenter.js'][103]++;
    switch (contact.state) {
    case "available":
      _$jscoverage['AddressBookPanelPresenter.js'][105]++;
      path = "img/stateavailable.png";
      _$jscoverage['AddressBookPanelPresenter.js'][106]++;
      break;
    case "occupied":
      _$jscoverage['AddressBookPanelPresenter.js'][108]++;
      path = "img/stateoccupied.png";
      _$jscoverage['AddressBookPanelPresenter.js'][109]++;
      break;
    default:
      _$jscoverage['AddressBookPanelPresenter.js'][111]++;
      path = "img/stateoffline.png";
      _$jscoverage['AddressBookPanelPresenter.js'][112]++;
      break;
    }
    _$jscoverage['AddressBookPanelPresenter.js'][114]++;
    return path;
}
  _$jscoverage['AddressBookPanelPresenter.js'][126]++;
  function addListItem(list, contact) {
    _$jscoverage['AddressBookPanelPresenter.js'][128]++;
    var item = document.createElement("li");
    _$jscoverage['AddressBookPanelPresenter.js'][135]++;
    var name = "";
    _$jscoverage['AddressBookPanelPresenter.js'][136]++;
    if ((contact.name != null)) {
      _$jscoverage['AddressBookPanelPresenter.js'][137]++;
      name += contact.name;
    }
    _$jscoverage['AddressBookPanelPresenter.js'][138]++;
    if ((contact.surname != null)) {
      _$jscoverage['AddressBookPanelPresenter.js'][139]++;
      if ((name != "")) {
        _$jscoverage['AddressBookPanelPresenter.js'][140]++;
        name += " ";
      }
      _$jscoverage['AddressBookPanelPresenter.js'][141]++;
      name += contact.surname;
    }
    _$jscoverage['AddressBookPanelPresenter.js'][143]++;
    if ((name == "")) {
      _$jscoverage['AddressBookPanelPresenter.js'][144]++;
      name += contact.email;
    }
    _$jscoverage['AddressBookPanelPresenter.js'][145]++;
    var avatar = contact.picturePath;
    _$jscoverage['AddressBookPanelPresenter.js'][148]++;
    item.setAttribute("id", contact.id);
    _$jscoverage['AddressBookPanelPresenter.js'][149]++;
    item.setAttribute("class", contact.state);
    _$jscoverage['AddressBookPanelPresenter.js'][151]++;
    item.onclick = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][152]++;
  mediator.onContactSelected(contact);
});
    _$jscoverage['AddressBookPanelPresenter.js'][156]++;
    var avatarNode = document.createElement("img");
    _$jscoverage['AddressBookPanelPresenter.js'][157]++;
    avatarNode.setAttribute("src", avatar);
    _$jscoverage['AddressBookPanelPresenter.js'][160]++;
    var textNode = document.createTextNode(name);
    _$jscoverage['AddressBookPanelPresenter.js'][162]++;
    var stateNode = document.createElement("img");
    _$jscoverage['AddressBookPanelPresenter.js'][163]++;
    stateNode.src = getImageSrc(contact);
    _$jscoverage['AddressBookPanelPresenter.js'][166]++;
    item.appendChild(avatarNode);
    _$jscoverage['AddressBookPanelPresenter.js'][167]++;
    item.appendChild(textNode);
    _$jscoverage['AddressBookPanelPresenter.js'][168]++;
    item.appendChild(stateNode);
    _$jscoverage['AddressBookPanelPresenter.js'][172]++;
    list.appendChild(item);
}
  _$jscoverage['AddressBookPanelPresenter.js'][186]++;
  function addOptionToSelect(select, value, text) {
    _$jscoverage['AddressBookPanelPresenter.js'][188]++;
    var option = document.createElement("option");
    _$jscoverage['AddressBookPanelPresenter.js'][189]++;
    option.value = value;
    _$jscoverage['AddressBookPanelPresenter.js'][190]++;
    option.appendChild(document.createTextNode(text));
    _$jscoverage['AddressBookPanelPresenter.js'][193]++;
    select.appendChild(option);
}
  _$jscoverage['AddressBookPanelPresenter.js'][206]++;
  function contactExistInGroup(contact, group) {
    _$jscoverage['AddressBookPanelPresenter.js'][208]++;
    for (var c in group.contacts) {
      _$jscoverage['AddressBookPanelPresenter.js'][209]++;
      if ((c == contact.id)) {
        _$jscoverage['AddressBookPanelPresenter.js'][210]++;
        return true;
      }
}
    _$jscoverage['AddressBookPanelPresenter.js'][212]++;
    return false;
}
  _$jscoverage['AddressBookPanelPresenter.js'][224]++;
  this.initialize = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][226]++;
  element.style.display = "block";
  _$jscoverage['AddressBookPanelPresenter.js'][227]++;
  element.innerHTML = "";
  _$jscoverage['AddressBookPanelPresenter.js'][229]++;
  var addressBookHeader = document.createElement("h1");
  _$jscoverage['AddressBookPanelPresenter.js'][230]++;
  var divFilter = document.createElement("div");
  _$jscoverage['AddressBookPanelPresenter.js'][231]++;
  var divSort = document.createElement("div");
  _$jscoverage['AddressBookPanelPresenter.js'][232]++;
  var divList = document.createElement("div");
  _$jscoverage['AddressBookPanelPresenter.js'][233]++;
  var divGroup = document.createElement("div");
  _$jscoverage['AddressBookPanelPresenter.js'][234]++;
  addressBookHeader.appendChild(document.createTextNode("RUBRICA"));
  _$jscoverage['AddressBookPanelPresenter.js'][235]++;
  divFilter.id = "divFilter";
  _$jscoverage['AddressBookPanelPresenter.js'][236]++;
  divSort.id = "divSort";
  _$jscoverage['AddressBookPanelPresenter.js'][237]++;
  divList.id = "divList";
  _$jscoverage['AddressBookPanelPresenter.js'][238]++;
  divGroup.id = "divGroup";
  _$jscoverage['AddressBookPanelPresenter.js'][241]++;
  var inputText = document.createElement("input");
  _$jscoverage['AddressBookPanelPresenter.js'][242]++;
  inputText.type = "text";
  _$jscoverage['AddressBookPanelPresenter.js'][243]++;
  var inputButton = document.createElement("input");
  _$jscoverage['AddressBookPanelPresenter.js'][244]++;
  inputButton.type = "image";
  _$jscoverage['AddressBookPanelPresenter.js'][245]++;
  inputButton.src = "img/search.png";
  _$jscoverage['AddressBookPanelPresenter.js'][247]++;
  var selectGroup = document.createElement("select");
  _$jscoverage['AddressBookPanelPresenter.js'][248]++;
  selectGroup.id = "selectGroup";
  _$jscoverage['AddressBookPanelPresenter.js'][250]++;
  var self = this;
  _$jscoverage['AddressBookPanelPresenter.js'][251]++;
  inputButton.onclick = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][252]++;
  var serchField = inputText.value;
  _$jscoverage['AddressBookPanelPresenter.js'][253]++;
  var filtredContacts = self.applyFilterByString(serchField);
  _$jscoverage['AddressBookPanelPresenter.js'][254]++;
  self.showFilter(filtredContacts);
});
  _$jscoverage['AddressBookPanelPresenter.js'][256]++;
  selectGroup.onchange = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][257]++;
  var idGroupSelected = selectGroup.options[selectGroup.selectedIndex].value;
  _$jscoverage['AddressBookPanelPresenter.js'][258]++;
  var filtredContacts = self.applyFilterByGroup(idGroupSelected);
  _$jscoverage['AddressBookPanelPresenter.js'][259]++;
  self.showFilter(filtredContacts);
});
  _$jscoverage['AddressBookPanelPresenter.js'][262]++;
  var selectSort = document.createElement("select");
  _$jscoverage['AddressBookPanelPresenter.js'][263]++;
  selectSort.id = "selectSort";
  _$jscoverage['AddressBookPanelPresenter.js'][266]++;
  var ul = document.createElement("ul");
  _$jscoverage['AddressBookPanelPresenter.js'][267]++;
  ul.id = "AddressBookList";
  _$jscoverage['AddressBookPanelPresenter.js'][270]++;
  divFilter.appendChild(inputText);
  _$jscoverage['AddressBookPanelPresenter.js'][271]++;
  divFilter.appendChild(inputButton);
  _$jscoverage['AddressBookPanelPresenter.js'][272]++;
  divSort.appendChild(selectSort);
  _$jscoverage['AddressBookPanelPresenter.js'][273]++;
  divList.appendChild(ul);
  _$jscoverage['AddressBookPanelPresenter.js'][274]++;
  divGroup.appendChild(selectGroup);
  _$jscoverage['AddressBookPanelPresenter.js'][277]++;
  element.appendChild(addressBookHeader);
  _$jscoverage['AddressBookPanelPresenter.js'][278]++;
  element.appendChild(divFilter);
  _$jscoverage['AddressBookPanelPresenter.js'][279]++;
  element.appendChild(divSort);
  _$jscoverage['AddressBookPanelPresenter.js'][280]++;
  element.appendChild(divList);
  _$jscoverage['AddressBookPanelPresenter.js'][281]++;
  element.appendChild(divGroup);
  _$jscoverage['AddressBookPanelPresenter.js'][284]++;
  this.setup();
});
  _$jscoverage['AddressBookPanelPresenter.js'][300]++;
  this.setup = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][302]++;
  getAddressBookContacts();
  _$jscoverage['AddressBookPanelPresenter.js'][306]++;
  var ulList = document.getElementById("AddressBookList");
  _$jscoverage['AddressBookPanelPresenter.js'][307]++;
  ulList.innerHTML = "";
  _$jscoverage['AddressBookPanelPresenter.js'][309]++;
  for (var contact in contacts) {
    _$jscoverage['AddressBookPanelPresenter.js'][310]++;
    addListItem(ulList, contacts[contact]);
}
  _$jscoverage['AddressBookPanelPresenter.js'][315]++;
  var selectGroup = document.getElementById("selectGroup");
  _$jscoverage['AddressBookPanelPresenter.js'][316]++;
  selectGroup.innerHTML = "";
  _$jscoverage['AddressBookPanelPresenter.js'][318]++;
  for (var group in groups) {
    _$jscoverage['AddressBookPanelPresenter.js'][319]++;
    addOptionToSelect(selectGroup, group, groups[group].name);
}
});
  _$jscoverage['AddressBookPanelPresenter.js'][328]++;
  this.hide = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][329]++;
  if (element) {
    _$jscoverage['AddressBookPanelPresenter.js'][330]++;
    element.style.display = "none";
  }
});
  _$jscoverage['AddressBookPanelPresenter.js'][342]++;
  this.addContact = (function (contact) {
  _$jscoverage['AddressBookPanelPresenter.js'][344]++;
  if (this.contactAlreadyPresent(contact)) {
    _$jscoverage['AddressBookPanelPresenter.js'][345]++;
    throw "Contatto gi\u00c3\u00a0 presente nella rubrica.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][349]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][350]++;
  request.open("POST", servlets[1], false);
  _$jscoverage['AddressBookPanelPresenter.js'][351]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][353]++;
  request.send(("contactId=" + contact.id));
  _$jscoverage['AddressBookPanelPresenter.js'][357]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][358]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][359]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][360]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][362]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][373]++;
  this.removeContact = (function (contact) {
  _$jscoverage['AddressBookPanelPresenter.js'][375]++;
  if ((! this.contactAlreadyPresent(contact))) {
    _$jscoverage['AddressBookPanelPresenter.js'][376]++;
    throw "Non puoi eliminare un contatto non presente in rubrica.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][379]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][380]++;
  request.open("POST", servlets[2], false);
  _$jscoverage['AddressBookPanelPresenter.js'][381]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][383]++;
  request.send(("contactId=" + contact.id));
  _$jscoverage['AddressBookPanelPresenter.js'][387]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][388]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][389]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][390]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][392]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][405]++;
  this.addContactInGroup = (function (contact, group) {
  _$jscoverage['AddressBookPanelPresenter.js'][407]++;
  if (contactExistInGroup(contact, group)) {
    _$jscoverage['AddressBookPanelPresenter.js'][408]++;
    throw "Il contatto \u00c3\u00a8 gi\u00c3\u00a0 presente nel gruppo.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][411]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][412]++;
  request.open("POST", servlets[3], false);
  _$jscoverage['AddressBookPanelPresenter.js'][413]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][415]++;
  request.send(("contactId=" + contact.id + "&groupId=" + group.id));
  _$jscoverage['AddressBookPanelPresenter.js'][419]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][420]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][421]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][422]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][424]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][437]++;
  this.deleteContactFromGroup = (function (contact, group) {
  _$jscoverage['AddressBookPanelPresenter.js'][439]++;
  if ((! contactExistInGroup(contact, group))) {
    _$jscoverage['AddressBookPanelPresenter.js'][440]++;
    throw "Il contatto non \u00c3\u00a8 presente nel gruppo.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][443]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][444]++;
  request.open("POST", servlets[4], false);
  _$jscoverage['AddressBookPanelPresenter.js'][445]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][447]++;
  request.send(("contactId=" + contact.id + "&groupId=" + group.id));
  _$jscoverage['AddressBookPanelPresenter.js'][451]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][452]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][453]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][454]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][456]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][469]++;
  this.addGroup = (function (name) {
  _$jscoverage['AddressBookPanelPresenter.js'][470]++;
  for (var key in groups) {
    _$jscoverage['AddressBookPanelPresenter.js'][471]++;
    if ((groups[key].name = name)) {
      _$jscoverage['AddressBookPanelPresenter.js'][472]++;
      throw "Il gruppo che stai cercando di inserire esiste gi\u00c3\u00a0.";
    }
}
  _$jscoverage['AddressBookPanelPresenter.js'][477]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][478]++;
  request.open("POST", servlets[5], false);
  _$jscoverage['AddressBookPanelPresenter.js'][479]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][481]++;
  request.send(("groupName=" + name));
  _$jscoverage['AddressBookPanelPresenter.js'][485]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][486]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][487]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][488]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][490]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][502]++;
  this.deleteGroup = (function (group) {
  _$jscoverage['AddressBookPanelPresenter.js'][503]++;
  console.log(groups.length);
  _$jscoverage['AddressBookPanelPresenter.js'][505]++;
  var existGroup = false;
  _$jscoverage['AddressBookPanelPresenter.js'][506]++;
  for (var g in groups) {
    _$jscoverage['AddressBookPanelPresenter.js'][507]++;
    if ((g == group.id)) {
      _$jscoverage['AddressBookPanelPresenter.js'][508]++;
      existGroup = true;
    }
}
  _$jscoverage['AddressBookPanelPresenter.js'][510]++;
  if ((! existGroup)) {
    _$jscoverage['AddressBookPanelPresenter.js'][511]++;
    throw "Il gruppo che stai cercando di eliminare non esiste.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][514]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][515]++;
  request.open("POST", servlets[6], false);
  _$jscoverage['AddressBookPanelPresenter.js'][516]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][518]++;
  request.send(("groupId=" + group.id));
  _$jscoverage['AddressBookPanelPresenter.js'][522]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][523]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][524]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][525]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][527]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][539]++;
  this.applyFilterByString = (function (param) {
  _$jscoverage['AddressBookPanelPresenter.js'][541]++;
  var filtred = new Array();
  _$jscoverage['AddressBookPanelPresenter.js'][544]++;
  var pattern = new RegExp(param);
  _$jscoverage['AddressBookPanelPresenter.js'][545]++;
  for (var contact in contacts) {
    _$jscoverage['AddressBookPanelPresenter.js'][546]++;
    if ((pattern.test(contacts[contact].name) || pattern.test(contacts[contact].surname) || pattern.test(contacts[contact].email))) {
      _$jscoverage['AddressBookPanelPresenter.js'][549]++;
      filtred.push(contact);
    }
}
  _$jscoverage['AddressBookPanelPresenter.js'][554]++;
  return filtred;
});
  _$jscoverage['AddressBookPanelPresenter.js'][566]++;
  this.applyFilterByGroup = (function (idGroup) {
  _$jscoverage['AddressBookPanelPresenter.js'][567]++;
  return groups[idGroup].contacts;
});
  _$jscoverage['AddressBookPanelPresenter.js'][584]++;
  this.showFilter = (function (filtredContacts) {
  _$jscoverage['AddressBookPanelPresenter.js'][586]++;
  var ulList = document.getElementById("AddressBookList");
  _$jscoverage['AddressBookPanelPresenter.js'][587]++;
  ulList.innerHTML = "";
  _$jscoverage['AddressBookPanelPresenter.js'][592]++;
  for (var id in filtredContacts) {
    _$jscoverage['AddressBookPanelPresenter.js'][594]++;
    addListItem(ulList, contacts[id]);
}
});
  _$jscoverage['AddressBookPanelPresenter.js'][606]++;
  this.contactAlreadyPresent = (function (contact) {
  _$jscoverage['AddressBookPanelPresenter.js'][609]++;
  for (var key in contacts) {
    _$jscoverage['AddressBookPanelPresenter.js'][610]++;
    if ((contacts[key].id == contact.id)) {
      _$jscoverage['AddressBookPanelPresenter.js'][611]++;
      return true;
    }
}
  _$jscoverage['AddressBookPanelPresenter.js'][614]++;
  return false;
});
  _$jscoverage['AddressBookPanelPresenter.js'][625]++;
  this.blockUser = (function (contact) {
  _$jscoverage['AddressBookPanelPresenter.js'][627]++;
  if ((! this.contactAlreadyPresent(contact))) {
    _$jscoverage['AddressBookPanelPresenter.js'][628]++;
    throw "Contatto non presente nella rubrica.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][630]++;
  if (contact.blocked) {
    _$jscoverage['AddressBookPanelPresenter.js'][631]++;
    throw "Contatto gi\u00c3\u00a0 bloccato.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][635]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][636]++;
  request.open("POST", servlets[8], false);
  _$jscoverage['AddressBookPanelPresenter.js'][637]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][639]++;
  request.send(("contactId=" + contact.id));
  _$jscoverage['AddressBookPanelPresenter.js'][642]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][643]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][644]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][645]++;
    mediator.displayContact(contact);
    _$jscoverage['AddressBookPanelPresenter.js'][646]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][648]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][659]++;
  this.unlockUser = (function (contact) {
  _$jscoverage['AddressBookPanelPresenter.js'][661]++;
  if ((! this.contactAlreadyPresent(contact))) {
    _$jscoverage['AddressBookPanelPresenter.js'][662]++;
    throw "Contatto non presente nella rubrica.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][664]++;
  if ((! contact.blocked)) {
    _$jscoverage['AddressBookPanelPresenter.js'][665]++;
    throw "Contatto gi\u00c3\u00a0 sbloccato.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][669]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][670]++;
  request.open("POST", servlets[9], false);
  _$jscoverage['AddressBookPanelPresenter.js'][671]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][673]++;
  request.send(("contactId=" + contact.id));
  _$jscoverage['AddressBookPanelPresenter.js'][676]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][677]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][678]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][679]++;
    mediator.displayContact(contact);
    _$jscoverage['AddressBookPanelPresenter.js'][680]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][682]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][695]++;
  this.getGroupsWhereContactsIs = (function (contact) {
  _$jscoverage['AddressBookPanelPresenter.js'][697]++;
  var groupSelected = new Object();
  _$jscoverage['AddressBookPanelPresenter.js'][699]++;
  for (var group in groups) {
    _$jscoverage['AddressBookPanelPresenter.js'][701]++;
    for (var groupContact in groups[group].contacts) {
      _$jscoverage['AddressBookPanelPresenter.js'][703]++;
      if ((groupContact == contact.id)) {
        _$jscoverage['AddressBookPanelPresenter.js'][706]++;
        groupSelected[groups[group].id] = groups[group].name;
      }
}
}
  _$jscoverage['AddressBookPanelPresenter.js'][712]++;
  return groupSelected;
});
  _$jscoverage['AddressBookPanelPresenter.js'][727]++;
  this.getContacts = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][728]++;
  return contacts;
});
  _$jscoverage['AddressBookPanelPresenter.js'][730]++;
  this.setContacts = (function (cont) {
  _$jscoverage['AddressBookPanelPresenter.js'][731]++;
  contacts = cont;
});
  _$jscoverage['AddressBookPanelPresenter.js'][733]++;
  this.getGroups = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][734]++;
  return groups;
});
  _$jscoverage['AddressBookPanelPresenter.js'][736]++;
  this.setGroups = (function (cont) {
  _$jscoverage['AddressBookPanelPresenter.js'][737]++;
  groups = cont;
});
}
