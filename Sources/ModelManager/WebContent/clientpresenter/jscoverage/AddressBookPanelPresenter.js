/* automatically generated by JSCoverage - do not edit */
try {
  if (typeof top === 'object' && top !== null && typeof top.opener === 'object' && top.opener !== null) {
    // this is a browser window that was opened from another window

    if (! top.opener._$jscoverage) {
      top.opener._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null) {
    // this is a browser window

    try {
      if (typeof top.opener === 'object' && top.opener !== null && top.opener._$jscoverage) {
        top._$jscoverage = top.opener._$jscoverage;
      }
    }
    catch (e) {}

    if (! top._$jscoverage) {
      top._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null && top._$jscoverage) {
    _$jscoverage = top._$jscoverage;
  }
}
catch (e) {}
if (typeof _$jscoverage !== 'object') {
  _$jscoverage = {};
}
if (! _$jscoverage['AddressBookPanelPresenter.js']) {
  _$jscoverage['AddressBookPanelPresenter.js'] = [];
  _$jscoverage['AddressBookPanelPresenter.js'][15] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][20] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][32] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][34] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][36] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][38] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][49] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][50] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][51] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][52] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][53] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][54] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][56] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][57] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][59] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][60] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][61] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][63] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][64] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][65] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][67] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][69] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][70] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][71] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][73] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][74] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][85] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][87] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][88] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][89] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][90] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][92] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][93] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][94] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][95] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][97] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][98] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][110] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][112] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][119] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][120] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][121] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][122] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][123] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][124] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][125] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][127] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][128] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][129] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][130] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][133] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][134] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][136] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][137] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][141] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][142] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][145] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][147] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][148] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][149] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][151] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][152] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][154] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][155] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][157] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][158] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][160] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][164] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][165] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][166] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][170] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][184] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][186] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][187] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][188] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][191] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][204] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][206] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][207] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][208] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][210] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][222] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][224] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][225] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][227] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][228] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][229] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][230] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][231] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][232] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][233] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][234] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][235] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][236] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][239] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][240] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][241] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][242] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][243] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][244] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][246] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][247] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][248] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][249] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][250] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][252] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][253] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][254] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][255] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][258] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][259] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][262] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][263] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][266] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][267] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][268] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][269] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][270] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][273] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][274] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][275] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][276] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][277] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][280] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][296] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][298] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][302] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][303] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][305] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][306] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][311] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][312] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][314] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][315] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][324] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][325] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][326] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][338] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][340] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][341] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][345] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][346] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][347] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][349] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][353] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][354] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][355] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][356] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][358] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][369] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][371] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][372] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][375] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][376] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][377] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][379] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][383] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][384] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][385] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][386] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][388] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][401] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][403] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][404] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][407] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][408] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][409] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][411] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][415] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][416] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][417] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][418] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][420] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][433] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][435] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][436] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][439] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][440] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][441] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][443] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][447] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][448] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][449] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][450] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][452] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][465] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][466] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][467] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][468] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][473] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][474] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][475] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][477] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][481] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][482] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][483] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][484] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][486] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][498] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][499] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][501] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][502] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][503] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][504] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][506] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][507] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][510] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][511] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][512] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][514] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][518] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][519] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][520] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][521] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][523] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][535] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][537] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][540] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][541] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][542] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][545] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][550] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][562] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][563] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][580] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][582] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][583] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][588] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][590] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][602] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][605] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][606] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][607] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][610] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][621] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][623] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][624] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][626] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][627] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][631] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][632] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][633] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][635] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][638] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][639] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][640] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][641] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][642] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][644] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][655] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][657] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][658] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][660] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][661] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][665] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][666] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][667] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][669] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][672] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][673] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][674] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][675] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][676] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][678] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][691] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][693] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][695] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][697] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][699] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][702] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][708] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][723] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][724] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][726] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][727] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][729] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][730] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][732] = 0;
  _$jscoverage['AddressBookPanelPresenter.js'][733] = 0;
}
_$jscoverage['AddressBookPanelPresenter.js'].source = ["<span class=\"c\">/**</span>","<span class=\"c\"> * Presenter incaricato di gestire il pannello della rubrica, contiene le</span>","<span class=\"c\"> * funzioni associate ai widget grafici della vista relativi alla rubrica e ha</span>","<span class=\"c\"> * la responsabilit&#195;&#160; di aggiornare la vista sulla base dei dati ricevuti dal</span>","<span class=\"c\"> * server</span>","<span class=\"c\"> * </span>","<span class=\"c\"> * @constructor</span>","<span class=\"c\"> * @this {AddressBookPanelPresenter}</span>","<span class=\"c\"> * @param {String}</span>","<span class=\"c\"> *            url URL della servlet con cui il presenter deve comunicare</span>","<span class=\"c\"> * @author Marco Schivo</span>","<span class=\"c\"> * @author Riccardo Tresoldi</span>","<span class=\"c\"> * @author Diego Beraldin</span>","<span class=\"c\"> */</span>","<span class=\"k\">function</span> AddressBookPanelPresenter<span class=\"k\">()</span> <span class=\"k\">{</span>","\t<span class=\"c\">/***************************************************************************</span>","<span class=\"c\">\t * VARIABILI PRIVATE</span>","<span class=\"c\">\t **************************************************************************/</span>","\t<span class=\"c\">// elemento controllato da questo presenter</span>","\t<span class=\"k\">var</span> element <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"AddressBookPanel\"</span><span class=\"k\">);</span>","","\t<span class=\"c\">/*</span>","<span class=\"c\">\t * OPERATION ON SERVER: - 0 = ottieni i contatti della rubrica - 1 =</span>","<span class=\"c\">\t * aggiungi contatto ad una rubrica - 2 = elimina contatto da una rubrica -</span>","<span class=\"c\">\t * 3 = aggiunge un contatto ad un gruppo - 4 = eliminare un contatto da un</span>","<span class=\"c\">\t * gruppo - 5 = aggiunta di un gruppo - 6 = eliminazione di un gruppo - 7 =</span>","<span class=\"c\">\t * ottieni i gruppi della rubrica - 8 = bloccare un utente - 9 = sbloccare</span>","<span class=\"c\">\t * un utente - 10 = restituire una ricerca</span>","<span class=\"c\">\t */</span>","","\t<span class=\"c\">// array dei contatti della rubrica dell'utente</span>","\t<span class=\"k\">var</span> contacts <span class=\"k\">=</span> <span class=\"k\">new</span> Array<span class=\"k\">();</span>","\t<span class=\"c\">// array dei gruppi della rubrica</span>","\t<span class=\"k\">var</span> groups <span class=\"k\">=</span> <span class=\"k\">new</span> Array<span class=\"k\">();</span>","\t<span class=\"c\">// URL delle servlet</span>","\t<span class=\"k\">var</span> servlets <span class=\"k\">=</span> <span class=\"k\">new</span> Array<span class=\"k\">();</span>","\t<span class=\"c\">// inizializza l'array delle servlet</span>","\tgetServletURLs<span class=\"k\">();</span>","","\t<span class=\"c\">/***************************************************************************</span>","<span class=\"c\">\t * METODI PRIVATI</span>","<span class=\"c\">\t **************************************************************************/</span>","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Configura gli URL delle servlet da interrogare leggendoli dal file di</span>","<span class=\"c\">\t * configurazione</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Diego Beraldin</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> getServletURLs<span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> configurationRequest <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\tconfigurationRequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> configurationFile<span class=\"k\">,</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\tconfigurationRequest<span class=\"k\">.</span>send<span class=\"k\">();</span>","\t\t<span class=\"k\">var</span> XMLDocument <span class=\"k\">=</span> configurationRequest<span class=\"k\">.</span>responseXML<span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> baseURL <span class=\"k\">=</span> XMLDocument<span class=\"k\">.</span>getElementsByTagName<span class=\"k\">(</span><span class=\"s\">\"baseURL\"</span><span class=\"k\">)[</span><span class=\"s\">0</span><span class=\"k\">].</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">;</span>","","\t\t<span class=\"k\">var</span> names <span class=\"k\">=</span> Array<span class=\"k\">();</span>","\t\tnames","\t\t\t\t<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"getcontacts\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\t<span class=\"k\">;</span>","\t\tnames<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"addcontact\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames","\t\t\t\t<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"deletecontact\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"insert\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"remove\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames","\t\t\t\t<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"creategroup\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames","\t\t\t\t<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"deletegroup\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"getgroups\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"block\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","\t\tnames<span class=\"k\">.</span>push<span class=\"k\">(</span>XMLDocument<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"unblock\"</span><span class=\"k\">).</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>data<span class=\"k\">);</span>","","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> i <span class=\"k\">in</span> names<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\tservlets<span class=\"k\">.</span>push<span class=\"k\">(</span>baseURL <span class=\"k\">+</span> names<span class=\"k\">[</span>i<span class=\"k\">]);</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Recupera i contatti e i gruppi della propria rubrica dal server tramite</span>","<span class=\"c\">\t * AJAX</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Marco Schivo</span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> getAddressBookContacts<span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// apro due XMLHttprequest rispettivamente per contatti e gruppi</span>","\t\t<span class=\"k\">var</span> contactRequest <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\t<span class=\"k\">var</span> groupRequest <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\tcontactRequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\tcontactRequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\tcontactRequest<span class=\"k\">.</span>send<span class=\"k\">();</span>","\t\tcontacts <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>contactRequest<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\tgroupRequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">7</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\tgroupRequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\tgroupRequest<span class=\"k\">.</span>send<span class=\"k\">();</span>","\t\tgroups <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>groupRequest<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Aggiunge una voce di rubrica a una lista</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {HTMLUListElement}</span>","<span class=\"c\">\t *            list lista cui il contatto deve essere aggiunto</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact contatto da aggiungere</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> addListItem<span class=\"k\">(</span>list<span class=\"k\">,</span> contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// creo l'elemento &lt;li&gt;</span>","\t\t<span class=\"k\">var</span> item <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"li\"</span><span class=\"k\">);</span>","","\t\t<span class=\"c\">/*</span>","<span class=\"c\">\t\t * creo le variabili contenenti i dati del contatto da attribuire al</span>","<span class=\"c\">\t\t * 'li', dove le propriet&#195;&#160; name, surname e presenter sono le tipiche</span>","<span class=\"c\">\t\t * degli oggetti JSUserData</span>","<span class=\"c\">\t\t */</span>","\t\t<span class=\"k\">var</span> name <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>contact<span class=\"k\">.</span>name <span class=\"k\">!=</span> <span class=\"k\">null</span><span class=\"k\">)</span>","\t\t\tname <span class=\"k\">+=</span> contact<span class=\"k\">.</span>name<span class=\"k\">;</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>contact<span class=\"k\">.</span>surname <span class=\"k\">!=</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>name <span class=\"k\">!=</span> <span class=\"s\">\"\"</span><span class=\"k\">)</span>","\t\t\t\tname <span class=\"k\">+=</span> <span class=\"s\">\" \"</span><span class=\"k\">;</span>","\t\t\tname <span class=\"k\">+=</span> contact<span class=\"k\">.</span>surname<span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>name <span class=\"k\">==</span> <span class=\"s\">\"\"</span><span class=\"k\">)</span>","\t\t\tname <span class=\"k\">+=</span> contact<span class=\"k\">.</span>email<span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> state <span class=\"k\">=</span> contact<span class=\"k\">.</span>state<span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> avatar <span class=\"k\">=</span> contact<span class=\"k\">.</span>picturePath<span class=\"k\">;</span>","","\t\t<span class=\"c\">// imposto gli attributi corretti</span>","\t\titem<span class=\"k\">.</span>setAttribute<span class=\"k\">(</span><span class=\"s\">\"id\"</span><span class=\"k\">,</span> contact<span class=\"k\">.</span>id<span class=\"k\">);</span>","\t\titem<span class=\"k\">.</span>setAttribute<span class=\"k\">(</span><span class=\"s\">\"class\"</span><span class=\"k\">,</span> contact<span class=\"k\">.</span>state<span class=\"k\">);</span>","\t\t<span class=\"c\">// la variabile 'mediator' &#195;&#168; una variabile globale</span>","\t\titem<span class=\"k\">.</span>onclick <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t\tmediator<span class=\"k\">.</span>onContactSelected<span class=\"k\">(</span>contact<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// genero i valori da attribuire all'&lt;li&gt;</span>","\t\t<span class=\"k\">var</span> avatarNode <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'img'</span><span class=\"k\">);</span>","\t\tavatarNode<span class=\"k\">.</span>setAttribute<span class=\"k\">(</span><span class=\"s\">\"src\"</span><span class=\"k\">,</span> avatar<span class=\"k\">);</span>","\t\t<span class=\"c\">// avatarNode.setAttribute(\"class\", \"\");</span>","","\t\t<span class=\"k\">var</span> textNode <span class=\"k\">=</span> document<span class=\"k\">.</span>createTextNode<span class=\"k\">(</span>name<span class=\"k\">);</span>","","\t\t<span class=\"k\">var</span> stateNode <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'img'</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> statePictureUrl<span class=\"k\">;</span>","\t\t<span class=\"k\">switch</span> <span class=\"k\">(</span>state<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">case</span> <span class=\"s\">\"available\"</span><span class=\"k\">:</span>","\t\t\tstatePictureUrl <span class=\"k\">=</span> <span class=\"s\">\"img/stateavailable.png\"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">case</span> <span class=\"s\">\"occupied\"</span><span class=\"k\">:</span>","\t\t\tstatePictureUrl <span class=\"k\">=</span> <span class=\"s\">\"img/stateoccupied.png\"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">default</span><span class=\"k\">:</span>","\t\t\tstatePictureUrl <span class=\"k\">=</span> <span class=\"s\">\"img/stateoffline.png\"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">break</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\tstateNode<span class=\"k\">.</span>src <span class=\"k\">=</span> statePictureUrl<span class=\"k\">;</span>","\t\t<span class=\"c\">// stateNdoe.class=\"\";</span>","","\t\t<span class=\"c\">// imposto il valore dell'&lt;li&gt;</span>","\t\titem<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>avatarNode<span class=\"k\">);</span>","\t\titem<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>textNode<span class=\"k\">);</span>","\t\titem<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>stateNode<span class=\"k\">);</span>","","\t\t<span class=\"c\">// aggiungo il &lt;li&gt; al elemento &lt;ul&gt; dell'oggetto ulList su cui viene</span>","\t\t<span class=\"c\">// invocata la funzione</span>","\t\tlist<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>item<span class=\"k\">);</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Aggiungere una &lt;option&gt; ad una Select</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {HTMLSelectElement}</span>","<span class=\"c\">\t *            select rappresenta la select a cui aggiungere la &lt;option&gt;</span>","<span class=\"c\">\t * @param {String}</span>","<span class=\"c\">\t *            value rappresenta il valore da attribuire alla nuova &lt;option&gt;</span>","<span class=\"c\">\t * @param {String}</span>","<span class=\"c\">\t *            text rappresenta il testo da attribuire alla nuova &lt;option&gt;</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> addOptionToSelect<span class=\"k\">(</span>select<span class=\"k\">,</span> value<span class=\"k\">,</span> text<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// creo la option</span>","\t\t<span class=\"k\">var</span> option <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"option\"</span><span class=\"k\">);</span>","\t\toption<span class=\"k\">.</span>value <span class=\"k\">=</span> value<span class=\"k\">;</span>","\t\toption<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>document<span class=\"k\">.</span>createTextNode<span class=\"k\">(</span>text<span class=\"k\">));</span>","","\t\t<span class=\"c\">// appendo la nuova option alla select</span>","\t\tselect<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>option<span class=\"k\">);</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Controlla se un contatto &#195;&#168; presente nel gruppo passato come parametro</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact contatto da verificare se presente nel gruppo</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            group gruppo su cui verificare</span>","<span class=\"c\">\t * @return {Boolean} ritorna true solo se il contatto &#195;&#168; presente nel gruppo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> contactExistInGroup<span class=\"k\">(</span>contact<span class=\"k\">,</span> group<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// ciclo l'array di contatti del gruppo</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> c <span class=\"k\">in</span> group<span class=\"k\">.</span>contacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>c <span class=\"k\">==</span> contact<span class=\"k\">.</span>id<span class=\"k\">)</span>","\t\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">return</span> <span class=\"k\">false</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/***************************************************************************</span>","<span class=\"c\">\t * METODI PUBBLICI</span>","<span class=\"c\">\t **************************************************************************/</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Inizializza 'AddressBookPanel' e lo popola con i contatti della rubrica</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>initialize <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// mi imposto come visibile</span>","\t\telement<span class=\"k\">.</span>style<span class=\"k\">.</span>display <span class=\"k\">=</span> <span class=\"s\">\"block\"</span><span class=\"k\">;</span>","\t\telement<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t<span class=\"c\">// creo i tre div principali</span>","\t\t<span class=\"k\">var</span> addressBookHeader <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'h1'</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> divFilter <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> divSort <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> divList <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> divGroup <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","\t\taddressBookHeader<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>document<span class=\"k\">.</span>createTextNode<span class=\"k\">(</span><span class=\"s\">\"RUBRICA\"</span><span class=\"k\">));</span>","\t\tdivFilter<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"divFilter\"</span><span class=\"k\">;</span>","\t\tdivSort<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"divSort\"</span><span class=\"k\">;</span>","\t\tdivList<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"divList\"</span><span class=\"k\">;</span>","\t\tdivGroup<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"divGroup\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// creo contenuto divFilter</span>","\t\t<span class=\"k\">var</span> inputText <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'input'</span><span class=\"k\">);</span>","\t\tinputText<span class=\"k\">.</span>type <span class=\"k\">=</span> <span class=\"s\">\"text\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> inputButton <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'input'</span><span class=\"k\">);</span>","\t\tinputButton<span class=\"k\">.</span>type <span class=\"k\">=</span> <span class=\"s\">\"image\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> selectGroup <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'select'</span><span class=\"k\">);</span>","\t\tselectGroup<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"selectGroup\"</span><span class=\"k\">;</span>","\t\t<span class=\"c\">// attribuisco gli eventi per la ricerca</span>","\t\t<span class=\"k\">var</span> self <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">;</span>","\t\tinputButton<span class=\"k\">.</span>onclick <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">var</span> serchField <span class=\"k\">=</span> inputText<span class=\"k\">.</span>value<span class=\"k\">;</span>","\t\t\t<span class=\"k\">var</span> filtredContacts <span class=\"k\">=</span> self<span class=\"k\">.</span>applyFilterByString<span class=\"k\">(</span>serchField<span class=\"k\">);</span>","\t\t\tself<span class=\"k\">.</span>showFilter<span class=\"k\">(</span>filtredContacts<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t\tselectGroup<span class=\"k\">.</span>onchange <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">var</span> idGroupSelected <span class=\"k\">=</span> selectGroup<span class=\"k\">.</span>options<span class=\"k\">[</span>selectGroup<span class=\"k\">.</span>selectedIndex<span class=\"k\">].</span>value<span class=\"k\">;</span>","\t\t\t<span class=\"k\">var</span> filtredContacts <span class=\"k\">=</span> self<span class=\"k\">.</span>applyFilterByGroup<span class=\"k\">(</span>idGroupSelected<span class=\"k\">);</span>","\t\t\tself<span class=\"k\">.</span>showFilter<span class=\"k\">(</span>filtredContacts<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t\t<span class=\"c\">// creo contenuto divSort</span>","\t\t<span class=\"k\">var</span> selectSort <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'select'</span><span class=\"k\">);</span>","\t\tselectSort<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"selectSort\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// creo contenuto divList</span>","\t\t<span class=\"k\">var</span> ul <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'ul'</span><span class=\"k\">);</span>","\t\tul<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"AddressBookList\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// appendo i sottonodi ai nodi principali</span>","\t\tdivFilter<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>inputText<span class=\"k\">);</span>","\t\tdivFilter<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>inputButton<span class=\"k\">);</span>","\t\tdivSort<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>selectSort<span class=\"k\">);</span>","\t\tdivList<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>ul<span class=\"k\">);</span>","\t\tdivGroup<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>selectGroup<span class=\"k\">);</span>","","\t\t<span class=\"c\">// appendo il sottoalbero al DOM</span>","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>addressBookHeader<span class=\"k\">);</span>","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>divFilter<span class=\"k\">);</span>","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>divSort<span class=\"k\">);</span>","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>divList<span class=\"k\">);</span>","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>divGroup<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizza i contatti nel pannello</span>","\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Scarica la rubrica dal server popolando la lista dei contatti, quindi</span>","<span class=\"c\">\t * inserisce i contatti estratti dal server all'interno della lista</span>","<span class=\"c\">\t * all'interno di 'AddressBookPanel'</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * NOTA PER I VERIFICATORI Richiede che il 'document' abbia al suo interno</span>","<span class=\"c\">\t * un elemento di tipo '</span>","<span class=\"c\">\t * &lt;ul&gt;' con 'id' uguale a 'AddressBookList' Al termine della funzione la</span>","<span class=\"c\">\t * lista dei contatti contacts deve essere popolata con i contatti che passa</span>","<span class=\"c\">\t * lo stub</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>setup <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// scarica i contatti dal server</span>","\t\tgetAddressBookContacts<span class=\"k\">();</span>","","\t\t<span class=\"c\">// popolo la parte dei contatti</span>","\t\t<span class=\"c\">// estraggo l'&lt;ul&gt; del Addressbook e lo inizializzo</span>","\t\t<span class=\"k\">var</span> ulList <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"AddressBookList\"</span><span class=\"k\">);</span>","\t\tulList<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t<span class=\"c\">// ciclo i contatti e agiungo un &lt;li&gt; per ogni contatto</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> contact <span class=\"k\">in</span> contacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\taddListItem<span class=\"k\">(</span>ulList<span class=\"k\">,</span> contacts<span class=\"k\">[</span>contact<span class=\"k\">]);</span>","\t\t<span class=\"k\">}</span>","","\t\t<span class=\"c\">// popolo la parte dei gruppi</span>","\t\t<span class=\"c\">// estraggo la &lt;select&gt; dal DOM e la inizializzo</span>","\t\t<span class=\"k\">var</span> selectGroup <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"selectGroup\"</span><span class=\"k\">);</span>","\t\tselectGroup<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t<span class=\"c\">// ciclo i gruppi e li aggiungo alla &lt;select&gt;</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> group <span class=\"k\">in</span> groups<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\taddOptionToSelect<span class=\"k\">(</span>selectGroup<span class=\"k\">,</span> group<span class=\"k\">,</span> groups<span class=\"k\">[</span>group<span class=\"k\">].</span>name<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Rende invisibile il pannello della rubrica all'occorrenza</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Diego Beraldin</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>hide <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>element<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\telement<span class=\"k\">.</span>style<span class=\"k\">.</span>display <span class=\"k\">=</span> <span class=\"s\">\"none\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Aggiunge un contatto alla rubrica se non gi&#195;&#160; presente</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact rappresenta il contatto da aggiungere</span>","<span class=\"c\">\t * @returns {Boolean} true solo se l'aggiunta ha avuto successo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>addContact <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// controllo che non sia gi&#195;&#160; presente nella rubrica</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span><span class=\"k\">this</span><span class=\"k\">.</span>contactAlreadyPresent<span class=\"k\">(</span>contact<span class=\"k\">))</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Contatto gi&#195;&#160; presente nella rubrica.\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","","\t\t<span class=\"c\">// invio la richiesta al server e attendo il risultato</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">1</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"contactId=\"</span> <span class=\"k\">+</span> contact<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizzo l'esito della richiesta. Se esito positivo refresh della</span>","\t\t<span class=\"c\">// rubrica</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Rimovere un contatto alla rubrica se presente</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact rappresenta il contatto da eliminare</span>","<span class=\"c\">\t * @returns {Boolean} true solo se l'eliminazione ha avuto successo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>removeContact <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// controllo se presente nella rubrica</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span><span class=\"k\">this</span><span class=\"k\">.</span>contactAlreadyPresent<span class=\"k\">(</span>contact<span class=\"k\">))</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Non puoi eliminare un contatto non presente in rubrica.\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// invio la richiesta al server e attendo il risultato</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">2</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"contactId=\"</span> <span class=\"k\">+</span> contact<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizzo l'esito della richiesta. Se esito positivo refresh della</span>","\t\t<span class=\"c\">// rubrica</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Aggiungere un contatto della propria rubrica ad un proprio gruppo</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact rappresenta il contatto da aggiungere al gruppo</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            group rappresenta il gruppo in cui aggiungere il contatto</span>","<span class=\"c\">\t * @returns {Boolean} true solo se l'aggiunta ha avuto successo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>addContactInGroup <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">,</span> group<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// controllo che il contatto non sia gi&#195;&#160; presente nel gruppo</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>contactExistInGroup<span class=\"k\">(</span>contact<span class=\"k\">,</span> group<span class=\"k\">))</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Il contatto &#195;&#168; gi&#195;&#160; presente nel gruppo.\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// invio la richiesta al server e attendo il risultato</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">3</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"contactId=\"</span> <span class=\"k\">+</span> contact<span class=\"k\">.</span>id <span class=\"k\">+</span> <span class=\"s\">\"&amp;groupId=\"</span> <span class=\"k\">+</span> group<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizzo l'esito della richiesta. Se esito positivo refresh della</span>","\t\t<span class=\"c\">// rubrica</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Elimina un contatto della propria rubrica da un proprio gruppo</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact rappresenta il contatto da eliminare dal gruppo</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            group rappresenta il gruppo in cui eliminare il contatto</span>","<span class=\"c\">\t * @returns {Boolean} true solo se l'eliminazione ha avuto successo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>deleteContactFromGroup <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">,</span> group<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// controllo che il contatto sia presente nel gruppo</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span>contactExistInGroup<span class=\"k\">(</span>contact<span class=\"k\">,</span> group<span class=\"k\">))</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Il contatto non &#195;&#168; presente nel gruppo.\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// invio la richiesta al server e attendo il risultato</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">4</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"contactId=\"</span> <span class=\"k\">+</span> contact<span class=\"k\">.</span>id <span class=\"k\">+</span> <span class=\"s\">\"&amp;groupId=\"</span> <span class=\"k\">+</span> group<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizzo l'esito della richiesta. Se esito positivo refresh della</span>","\t\t<span class=\"c\">// rubrica</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Aggiunge un gruppo alla rubrica</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {String}</span>","<span class=\"c\">\t *            name rappresenta il nome del gruppo da aggiungere</span>","<span class=\"c\">\t * @throws {String}</span>","<span class=\"c\">\t *             errore nel caso in cui il gruppo esista gi&#195;&#160;</span>","<span class=\"c\">\t * @returns {Boolean} true solo se l'aggiunta ha avuto successo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>addGroup <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>name<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> key <span class=\"k\">in</span> groups<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>groups<span class=\"k\">[</span>key<span class=\"k\">].</span>name <span class=\"k\">=</span> name<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Il gruppo che stai cercando di inserire esiste gi&#195;&#160;.\"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">}</span>","","\t\t<span class=\"c\">// invio la richiesta al server e attendo il risultato</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">5</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"groupName=\"</span> <span class=\"k\">+</span> name<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizzo l'esito della richiesta. Se esito positivo refresh della</span>","\t\t<span class=\"c\">// rubrica</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Rimuovere un gruppo alla rubrica, gli utenti appartenenti a quel gruppo</span>","<span class=\"c\">\t * non verranno eliminati</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            group rappresenta l'id del gruppo da eliminare</span>","<span class=\"c\">\t * @returns {Boolean} true solo se la rimozione ha avuto successo</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>deleteGroup <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>group<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\tconsole<span class=\"k\">.</span>log<span class=\"k\">(</span>groups<span class=\"k\">.</span>length<span class=\"k\">);</span>","\t\t<span class=\"c\">// controllo che il gruppo esista</span>","\t\t<span class=\"k\">var</span> existGroup <span class=\"k\">=</span> <span class=\"k\">false</span><span class=\"k\">;</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> g <span class=\"k\">in</span> groups<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>g <span class=\"k\">==</span> group<span class=\"k\">.</span>id<span class=\"k\">)</span>","\t\t\t\texistGroup <span class=\"k\">=</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span>existGroup<span class=\"k\">)</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Il gruppo che stai cercando di eliminare non esiste.\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// invio la richiesta al server e attendo il risultato</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">6</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"groupId=\"</span> <span class=\"k\">+</span> group<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// visualizzo l'esito della richiesta. Se esito positivo refresh della</span>","\t\t<span class=\"c\">// rubrica</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Dato una stringa in ingresso questa funzione filtra i contatti presenti</span>","<span class=\"c\">\t * in locale</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {String}</span>","<span class=\"c\">\t *            param string da cercare tra i contatti</span>","<span class=\"c\">\t * @returns {Array} lista di contatti filtrata</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>applyFilterByString <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>param<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// creo array di utenti filtrati</span>","\t\t<span class=\"k\">var</span> filtred <span class=\"k\">=</span> <span class=\"k\">new</span> Array<span class=\"k\">();</span>","","\t\t<span class=\"c\">// specifico aspessione regolare</span>","\t\t<span class=\"k\">var</span> pattern <span class=\"k\">=</span> <span class=\"k\">new</span> RegExp<span class=\"k\">(</span>param<span class=\"k\">);</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> contact <span class=\"k\">in</span> contacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">((</span>pattern<span class=\"k\">.</span>test<span class=\"k\">(</span>contacts<span class=\"k\">[</span>contact<span class=\"k\">].</span>name<span class=\"k\">))</span>","\t\t\t\t\t<span class=\"k\">||</span> <span class=\"k\">(</span>pattern<span class=\"k\">.</span>test<span class=\"k\">(</span>contacts<span class=\"k\">[</span>contact<span class=\"k\">].</span>surname<span class=\"k\">))</span>","\t\t\t\t\t<span class=\"k\">||</span> <span class=\"k\">(</span>pattern<span class=\"k\">.</span>test<span class=\"k\">(</span>contacts<span class=\"k\">[</span>contact<span class=\"k\">].</span>email<span class=\"k\">)))</span> <span class=\"k\">{</span>","\t\t\t\tfiltred<span class=\"k\">.</span>push<span class=\"k\">(</span>contact<span class=\"k\">);</span>","\t\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">}</span>","","\t\t<span class=\"c\">// visualizzo l'utente filtrato</span>","\t\t<span class=\"k\">return</span> filtred<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Dato l'id di un gruppo in ingresso questa funzione filtra i contatti</span>","<span class=\"c\">\t * presenti in locale</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Number}</span>","<span class=\"c\">\t *            idGroup id del gruppo su cui filtrare i contatti</span>","<span class=\"c\">\t * @returns {Array} lista di contatti filtrata</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>applyFilterByGroup <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>idGroup<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">return</span> groups<span class=\"k\">[</span>idGroup<span class=\"k\">].</span>contacts<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Elimina il contenuto preesistente e visualizza il nuovo contenuto</span>","<span class=\"c\">\t * filtrato della</span>","<span class=\"c\">\t * &lt;ul&gt;</span>","<span class=\"c\">\t * dei contatti</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * NOTA PER I VERIFICATORI Richiede che il 'document' abbia al suo interno</span>","<span class=\"c\">\t * un elemento di tipo '</span>","<span class=\"c\">\t * &lt;ul&gt;' con 'id' uguale a 'AddressBookList'</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Ricardo tresoldi</span>","<span class=\"c\">\t * @param {Array}</span>","<span class=\"c\">\t *            filtredContacts Array di contrati</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>showFilter <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>filtredContacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// estraggo l'&lt;ul&gt; del Addressbook e lo inizializzo</span>","\t\t<span class=\"k\">var</span> ulList <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"AddressBookList\"</span><span class=\"k\">);</span>","\t\tulList<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// TODO aggiungere una label per avvisare che i campi visualizzati sono</span>","\t\t<span class=\"c\">// filtrati</span>","","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> id <span class=\"k\">in</span> filtredContacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"c\">// ciclo i contatti e agiungo un &lt;li&gt; per ogni contatto</span>","\t\t\taddListItem<span class=\"k\">(</span>ulList<span class=\"k\">,</span> filtredContacts<span class=\"k\">[</span>id<span class=\"k\">]);</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Dato un contatto verifica se appartiene alla rubrica</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact contatto da verificare</span>","<span class=\"c\">\t * @return {Boolean} true solo se presente in rubrica</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>contactAlreadyPresent <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// scorro la rubrica e controllo se contact.id=rubrica.contact.id.</span>","\t\t<span class=\"c\">// ritorno true solo se presente</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> key <span class=\"k\">in</span> contacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>contacts<span class=\"k\">[</span>key<span class=\"k\">].</span>id <span class=\"k\">==</span> contact<span class=\"k\">.</span>id<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">return</span> <span class=\"k\">false</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Funzione che blocca l'utente passato per parametro</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact contatto da bloccare</span>","<span class=\"c\">\t * @return {Boolean} true solo se l'utente &#195;&#168; stato bloccato correttemente</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>blockUser <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// controllo che sia presente nella rubrica</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span><span class=\"k\">this</span><span class=\"k\">.</span>contactAlreadyPresent<span class=\"k\">(</span>contact<span class=\"k\">))</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Contatto non presente nella rubrica.\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>contact<span class=\"k\">.</span>blocked<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Contatto gi&#195;&#160; bloccato.\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","","\t\t<span class=\"c\">// invio la richiesta di bloccaggio dell'utente</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">8</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"contactId=\"</span> <span class=\"k\">+</span> contact<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// controllo il risultato</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\tmediator<span class=\"k\">.</span>displayContact<span class=\"k\">(</span>contact<span class=\"k\">);</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Funzione che sblocca l'utente passato per parametro</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact contatto da sbloccare</span>","<span class=\"c\">\t * @return {Boolean} true solo se l'utente &#195;&#168; stato sbloccato correttemente</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>unlockUser <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// controllo che sia presente nella rubrica</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span><span class=\"k\">this</span><span class=\"k\">.</span>contactAlreadyPresent<span class=\"k\">(</span>contact<span class=\"k\">))</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Contatto non presente nella rubrica.\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(!</span>contact<span class=\"k\">.</span>blocked<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Contatto gi&#195;&#160; sbloccato.\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","","\t\t<span class=\"c\">// invio la richiesta di bloccaggio dell'utente</span>","\t\t<span class=\"k\">var</span> request <span class=\"k\">=</span> <span class=\"k\">new</span> XMLHttpRequest<span class=\"k\">();</span>","\t\trequest<span class=\"k\">.</span>open<span class=\"k\">(</span><span class=\"s\">\"POST\"</span><span class=\"k\">,</span> servlets<span class=\"k\">[</span><span class=\"s\">9</span><span class=\"k\">],</span> <span class=\"k\">false</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>setRequestHeader<span class=\"k\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"k\">,</span>","\t\t\t\t<span class=\"s\">\"application/x-www-form-urlencoded\"</span><span class=\"k\">);</span>","\t\trequest<span class=\"k\">.</span>send<span class=\"k\">(</span><span class=\"s\">\"contactId=\"</span> <span class=\"k\">+</span> contact<span class=\"k\">.</span>id<span class=\"k\">);</span>","","\t\t<span class=\"c\">// controllo il risultato</span>","\t\tresult <span class=\"k\">=</span> JSON<span class=\"k\">.</span>parse<span class=\"k\">(</span>request<span class=\"k\">.</span>responseText<span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>result <span class=\"k\">==</span> <span class=\"k\">true</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">this</span><span class=\"k\">.</span>setup<span class=\"k\">();</span>","\t\t\tmediator<span class=\"k\">.</span>displayContact<span class=\"k\">(</span>contact<span class=\"k\">);</span>","\t\t\t<span class=\"k\">return</span> <span class=\"k\">true</span><span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">throw</span> <span class=\"s\">\"Ops... qualcosa &#195;&#168; andato storto nel server.\"</span><span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Funzione che dato un utente restituisce i gruppi in cui &#195;&#168; stato inserito</span>","<span class=\"c\">\t * nell'addressBook</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            contact contatto di cui ricercare i gruppi in cui &#195;&#168; inserito</span>","<span class=\"c\">\t * @return {Object} array associativo che presenta la lista dei gruppi in</span>","<span class=\"c\">\t *         cui &#195;&#168; presente il contatto</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>getGroupsWhereContactsIs <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>contact<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"c\">// creo l'array da tornare</span>","\t\t<span class=\"k\">var</span> groupSelected <span class=\"k\">=</span> <span class=\"k\">new</span> Object<span class=\"k\">();</span>","\t\t<span class=\"c\">// ciclo tutti i gruppi</span>","\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> group <span class=\"k\">in</span> groups<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"c\">// ciclo tutti i contatti di un gruppo</span>","\t\t\t<span class=\"k\">for</span> <span class=\"k\">(</span> <span class=\"k\">var</span> groupContact <span class=\"k\">in</span> groups<span class=\"k\">[</span>group<span class=\"k\">].</span>contacts<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t<span class=\"c\">// contriollo se il contatto &#195;&#168; uguale al contatto del gruppo</span>","\t\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>groupContact <span class=\"k\">==</span> contact<span class=\"k\">.</span>id<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\t\t<span class=\"c\">// se i contatti coincidono aggiungo il gruppo alla lista di</span>","\t\t\t\t\t<span class=\"c\">// ritorno e blocco lo scorrimento dell'array</span>","\t\t\t\t\tgroupSelected<span class=\"k\">[</span>groups<span class=\"k\">[</span>group<span class=\"k\">].</span>id<span class=\"k\">]</span> <span class=\"k\">=</span> groups<span class=\"k\">[</span>group<span class=\"k\">].</span>name<span class=\"k\">;</span>","\t\t\t\t\t<span class=\"c\">// break;</span>","\t\t\t\t<span class=\"k\">}</span>","\t\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"c\">// ritorno l'array formato</span>","\t\t<span class=\"k\">return</span> groupSelected<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/*</span>","<span class=\"c\">\t * FILE JSON CHE RAFFIGURA LA RUBRICA { \"idUser1\":{ \"name\": \"\", \"surname\":</span>","<span class=\"c\">\t * \"\", \"email\": \"\", \"id\": \"\", \"picturePath\": \"\", \"state\": \"\", \"blocked\":</span>","<span class=\"c\">\t * \"true|false\" },</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * \"idUser2\": {.......}, }</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * FILE JSON CHE RAFFIGURA I GRUPPI { \"idGruppo1\":{ \"name\": \"\", \"id\": \"\",</span>","<span class=\"c\">\t * \"contacts\": [ 1, 2, 3 ] },</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * \"idGruppo2\": {........}. }</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>getContacts <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">return</span> contacts<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>setContacts <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>cont<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\tcontacts <span class=\"k\">=</span> cont<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>getGroups <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">return</span> groups<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>setGroups <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>cont<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\tgroups <span class=\"k\">=</span> cont<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","<span class=\"k\">}</span>"];
_$jscoverage['AddressBookPanelPresenter.js'][15]++;
function AddressBookPanelPresenter() {
  _$jscoverage['AddressBookPanelPresenter.js'][20]++;
  var element = document.getElementById("AddressBookPanel");
  _$jscoverage['AddressBookPanelPresenter.js'][32]++;
  var contacts = new Array();
  _$jscoverage['AddressBookPanelPresenter.js'][34]++;
  var groups = new Array();
  _$jscoverage['AddressBookPanelPresenter.js'][36]++;
  var servlets = new Array();
  _$jscoverage['AddressBookPanelPresenter.js'][38]++;
  getServletURLs();
  _$jscoverage['AddressBookPanelPresenter.js'][49]++;
  function getServletURLs() {
    _$jscoverage['AddressBookPanelPresenter.js'][50]++;
    var configurationRequest = new XMLHttpRequest();
    _$jscoverage['AddressBookPanelPresenter.js'][51]++;
    configurationRequest.open("POST", configurationFile, false);
    _$jscoverage['AddressBookPanelPresenter.js'][52]++;
    configurationRequest.send();
    _$jscoverage['AddressBookPanelPresenter.js'][53]++;
    var XMLDocument = configurationRequest.responseXML;
    _$jscoverage['AddressBookPanelPresenter.js'][54]++;
    var baseURL = XMLDocument.getElementsByTagName("baseURL")[0].childNodes[0].data;
    _$jscoverage['AddressBookPanelPresenter.js'][56]++;
    var names = Array();
    _$jscoverage['AddressBookPanelPresenter.js'][57]++;
    names.push(XMLDocument.getElementById("getcontacts").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][59]++;
    ;
    _$jscoverage['AddressBookPanelPresenter.js'][60]++;
    names.push(XMLDocument.getElementById("addcontact").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][61]++;
    names.push(XMLDocument.getElementById("deletecontact").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][63]++;
    names.push(XMLDocument.getElementById("insert").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][64]++;
    names.push(XMLDocument.getElementById("remove").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][65]++;
    names.push(XMLDocument.getElementById("creategroup").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][67]++;
    names.push(XMLDocument.getElementById("deletegroup").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][69]++;
    names.push(XMLDocument.getElementById("getgroups").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][70]++;
    names.push(XMLDocument.getElementById("block").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][71]++;
    names.push(XMLDocument.getElementById("unblock").childNodes[0].data);
    _$jscoverage['AddressBookPanelPresenter.js'][73]++;
    for (var i in names) {
      _$jscoverage['AddressBookPanelPresenter.js'][74]++;
      servlets.push((baseURL + names[i]));
}
}
  _$jscoverage['AddressBookPanelPresenter.js'][85]++;
  function getAddressBookContacts() {
    _$jscoverage['AddressBookPanelPresenter.js'][87]++;
    var contactRequest = new XMLHttpRequest();
    _$jscoverage['AddressBookPanelPresenter.js'][88]++;
    var groupRequest = new XMLHttpRequest();
    _$jscoverage['AddressBookPanelPresenter.js'][89]++;
    contactRequest.open("POST", servlets[0], false);
    _$jscoverage['AddressBookPanelPresenter.js'][90]++;
    contactRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    _$jscoverage['AddressBookPanelPresenter.js'][92]++;
    contactRequest.send();
    _$jscoverage['AddressBookPanelPresenter.js'][93]++;
    contacts = JSON.parse(contactRequest.responseText);
    _$jscoverage['AddressBookPanelPresenter.js'][94]++;
    groupRequest.open("POST", servlets[7], false);
    _$jscoverage['AddressBookPanelPresenter.js'][95]++;
    groupRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    _$jscoverage['AddressBookPanelPresenter.js'][97]++;
    groupRequest.send();
    _$jscoverage['AddressBookPanelPresenter.js'][98]++;
    groups = JSON.parse(groupRequest.responseText);
}
  _$jscoverage['AddressBookPanelPresenter.js'][110]++;
  function addListItem(list, contact) {
    _$jscoverage['AddressBookPanelPresenter.js'][112]++;
    var item = document.createElement("li");
    _$jscoverage['AddressBookPanelPresenter.js'][119]++;
    var name = "";
    _$jscoverage['AddressBookPanelPresenter.js'][120]++;
    if ((contact.name != null)) {
      _$jscoverage['AddressBookPanelPresenter.js'][121]++;
      name += contact.name;
    }
    _$jscoverage['AddressBookPanelPresenter.js'][122]++;
    if ((contact.surname != null)) {
      _$jscoverage['AddressBookPanelPresenter.js'][123]++;
      if ((name != "")) {
        _$jscoverage['AddressBookPanelPresenter.js'][124]++;
        name += " ";
      }
      _$jscoverage['AddressBookPanelPresenter.js'][125]++;
      name += contact.surname;
    }
    _$jscoverage['AddressBookPanelPresenter.js'][127]++;
    if ((name == "")) {
      _$jscoverage['AddressBookPanelPresenter.js'][128]++;
      name += contact.email;
    }
    _$jscoverage['AddressBookPanelPresenter.js'][129]++;
    var state = contact.state;
    _$jscoverage['AddressBookPanelPresenter.js'][130]++;
    var avatar = contact.picturePath;
    _$jscoverage['AddressBookPanelPresenter.js'][133]++;
    item.setAttribute("id", contact.id);
    _$jscoverage['AddressBookPanelPresenter.js'][134]++;
    item.setAttribute("class", contact.state);
    _$jscoverage['AddressBookPanelPresenter.js'][136]++;
    item.onclick = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][137]++;
  mediator.onContactSelected(contact);
});
    _$jscoverage['AddressBookPanelPresenter.js'][141]++;
    var avatarNode = document.createElement("img");
    _$jscoverage['AddressBookPanelPresenter.js'][142]++;
    avatarNode.setAttribute("src", avatar);
    _$jscoverage['AddressBookPanelPresenter.js'][145]++;
    var textNode = document.createTextNode(name);
    _$jscoverage['AddressBookPanelPresenter.js'][147]++;
    var stateNode = document.createElement("img");
    _$jscoverage['AddressBookPanelPresenter.js'][148]++;
    var statePictureUrl;
    _$jscoverage['AddressBookPanelPresenter.js'][149]++;
    switch (state) {
    case "available":
      _$jscoverage['AddressBookPanelPresenter.js'][151]++;
      statePictureUrl = "img/stateavailable.png";
      _$jscoverage['AddressBookPanelPresenter.js'][152]++;
      break;
    case "occupied":
      _$jscoverage['AddressBookPanelPresenter.js'][154]++;
      statePictureUrl = "img/stateoccupied.png";
      _$jscoverage['AddressBookPanelPresenter.js'][155]++;
      break;
    default:
      _$jscoverage['AddressBookPanelPresenter.js'][157]++;
      statePictureUrl = "img/stateoffline.png";
      _$jscoverage['AddressBookPanelPresenter.js'][158]++;
      break;
    }
    _$jscoverage['AddressBookPanelPresenter.js'][160]++;
    stateNode.src = statePictureUrl;
    _$jscoverage['AddressBookPanelPresenter.js'][164]++;
    item.appendChild(avatarNode);
    _$jscoverage['AddressBookPanelPresenter.js'][165]++;
    item.appendChild(textNode);
    _$jscoverage['AddressBookPanelPresenter.js'][166]++;
    item.appendChild(stateNode);
    _$jscoverage['AddressBookPanelPresenter.js'][170]++;
    list.appendChild(item);
}
  _$jscoverage['AddressBookPanelPresenter.js'][184]++;
  function addOptionToSelect(select, value, text) {
    _$jscoverage['AddressBookPanelPresenter.js'][186]++;
    var option = document.createElement("option");
    _$jscoverage['AddressBookPanelPresenter.js'][187]++;
    option.value = value;
    _$jscoverage['AddressBookPanelPresenter.js'][188]++;
    option.appendChild(document.createTextNode(text));
    _$jscoverage['AddressBookPanelPresenter.js'][191]++;
    select.appendChild(option);
}
  _$jscoverage['AddressBookPanelPresenter.js'][204]++;
  function contactExistInGroup(contact, group) {
    _$jscoverage['AddressBookPanelPresenter.js'][206]++;
    for (var c in group.contacts) {
      _$jscoverage['AddressBookPanelPresenter.js'][207]++;
      if ((c == contact.id)) {
        _$jscoverage['AddressBookPanelPresenter.js'][208]++;
        return true;
      }
}
    _$jscoverage['AddressBookPanelPresenter.js'][210]++;
    return false;
}
  _$jscoverage['AddressBookPanelPresenter.js'][222]++;
  this.initialize = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][224]++;
  element.style.display = "block";
  _$jscoverage['AddressBookPanelPresenter.js'][225]++;
  element.innerHTML = "";
  _$jscoverage['AddressBookPanelPresenter.js'][227]++;
  var addressBookHeader = document.createElement("h1");
  _$jscoverage['AddressBookPanelPresenter.js'][228]++;
  var divFilter = document.createElement("div");
  _$jscoverage['AddressBookPanelPresenter.js'][229]++;
  var divSort = document.createElement("div");
  _$jscoverage['AddressBookPanelPresenter.js'][230]++;
  var divList = document.createElement("div");
  _$jscoverage['AddressBookPanelPresenter.js'][231]++;
  var divGroup = document.createElement("div");
  _$jscoverage['AddressBookPanelPresenter.js'][232]++;
  addressBookHeader.appendChild(document.createTextNode("RUBRICA"));
  _$jscoverage['AddressBookPanelPresenter.js'][233]++;
  divFilter.id = "divFilter";
  _$jscoverage['AddressBookPanelPresenter.js'][234]++;
  divSort.id = "divSort";
  _$jscoverage['AddressBookPanelPresenter.js'][235]++;
  divList.id = "divList";
  _$jscoverage['AddressBookPanelPresenter.js'][236]++;
  divGroup.id = "divGroup";
  _$jscoverage['AddressBookPanelPresenter.js'][239]++;
  var inputText = document.createElement("input");
  _$jscoverage['AddressBookPanelPresenter.js'][240]++;
  inputText.type = "text";
  _$jscoverage['AddressBookPanelPresenter.js'][241]++;
  var inputButton = document.createElement("input");
  _$jscoverage['AddressBookPanelPresenter.js'][242]++;
  inputButton.type = "image";
  _$jscoverage['AddressBookPanelPresenter.js'][243]++;
  var selectGroup = document.createElement("select");
  _$jscoverage['AddressBookPanelPresenter.js'][244]++;
  selectGroup.id = "selectGroup";
  _$jscoverage['AddressBookPanelPresenter.js'][246]++;
  var self = this;
  _$jscoverage['AddressBookPanelPresenter.js'][247]++;
  inputButton.onclick = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][248]++;
  var serchField = inputText.value;
  _$jscoverage['AddressBookPanelPresenter.js'][249]++;
  var filtredContacts = self.applyFilterByString(serchField);
  _$jscoverage['AddressBookPanelPresenter.js'][250]++;
  self.showFilter(filtredContacts);
});
  _$jscoverage['AddressBookPanelPresenter.js'][252]++;
  selectGroup.onchange = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][253]++;
  var idGroupSelected = selectGroup.options[selectGroup.selectedIndex].value;
  _$jscoverage['AddressBookPanelPresenter.js'][254]++;
  var filtredContacts = self.applyFilterByGroup(idGroupSelected);
  _$jscoverage['AddressBookPanelPresenter.js'][255]++;
  self.showFilter(filtredContacts);
});
  _$jscoverage['AddressBookPanelPresenter.js'][258]++;
  var selectSort = document.createElement("select");
  _$jscoverage['AddressBookPanelPresenter.js'][259]++;
  selectSort.id = "selectSort";
  _$jscoverage['AddressBookPanelPresenter.js'][262]++;
  var ul = document.createElement("ul");
  _$jscoverage['AddressBookPanelPresenter.js'][263]++;
  ul.id = "AddressBookList";
  _$jscoverage['AddressBookPanelPresenter.js'][266]++;
  divFilter.appendChild(inputText);
  _$jscoverage['AddressBookPanelPresenter.js'][267]++;
  divFilter.appendChild(inputButton);
  _$jscoverage['AddressBookPanelPresenter.js'][268]++;
  divSort.appendChild(selectSort);
  _$jscoverage['AddressBookPanelPresenter.js'][269]++;
  divList.appendChild(ul);
  _$jscoverage['AddressBookPanelPresenter.js'][270]++;
  divGroup.appendChild(selectGroup);
  _$jscoverage['AddressBookPanelPresenter.js'][273]++;
  element.appendChild(addressBookHeader);
  _$jscoverage['AddressBookPanelPresenter.js'][274]++;
  element.appendChild(divFilter);
  _$jscoverage['AddressBookPanelPresenter.js'][275]++;
  element.appendChild(divSort);
  _$jscoverage['AddressBookPanelPresenter.js'][276]++;
  element.appendChild(divList);
  _$jscoverage['AddressBookPanelPresenter.js'][277]++;
  element.appendChild(divGroup);
  _$jscoverage['AddressBookPanelPresenter.js'][280]++;
  this.setup();
});
  _$jscoverage['AddressBookPanelPresenter.js'][296]++;
  this.setup = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][298]++;
  getAddressBookContacts();
  _$jscoverage['AddressBookPanelPresenter.js'][302]++;
  var ulList = document.getElementById("AddressBookList");
  _$jscoverage['AddressBookPanelPresenter.js'][303]++;
  ulList.innerHTML = "";
  _$jscoverage['AddressBookPanelPresenter.js'][305]++;
  for (var contact in contacts) {
    _$jscoverage['AddressBookPanelPresenter.js'][306]++;
    addListItem(ulList, contacts[contact]);
}
  _$jscoverage['AddressBookPanelPresenter.js'][311]++;
  var selectGroup = document.getElementById("selectGroup");
  _$jscoverage['AddressBookPanelPresenter.js'][312]++;
  selectGroup.innerHTML = "";
  _$jscoverage['AddressBookPanelPresenter.js'][314]++;
  for (var group in groups) {
    _$jscoverage['AddressBookPanelPresenter.js'][315]++;
    addOptionToSelect(selectGroup, group, groups[group].name);
}
});
  _$jscoverage['AddressBookPanelPresenter.js'][324]++;
  this.hide = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][325]++;
  if (element) {
    _$jscoverage['AddressBookPanelPresenter.js'][326]++;
    element.style.display = "none";
  }
});
  _$jscoverage['AddressBookPanelPresenter.js'][338]++;
  this.addContact = (function (contact) {
  _$jscoverage['AddressBookPanelPresenter.js'][340]++;
  if (this.contactAlreadyPresent(contact)) {
    _$jscoverage['AddressBookPanelPresenter.js'][341]++;
    throw "Contatto gi\u00c3\u00a0 presente nella rubrica.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][345]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][346]++;
  request.open("POST", servlets[1], false);
  _$jscoverage['AddressBookPanelPresenter.js'][347]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][349]++;
  request.send(("contactId=" + contact.id));
  _$jscoverage['AddressBookPanelPresenter.js'][353]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][354]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][355]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][356]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][358]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][369]++;
  this.removeContact = (function (contact) {
  _$jscoverage['AddressBookPanelPresenter.js'][371]++;
  if ((! this.contactAlreadyPresent(contact))) {
    _$jscoverage['AddressBookPanelPresenter.js'][372]++;
    throw "Non puoi eliminare un contatto non presente in rubrica.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][375]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][376]++;
  request.open("POST", servlets[2], false);
  _$jscoverage['AddressBookPanelPresenter.js'][377]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][379]++;
  request.send(("contactId=" + contact.id));
  _$jscoverage['AddressBookPanelPresenter.js'][383]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][384]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][385]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][386]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][388]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][401]++;
  this.addContactInGroup = (function (contact, group) {
  _$jscoverage['AddressBookPanelPresenter.js'][403]++;
  if (contactExistInGroup(contact, group)) {
    _$jscoverage['AddressBookPanelPresenter.js'][404]++;
    throw "Il contatto \u00c3\u00a8 gi\u00c3\u00a0 presente nel gruppo.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][407]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][408]++;
  request.open("POST", servlets[3], false);
  _$jscoverage['AddressBookPanelPresenter.js'][409]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][411]++;
  request.send(("contactId=" + contact.id + "&groupId=" + group.id));
  _$jscoverage['AddressBookPanelPresenter.js'][415]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][416]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][417]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][418]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][420]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][433]++;
  this.deleteContactFromGroup = (function (contact, group) {
  _$jscoverage['AddressBookPanelPresenter.js'][435]++;
  if ((! contactExistInGroup(contact, group))) {
    _$jscoverage['AddressBookPanelPresenter.js'][436]++;
    throw "Il contatto non \u00c3\u00a8 presente nel gruppo.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][439]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][440]++;
  request.open("POST", servlets[4], false);
  _$jscoverage['AddressBookPanelPresenter.js'][441]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][443]++;
  request.send(("contactId=" + contact.id + "&groupId=" + group.id));
  _$jscoverage['AddressBookPanelPresenter.js'][447]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][448]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][449]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][450]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][452]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][465]++;
  this.addGroup = (function (name) {
  _$jscoverage['AddressBookPanelPresenter.js'][466]++;
  for (var key in groups) {
    _$jscoverage['AddressBookPanelPresenter.js'][467]++;
    if ((groups[key].name = name)) {
      _$jscoverage['AddressBookPanelPresenter.js'][468]++;
      throw "Il gruppo che stai cercando di inserire esiste gi\u00c3\u00a0.";
    }
}
  _$jscoverage['AddressBookPanelPresenter.js'][473]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][474]++;
  request.open("POST", servlets[5], false);
  _$jscoverage['AddressBookPanelPresenter.js'][475]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][477]++;
  request.send(("groupName=" + name));
  _$jscoverage['AddressBookPanelPresenter.js'][481]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][482]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][483]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][484]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][486]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][498]++;
  this.deleteGroup = (function (group) {
  _$jscoverage['AddressBookPanelPresenter.js'][499]++;
  console.log(groups.length);
  _$jscoverage['AddressBookPanelPresenter.js'][501]++;
  var existGroup = false;
  _$jscoverage['AddressBookPanelPresenter.js'][502]++;
  for (var g in groups) {
    _$jscoverage['AddressBookPanelPresenter.js'][503]++;
    if ((g == group.id)) {
      _$jscoverage['AddressBookPanelPresenter.js'][504]++;
      existGroup = true;
    }
}
  _$jscoverage['AddressBookPanelPresenter.js'][506]++;
  if ((! existGroup)) {
    _$jscoverage['AddressBookPanelPresenter.js'][507]++;
    throw "Il gruppo che stai cercando di eliminare non esiste.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][510]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][511]++;
  request.open("POST", servlets[6], false);
  _$jscoverage['AddressBookPanelPresenter.js'][512]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][514]++;
  request.send(("groupId=" + group.id));
  _$jscoverage['AddressBookPanelPresenter.js'][518]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][519]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][520]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][521]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][523]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][535]++;
  this.applyFilterByString = (function (param) {
  _$jscoverage['AddressBookPanelPresenter.js'][537]++;
  var filtred = new Array();
  _$jscoverage['AddressBookPanelPresenter.js'][540]++;
  var pattern = new RegExp(param);
  _$jscoverage['AddressBookPanelPresenter.js'][541]++;
  for (var contact in contacts) {
    _$jscoverage['AddressBookPanelPresenter.js'][542]++;
    if ((pattern.test(contacts[contact].name) || pattern.test(contacts[contact].surname) || pattern.test(contacts[contact].email))) {
      _$jscoverage['AddressBookPanelPresenter.js'][545]++;
      filtred.push(contact);
    }
}
  _$jscoverage['AddressBookPanelPresenter.js'][550]++;
  return filtred;
});
  _$jscoverage['AddressBookPanelPresenter.js'][562]++;
  this.applyFilterByGroup = (function (idGroup) {
  _$jscoverage['AddressBookPanelPresenter.js'][563]++;
  return groups[idGroup].contacts;
});
  _$jscoverage['AddressBookPanelPresenter.js'][580]++;
  this.showFilter = (function (filtredContacts) {
  _$jscoverage['AddressBookPanelPresenter.js'][582]++;
  var ulList = document.getElementById("AddressBookList");
  _$jscoverage['AddressBookPanelPresenter.js'][583]++;
  ulList.innerHTML = "";
  _$jscoverage['AddressBookPanelPresenter.js'][588]++;
  for (var id in filtredContacts) {
    _$jscoverage['AddressBookPanelPresenter.js'][590]++;
    addListItem(ulList, filtredContacts[id]);
}
});
  _$jscoverage['AddressBookPanelPresenter.js'][602]++;
  this.contactAlreadyPresent = (function (contact) {
  _$jscoverage['AddressBookPanelPresenter.js'][605]++;
  for (var key in contacts) {
    _$jscoverage['AddressBookPanelPresenter.js'][606]++;
    if ((contacts[key].id == contact.id)) {
      _$jscoverage['AddressBookPanelPresenter.js'][607]++;
      return true;
    }
}
  _$jscoverage['AddressBookPanelPresenter.js'][610]++;
  return false;
});
  _$jscoverage['AddressBookPanelPresenter.js'][621]++;
  this.blockUser = (function (contact) {
  _$jscoverage['AddressBookPanelPresenter.js'][623]++;
  if ((! this.contactAlreadyPresent(contact))) {
    _$jscoverage['AddressBookPanelPresenter.js'][624]++;
    throw "Contatto non presente nella rubrica.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][626]++;
  if (contact.blocked) {
    _$jscoverage['AddressBookPanelPresenter.js'][627]++;
    throw "Contatto gi\u00c3\u00a0 bloccato.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][631]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][632]++;
  request.open("POST", servlets[8], false);
  _$jscoverage['AddressBookPanelPresenter.js'][633]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][635]++;
  request.send(("contactId=" + contact.id));
  _$jscoverage['AddressBookPanelPresenter.js'][638]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][639]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][640]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][641]++;
    mediator.displayContact(contact);
    _$jscoverage['AddressBookPanelPresenter.js'][642]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][644]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][655]++;
  this.unlockUser = (function (contact) {
  _$jscoverage['AddressBookPanelPresenter.js'][657]++;
  if ((! this.contactAlreadyPresent(contact))) {
    _$jscoverage['AddressBookPanelPresenter.js'][658]++;
    throw "Contatto non presente nella rubrica.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][660]++;
  if ((! contact.blocked)) {
    _$jscoverage['AddressBookPanelPresenter.js'][661]++;
    throw "Contatto gi\u00c3\u00a0 sbloccato.";
  }
  _$jscoverage['AddressBookPanelPresenter.js'][665]++;
  var request = new XMLHttpRequest();
  _$jscoverage['AddressBookPanelPresenter.js'][666]++;
  request.open("POST", servlets[9], false);
  _$jscoverage['AddressBookPanelPresenter.js'][667]++;
  request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
  _$jscoverage['AddressBookPanelPresenter.js'][669]++;
  request.send(("contactId=" + contact.id));
  _$jscoverage['AddressBookPanelPresenter.js'][672]++;
  result = JSON.parse(request.responseText);
  _$jscoverage['AddressBookPanelPresenter.js'][673]++;
  if ((result == true)) {
    _$jscoverage['AddressBookPanelPresenter.js'][674]++;
    this.setup();
    _$jscoverage['AddressBookPanelPresenter.js'][675]++;
    mediator.displayContact(contact);
    _$jscoverage['AddressBookPanelPresenter.js'][676]++;
    return true;
  }
  _$jscoverage['AddressBookPanelPresenter.js'][678]++;
  throw "Ops... qualcosa \u00c3\u00a8 andato storto nel server.";
});
  _$jscoverage['AddressBookPanelPresenter.js'][691]++;
  this.getGroupsWhereContactsIs = (function (contact) {
  _$jscoverage['AddressBookPanelPresenter.js'][693]++;
  var groupSelected = new Object();
  _$jscoverage['AddressBookPanelPresenter.js'][695]++;
  for (var group in groups) {
    _$jscoverage['AddressBookPanelPresenter.js'][697]++;
    for (var groupContact in groups[group].contacts) {
      _$jscoverage['AddressBookPanelPresenter.js'][699]++;
      if ((groupContact == contact.id)) {
        _$jscoverage['AddressBookPanelPresenter.js'][702]++;
        groupSelected[groups[group].id] = groups[group].name;
      }
}
}
  _$jscoverage['AddressBookPanelPresenter.js'][708]++;
  return groupSelected;
});
  _$jscoverage['AddressBookPanelPresenter.js'][723]++;
  this.getContacts = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][724]++;
  return contacts;
});
  _$jscoverage['AddressBookPanelPresenter.js'][726]++;
  this.setContacts = (function (cont) {
  _$jscoverage['AddressBookPanelPresenter.js'][727]++;
  contacts = cont;
});
  _$jscoverage['AddressBookPanelPresenter.js'][729]++;
  this.getGroups = (function () {
  _$jscoverage['AddressBookPanelPresenter.js'][730]++;
  return groups;
});
  _$jscoverage['AddressBookPanelPresenter.js'][732]++;
  this.setGroups = (function (cont) {
  _$jscoverage['AddressBookPanelPresenter.js'][733]++;
  groups = cont;
});
}
