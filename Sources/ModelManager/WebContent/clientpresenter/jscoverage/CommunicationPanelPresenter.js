/* automatically generated by JSCoverage - do not edit */
try {
  if (typeof top === 'object' && top !== null && typeof top.opener === 'object' && top.opener !== null) {
    // this is a browser window that was opened from another window

    if (! top.opener._$jscoverage) {
      top.opener._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null) {
    // this is a browser window

    try {
      if (typeof top.opener === 'object' && top.opener !== null && top.opener._$jscoverage) {
        top._$jscoverage = top.opener._$jscoverage;
      }
    }
    catch (e) {}

    if (! top._$jscoverage) {
      top._$jscoverage = {};
    }
  }
}
catch (e) {}

try {
  if (typeof top === 'object' && top !== null && top._$jscoverage) {
    _$jscoverage = top._$jscoverage;
  }
}
catch (e) {}
if (typeof _$jscoverage !== 'object') {
  _$jscoverage = {};
}
if (! _$jscoverage['CommunicationPanelPresenter.js']) {
  _$jscoverage['CommunicationPanelPresenter.js'] = [];
  _$jscoverage['CommunicationPanelPresenter.js'][8] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][14] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][28] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][29] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][30] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][31] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][33] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][34] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][35] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][37] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][39] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][40] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][42] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][57] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][58] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][59] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][60] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][61] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][63] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][64] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][65] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][66] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][68] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][69] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][71] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][85] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][86] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][87] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][88] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][89] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][91] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][92] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][93] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][95] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][96] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][97] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][98] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][101] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][102] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][105] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][106] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][107] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][108] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][110] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][112] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][113] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][135] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][136] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][137] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][138] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][139] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][141] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][162] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][163] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][164] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][165] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][166] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][167] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][186] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][187] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][188] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][189] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][190] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][194] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][195] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][196] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][197] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][198] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][218] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][219] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][220] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][221] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][235] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][236] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][237] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][240] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][243] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][244] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][246] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][247] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][250] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][251] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][252] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][253] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][254] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][255] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][258] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][259] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][260] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][261] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][262] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][263] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][264] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][265] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][266] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][267] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][268] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][269] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][270] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][271] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][274] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][275] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][276] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][277] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][280] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][281] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][282] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][283] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][287] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][288] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][295] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][299] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][300] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][302] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][312] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][313] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][326] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][327] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][328] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][331] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][344] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][345] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][355] = 0;
  _$jscoverage['CommunicationPanelPresenter.js'][356] = 0;
}
_$jscoverage['CommunicationPanelPresenter.js'].source = ["<span class=\"c\">/**</span>","<span class=\"c\"> * Presenter incaricato di gestire il pannello delle comunicazioni, siano esse</span>","<span class=\"c\"> * di natura testuale oppure di natura audio o audio/video</span>","<span class=\"c\"> * </span>","<span class=\"c\"> * @author Elena Zecchinato</span>","<span class=\"c\"> * @author Diego Beraldin</span>","<span class=\"c\"> */</span>","<span class=\"k\">function</span> CommunicationPanelPresenter<span class=\"k\">()</span> <span class=\"k\">{</span>","\t<span class=\"c\">/***************************************************************************</span>","<span class=\"c\">\t * VARIABILI PRIVATE</span>","<span class=\"c\">\t **************************************************************************/</span>","\t<span class=\"c\">// array associativo di tutte le chat che ho aperte in un dato momento</span>","\t<span class=\"c\">// gli elementi memorizzati in questo array sono {HTMLDivElements}</span>","\t<span class=\"k\">var</span> chatElements <span class=\"k\">=</span> <span class=\"k\">new</span> Object<span class=\"k\">();</span>","","\t<span class=\"c\">/***************************************************************************</span>","<span class=\"c\">\t * METODI PRIVATI</span>","<span class=\"c\">\t **************************************************************************/</span>","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Crea la stringa di testo che deve comparire come titolo della tab che</span>","<span class=\"c\">\t * contiene la lista delle chat testuali attive in un determinato momento</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @see AddressBookPanelPresenter#addListItem()</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @returns {String} il testo che deve costituire il titolo del list item</span>","<span class=\"c\">\t * @author Diego Beraldin</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> createLabel<span class=\"k\">(</span>user<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> title <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>user<span class=\"k\">.</span>name <span class=\"k\">!=</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\ttitle <span class=\"k\">+=</span> user<span class=\"k\">.</span>name<span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>user<span class=\"k\">.</span>surname <span class=\"k\">!=</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>title <span class=\"k\">!=</span> <span class=\"s\">\"\"</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t\ttitle <span class=\"k\">+=</span> <span class=\"s\">\" \"</span><span class=\"k\">;</span>","\t\t\t<span class=\"k\">}</span>","\t\t\ttitle <span class=\"k\">+=</span> user<span class=\"k\">.</span>surname<span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>title <span class=\"k\">==</span> <span class=\"s\">\"\"</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\ttitle <span class=\"k\">+=</span> user<span class=\"k\">.</span>email<span class=\"k\">;</span>","\t\t<span class=\"k\">}</span>","\t\t<span class=\"k\">return</span> title<span class=\"k\">;</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Crea un elemento di lista adatto ad essere visualizzato dentro</span>","<span class=\"c\">\t * 'ulOpenchat' all'interno di questo presenter</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            user utente con cui &#195;&#168; avviata la chat</span>","<span class=\"c\">\t * @returns {HTMLLiElement} list item che contiene il nome del contatto con</span>","<span class=\"c\">\t *          cui &#195;&#168; attiva la comunicazione testuale e che, se cliccato,</span>","<span class=\"c\">\t *          determina la visualizzazione all'interno del divChat come</span>","<span class=\"c\">\t *          secondo figlio</span>","<span class=\"c\">\t * @author Diego Beraldin</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> createChatItem<span class=\"k\">(</span>user<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> item <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"li\"</span><span class=\"k\">);</span>","\t\titem<span class=\"k\">.</span>id <span class=\"k\">=</span> user<span class=\"k\">.</span>id<span class=\"k\">;</span>","\t\titem<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>document<span class=\"k\">.</span>createTextNode<span class=\"k\">(</span>createLabel<span class=\"k\">(</span>user<span class=\"k\">)));</span>","\t\t<span class=\"k\">var</span> closeChatButton <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"img\"</span><span class=\"k\">);</span>","\t\t<span class=\"c\">// FIXME add image src!</span>","\t\tcloseChatButton<span class=\"k\">.</span>src <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> self <span class=\"k\">=</span> <span class=\"k\">this</span><span class=\"k\">;</span>","\t\tcloseChatButton<span class=\"k\">.</span>onclick <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t\tself<span class=\"k\">.</span>removeChat<span class=\"k\">(</span>user<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t\titem<span class=\"k\">.</span>onclick <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t\tself<span class=\"k\">.</span>displayChat<span class=\"k\">(</span>user<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t\t<span class=\"k\">return</span> item<span class=\"k\">;</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Crea un HTMLDivElement che contiene la porzione di codice HTML che deve</span>","<span class=\"c\">\t * essere visualizzata nel momento in cui si fa click sul corrispondente</span>","<span class=\"c\">\t * list item della 'ulOpenChat'.</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            user utente con cui &#195;&#168; stata avviata la chat</span>","<span class=\"c\">\t * @returns {HTMLDivElement} elemento che contiene l'area di testo, il campo</span>","<span class=\"c\">\t *          di immissione testuale e il pulsante di invio del testo</span>","<span class=\"c\">\t * @author Diego Beraldin</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">function</span> createChatElement<span class=\"k\">(</span>user<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> element <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"div\"</span><span class=\"k\">);</span>","\t\telement<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"divContainerChat\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> form <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"form\"</span><span class=\"k\">);</span>","\t\tform<span class=\"k\">.</span>id <span class=\"k\">=</span> user<span class=\"k\">.</span>id<span class=\"k\">;</span>","\t\t<span class=\"c\">// crea l'area di testo</span>","\t\t<span class=\"k\">var</span> textArea <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"textarea\"</span><span class=\"k\">);</span>","\t\ttextArea<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"chatText\"</span><span class=\"k\">;</span>","\t\tform<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>textArea<span class=\"k\">);</span>","\t\t<span class=\"c\">// crea il campo per l'immissioen del testo</span>","\t\t<span class=\"k\">var</span> input <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"input\"</span><span class=\"k\">);</span>","\t\tinput<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"text\"</span><span class=\"k\">;</span>","\t\tinput<span class=\"k\">.</span>name <span class=\"k\">=</span> <span class=\"s\">\"text\"</span><span class=\"k\">;</span>","\t\tform<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>input<span class=\"k\">);</span>","","\t\t<span class=\"c\">// crea il pulsante</span>","\t\t<span class=\"k\">var</span> sendButton <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"button\"</span><span class=\"k\">);</span>","\t\tsendButton<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>document<span class=\"k\">.</span>createTextNode<span class=\"k\">(</span><span class=\"s\">\"Invia\"</span><span class=\"k\">));</span>","","\t\t<span class=\"c\">// aggancia la funzione di callback al pulsante</span>","\t\tsendButton<span class=\"k\">.</span>onclick <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">var</span> text <span class=\"k\">=</span> input<span class=\"k\">.</span>value<span class=\"k\">;</span>","\t\t\ttextArea<span class=\"k\">.</span>value <span class=\"k\">+=</span> <span class=\"k\">(</span>text <span class=\"k\">+</span> <span class=\"s\">\"</span><span class=\"t\">\\n</span><span class=\"s\">\"</span><span class=\"k\">);</span>","\t\t\tcommunicationcenter<span class=\"k\">.</span>send<span class=\"k\">(</span>user<span class=\"k\">,</span> text<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span><span class=\"k\">;</span>","\t\tform<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>sendButton<span class=\"k\">);</span>","","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>form<span class=\"k\">);</span>","\t\t<span class=\"k\">return</span> element<span class=\"k\">;</span>","\t<span class=\"k\">}</span>","","\t<span class=\"c\">/***************************************************************************</span>","<span class=\"c\">\t * METODI PUBBLICI</span>","<span class=\"c\">\t **************************************************************************/</span>","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Visualizza una determinata chat nel 'divContainerChat'</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * PRE: Esiste nel documento un &lt;div&gt; con id uguale a 'divChat' che contiene</span>","<span class=\"c\">\t * come figlio un altro &lt;div&gt; con id uguale a 'divContainerChat'. Inoltre,</span>","<span class=\"c\">\t * chatElements contiene un elemento chat indicizzato con l'id dell'utente</span>","<span class=\"c\">\t * passato come parametro alla funzione</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * POST: il &lt;div&gt; interno ('divContainerChat') &#195;&#168; stato rimpiazzato da un</span>","<span class=\"c\">\t * nuovo elemento che corrisponde alla chat con l'utente passato come</span>","<span class=\"c\">\t * parametro</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            user utente con cui &#195;&#168; attiva la chat che si vuole visualizzare</span>","<span class=\"c\">\t * @author Diego Beraldin</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>displayChat <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>user<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> divChat <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"divChat\"</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> container <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"divContainerChat\"</span><span class=\"k\">);</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>divChat <span class=\"k\">!=</span> <span class=\"k\">null</span> <span class=\"k\">&amp;&amp;</span> container <span class=\"k\">!=</span> <span class=\"k\">null</span><span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\tdivChat<span class=\"k\">.</span>removeChild<span class=\"k\">(</span>container<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span>","\t\tdivChat<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>chatElements<span class=\"k\">[</span>user<span class=\"k\">.</span>id<span class=\"k\">]);</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Aggiunge una chat fra quelle controllate da questo presenter, sia nella</span>","<span class=\"c\">\t * lista degli elementi che nel liste item contenuto nella lista di tutte le</span>","<span class=\"c\">\t * chat aperte</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * PRE: il presenter ha la propriet&#195;&#160; chatElements e la vista ha una lista</span>","<span class=\"c\">\t * che ha come id 'ulOpenChat'</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * POST: a chatElements &#195;&#168; stato aggiunto un nuovo elemento che contiene i</span>","<span class=\"c\">\t * dati relativi alla nuova chat testuale, e alla lista &#195;&#168; stato attiunto un</span>","<span class=\"c\">\t * list item che contiene il nome del contatto con cui &#195;&#168; stata instaurata la</span>","<span class=\"c\">\t * chat testuale.</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            user utente con cui &#195;&#168; stata avviata la chat che deve essere</span>","<span class=\"c\">\t *            aggiunta fra quelle controllate da questo presenter</span>","<span class=\"c\">\t * @author Diego Beraldin</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>addChat <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>user<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> element <span class=\"k\">=</span> createChatElement<span class=\"k\">(</span>user<span class=\"k\">);</span>","\t\tchatElements<span class=\"k\">[</span>user<span class=\"k\">.</span>id<span class=\"k\">]</span> <span class=\"k\">=</span> element<span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> item <span class=\"k\">=</span> createChatItem<span class=\"k\">(</span>user<span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> ulOpenChat <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"ulOpenChat\"</span><span class=\"k\">);</span>","\t\tulOpenChat<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>item<span class=\"k\">);</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Rimuove una chat dovunque sia riferita all'interno di questo</span>","<span class=\"c\">\t * CommunicationPanelPresenter (nella lista e negli elementi)</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * PRE: esiste nella lista 'ulChat' un</span>","<span class=\"c\">\t * &lt;li&gt; che riferisce la chat passata come parametro ed esiste in</span>","<span class=\"c\">\t * chatElements un &lt;div&gt; che contiene il testo di quella chat</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * POST: sono stati rimossi sua l'elemento &lt;div&gt; da chatElements sia il</span>","<span class=\"c\">\t * &lt;li&gt; associato alla chat dalla lista delle chiamate</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            user utente con cui &#195;&#168; avviata la chat da rimuovere</span>","<span class=\"c\">\t * @returns {Boolean}</span>","<span class=\"c\">\t * @author Diego Beraldin</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>removeChat <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>user<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">delete</span> chatElements<span class=\"k\">[</span>user<span class=\"k\">.</span>id<span class=\"k\">];</span>","\t\t<span class=\"k\">var</span> ulOpenChat <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"ulOpenChat\"</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> liChat <span class=\"k\">=</span> ulOpenChat<span class=\"k\">.</span>getElementById<span class=\"k\">(</span>user<span class=\"k\">.</span>id<span class=\"k\">);</span>","\t\tulOpenChat<span class=\"k\">.</span>removeChild<span class=\"k\">(</span>liChat<span class=\"k\">);</span>","","\t\t<span class=\"c\">// testa se era visualizzata proprio quella chat e in tal caso la</span>","\t\t<span class=\"c\">// rimuove dalla vista</span>","\t\t<span class=\"k\">var</span> divContainerChat <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"divContainerChat\"</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> form <span class=\"k\">=</span> divContainerChat<span class=\"k\">.</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">];</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>form<span class=\"k\">.</span>id <span class=\"k\">==</span> user<span class=\"k\">.</span>id<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\t<span class=\"k\">var</span> divChat <span class=\"k\">=</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"divChat\"</span><span class=\"k\">);</span>","\t\t\tdivChat<span class=\"k\">.</span>removeChild<span class=\"k\">(</span>divContainerChat<span class=\"k\">);</span>","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Aggiunge una stringa all'interno dell'area di testo che &#195;&#168; associata alla</span>","<span class=\"c\">\t * chat con l'utente passato come parametro</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * PRE: si assume che gi&#195;&#160; esista in chatElements un oggetto HTMLDivElement</span>","<span class=\"c\">\t * indicizzato con l'id dell'utente passato come parametro</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * POST: al ritorno della funzione, la textArea contenuta in questo &lt;div&gt;</span>","<span class=\"c\">\t * contiene il nuovo testo passato come parametro</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @param {Object}</span>","<span class=\"c\">\t *            utente con cui &#195;&#168; avviata la chat</span>","<span class=\"c\">\t * @param {String}</span>","<span class=\"c\">\t *            text testo da appendere al termine della textarea</span>","<span class=\"c\">\t * @author Diego Beraldin</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>appendToChat <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>user<span class=\"k\">,</span> text<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> divContainerChat <span class=\"k\">=</span> chatElements<span class=\"k\">[</span>user<span class=\"k\">.</span>id<span class=\"k\">];</span>","\t\t<span class=\"k\">var</span> textArea <span class=\"k\">=</span> divContainerChat<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"chatText\"</span><span class=\"k\">);</span>","\t\ttextArea<span class=\"k\">.</span>value <span class=\"k\">+=</span> <span class=\"k\">(</span><span class=\"s\">\"io:\"</span> <span class=\"k\">+</span> text <span class=\"k\">+</span> <span class=\"s\">\"</span><span class=\"t\">\\n</span><span class=\"s\">\"</span><span class=\"k\">);</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Inizializza il pannello costruendone i widget grafici interni e lo</span>","<span class=\"c\">\t * restituisce in modo che possa essere inserito all'interno del pannello</span>","<span class=\"c\">\t * principale</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * POST: l'elemento &lt;div&gt; restituito ha la struttura del CommunicationPanel</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @returns {HTMLDivElement} il 'CommunicationPanel'</span>","<span class=\"c\">\t * @author Elena Zecchinato</span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>createPanel <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">var</span> element <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","\t\telement<span class=\"k\">.</span>setAttribute<span class=\"k\">(</span><span class=\"s\">\"id\"</span><span class=\"k\">,</span> <span class=\"s\">\"CommunicationPanel\"</span><span class=\"k\">);</span>","","\t\t<span class=\"c\">// azzero il div</span>","\t\telement<span class=\"k\">.</span>innerHTML <span class=\"k\">=</span> <span class=\"s\">\"\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// creo div contenente la chiamata vera e propria</span>","\t\t<span class=\"k\">var</span> divCall <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","\t\tdivCall<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"divCall\"</span><span class=\"k\">;</span>","\t\t<span class=\"c\">// creo div contenente le chat testuali</span>","\t\t<span class=\"k\">var</span> divChat <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'div'</span><span class=\"k\">);</span>","\t\tdivChat<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"divChat\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// creo gli elementi video per la videochat</span>","\t\t<span class=\"k\">var</span> myVideo <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'video'</span><span class=\"k\">);</span>","\t\tmyVideo<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"myVideo\"</span><span class=\"k\">;</span>","\t\tmyVideo<span class=\"k\">.</span>setAttribute<span class=\"k\">(</span><span class=\"s\">\"autoplay\"</span><span class=\"k\">,</span> <span class=\"s\">\"autoplay\"</span><span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> otherVideo <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'video'</span><span class=\"k\">);</span>","\t\totherVideo<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"otherVideo\"</span><span class=\"k\">;</span>","\t\totherVideo<span class=\"k\">.</span>setAttribute<span class=\"k\">(</span><span class=\"s\">\"autoplay\"</span><span class=\"k\">,</span> <span class=\"s\">\"autoplay\"</span><span class=\"k\">);</span>","","\t\t<span class=\"c\">// creo div per visualizzare le statistiche della chiamata</span>","\t\tstatDiv <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"div\"</span><span class=\"k\">);</span>","\t\tstatDiv<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"statDiv\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> statSpan <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"span\"</span><span class=\"k\">);</span>","\t\tstatSpan<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"statSpan\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> statReceved <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"span\"</span><span class=\"k\">);</span>","\t\tstatReceved<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"statReceved\"</span><span class=\"k\">;</span>","\t\t<span class=\"k\">var</span> statSend <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"span\"</span><span class=\"k\">);</span>","\t\tstatSend<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"statSend\"</span><span class=\"k\">;</span>","\t\tstatSpan<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>statReceved<span class=\"k\">);</span>","\t\tstatSpan<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>statSend<span class=\"k\">);</span>","\t\t<span class=\"k\">var</span> timerSpan <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">\"span\"</span><span class=\"k\">);</span>","\t\ttimerSpan<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"timerSpan\"</span><span class=\"k\">;</span>","\t\tstatDiv<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>statSpan<span class=\"k\">);</span>","\t\tstatDiv<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>timerSpan<span class=\"k\">);</span>","","\t\t<span class=\"c\">// creo i bottoni per per la gestione della chiamata</span>","\t\t<span class=\"k\">var</span> closeButton <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'button'</span><span class=\"k\">);</span>","\t\tcloseButton<span class=\"k\">.</span>type <span class=\"k\">=</span> <span class=\"s\">\"button\"</span><span class=\"k\">;</span>","\t\tcloseButton<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"closeButton\"</span><span class=\"k\">;</span>","\t\tcloseButton<span class=\"k\">.</span>onclick <span class=\"k\">=</span> communicationcenter<span class=\"k\">.</span>endCall<span class=\"k\">;</span>","","\t\t<span class=\"c\">// appendo i child al divCall</span>","\t\tdivCall<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>myVideo<span class=\"k\">);</span>","\t\tdivCall<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>otherVideo<span class=\"k\">);</span>","\t\tdivCall<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>statDiv<span class=\"k\">);</span>","\t\tdivCall<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>closeButton<span class=\"k\">);</span>","","\t\t<span class=\"c\">// creo gli elementi per la chat testuale</span>","\t\t<span class=\"c\">// creo l'&lt;ul&gt; per le schede delle chat aperte</span>","\t\t<span class=\"k\">var</span> ulOpenChat <span class=\"k\">=</span> document<span class=\"k\">.</span>createElement<span class=\"k\">(</span><span class=\"s\">'ul'</span><span class=\"k\">);</span>","\t\tulOpenChat<span class=\"k\">.</span>id <span class=\"k\">=</span> <span class=\"s\">\"ulOpenChat\"</span><span class=\"k\">;</span>","","\t\t<span class=\"c\">// creo il div per la visualizzazione della chat selezionata.</span>","\t\t<span class=\"c\">// var divContainerChat = document.createElement('div');</span>","\t\t<span class=\"c\">// divContainerChat.id = \"divContainerChat\";</span>","","\t\t<span class=\"c\">// appendo la lista al &lt;div&gt; della chat</span>","\t\tdivChat<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>ulOpenChat<span class=\"k\">);</span>","\t\t<span class=\"c\">// divChat.appendChild(divContainerChat);</span>","","\t\t<span class=\"c\">// apendo il sottoalbero al DOM</span>","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>divCall<span class=\"k\">);</span>","\t\telement<span class=\"k\">.</span>appendChild<span class=\"k\">(</span>divChat<span class=\"k\">);</span>","","\t\t<span class=\"k\">return</span> element<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Funzione per scrivere sulla label che visualizza il tempo della chiamata</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {String}</span>","<span class=\"c\">\t *            text testo da visualizzare</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>updateTimer <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>text<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\tstatDiv<span class=\"k\">.</span>childNodes<span class=\"k\">[</span><span class=\"s\">1</span><span class=\"k\">].</span>textContent <span class=\"k\">=</span> text<span class=\"k\">;</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Funzione per scrivere sulla label che visualizza il tempo della chiamata</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @param {String}</span>","<span class=\"c\">\t *            text testo da visualizzare</span>","<span class=\"c\">\t * @param {Boolean}</span>","<span class=\"c\">\t *            isRecevedData rappresenta un flag booleano che determina se i</span>","<span class=\"c\">\t *            dati sono ricenuti o inviati</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>updateStarts <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">(</span>text<span class=\"k\">,</span> isRecevedData<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">if</span> <span class=\"k\">(</span>isRecevedData<span class=\"k\">)</span> <span class=\"k\">{</span>","\t\t\tstatDiv<span class=\"k\">.</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>textContent <span class=\"k\">=</span> <span class=\"s\">\"Dati ricevuti: \"</span>","\t\t\t\t\t<span class=\"k\">+</span> text<span class=\"k\">;</span>","\t\t<span class=\"k\">}</span> <span class=\"k\">else</span> <span class=\"k\">{</span>","\t\t\tstatDiv<span class=\"k\">.</span>childNodes<span class=\"k\">[</span><span class=\"s\">0</span><span class=\"k\">].</span>childNodes<span class=\"k\">[</span><span class=\"s\">1</span><span class=\"k\">].</span>textContent <span class=\"k\">=</span> <span class=\"s\">\"Dati inviati: \"</span>","\t\t\t\t\t<span class=\"k\">+</span> text<span class=\"k\">;</span>","","\t\t<span class=\"k\">}</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Funzione che restituisce l'elemento video myVideo dove viene visualizzato</span>","<span class=\"c\">\t * lo steaming video estratto dalla propria webcam</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @return {HTMLVideoElement} elemento video</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>getMyVideo <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">return</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"myVideo\"</span><span class=\"k\">);</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","","\t<span class=\"c\">/**</span>","<span class=\"c\">\t * Funzione che restituisce l'elemento video otherVideo dove viene</span>","<span class=\"c\">\t * visualizzato lo steaming video della persona chiamata</span>","<span class=\"c\">\t * </span>","<span class=\"c\">\t * @author Riccardo Tresoldi</span>","<span class=\"c\">\t * @return {HTMLVideoElement} elemento video</span>","<span class=\"c\">\t */</span>","\t<span class=\"k\">this</span><span class=\"k\">.</span>getOtherVideo <span class=\"k\">=</span> <span class=\"k\">function</span><span class=\"k\">()</span> <span class=\"k\">{</span>","\t\t<span class=\"k\">return</span> document<span class=\"k\">.</span>getElementById<span class=\"k\">(</span><span class=\"s\">\"otherVideo\"</span><span class=\"k\">);</span>","\t<span class=\"k\">}</span><span class=\"k\">;</span>","<span class=\"k\">}</span>"];
_$jscoverage['CommunicationPanelPresenter.js'][8]++;
function CommunicationPanelPresenter() {
  _$jscoverage['CommunicationPanelPresenter.js'][14]++;
  var chatElements = new Object();
  _$jscoverage['CommunicationPanelPresenter.js'][28]++;
  function createLabel(user) {
    _$jscoverage['CommunicationPanelPresenter.js'][29]++;
    var title = "";
    _$jscoverage['CommunicationPanelPresenter.js'][30]++;
    if ((user.name != null)) {
      _$jscoverage['CommunicationPanelPresenter.js'][31]++;
      title += user.name;
    }
    _$jscoverage['CommunicationPanelPresenter.js'][33]++;
    if ((user.surname != null)) {
      _$jscoverage['CommunicationPanelPresenter.js'][34]++;
      if ((title != "")) {
        _$jscoverage['CommunicationPanelPresenter.js'][35]++;
        title += " ";
      }
      _$jscoverage['CommunicationPanelPresenter.js'][37]++;
      title += user.surname;
    }
    _$jscoverage['CommunicationPanelPresenter.js'][39]++;
    if ((title == "")) {
      _$jscoverage['CommunicationPanelPresenter.js'][40]++;
      title += user.email;
    }
    _$jscoverage['CommunicationPanelPresenter.js'][42]++;
    return title;
}
  _$jscoverage['CommunicationPanelPresenter.js'][57]++;
  function createChatItem(user) {
    _$jscoverage['CommunicationPanelPresenter.js'][58]++;
    var item = document.createElement("li");
    _$jscoverage['CommunicationPanelPresenter.js'][59]++;
    item.id = user.id;
    _$jscoverage['CommunicationPanelPresenter.js'][60]++;
    item.appendChild(document.createTextNode(createLabel(user)));
    _$jscoverage['CommunicationPanelPresenter.js'][61]++;
    var closeChatButton = document.createElement("img");
    _$jscoverage['CommunicationPanelPresenter.js'][63]++;
    closeChatButton.src = "";
    _$jscoverage['CommunicationPanelPresenter.js'][64]++;
    var self = this;
    _$jscoverage['CommunicationPanelPresenter.js'][65]++;
    closeChatButton.onclick = (function () {
  _$jscoverage['CommunicationPanelPresenter.js'][66]++;
  self.removeChat(user);
});
    _$jscoverage['CommunicationPanelPresenter.js'][68]++;
    item.onclick = (function () {
  _$jscoverage['CommunicationPanelPresenter.js'][69]++;
  self.displayChat(user);
});
    _$jscoverage['CommunicationPanelPresenter.js'][71]++;
    return item;
}
  _$jscoverage['CommunicationPanelPresenter.js'][85]++;
  function createChatElement(user) {
    _$jscoverage['CommunicationPanelPresenter.js'][86]++;
    var element = document.createElement("div");
    _$jscoverage['CommunicationPanelPresenter.js'][87]++;
    element.id = "divContainerChat";
    _$jscoverage['CommunicationPanelPresenter.js'][88]++;
    var form = document.createElement("form");
    _$jscoverage['CommunicationPanelPresenter.js'][89]++;
    form.id = user.id;
    _$jscoverage['CommunicationPanelPresenter.js'][91]++;
    var textArea = document.createElement("textarea");
    _$jscoverage['CommunicationPanelPresenter.js'][92]++;
    textArea.id = "chatText";
    _$jscoverage['CommunicationPanelPresenter.js'][93]++;
    form.appendChild(textArea);
    _$jscoverage['CommunicationPanelPresenter.js'][95]++;
    var input = document.createElement("input");
    _$jscoverage['CommunicationPanelPresenter.js'][96]++;
    input.id = "text";
    _$jscoverage['CommunicationPanelPresenter.js'][97]++;
    input.name = "text";
    _$jscoverage['CommunicationPanelPresenter.js'][98]++;
    form.appendChild(input);
    _$jscoverage['CommunicationPanelPresenter.js'][101]++;
    var sendButton = document.createElement("button");
    _$jscoverage['CommunicationPanelPresenter.js'][102]++;
    sendButton.appendChild(document.createTextNode("Invia"));
    _$jscoverage['CommunicationPanelPresenter.js'][105]++;
    sendButton.onclick = (function () {
  _$jscoverage['CommunicationPanelPresenter.js'][106]++;
  var text = input.value;
  _$jscoverage['CommunicationPanelPresenter.js'][107]++;
  textArea.value += (text + "\n");
  _$jscoverage['CommunicationPanelPresenter.js'][108]++;
  communicationcenter.send(user, text);
});
    _$jscoverage['CommunicationPanelPresenter.js'][110]++;
    form.appendChild(sendButton);
    _$jscoverage['CommunicationPanelPresenter.js'][112]++;
    element.appendChild(form);
    _$jscoverage['CommunicationPanelPresenter.js'][113]++;
    return element;
}
  _$jscoverage['CommunicationPanelPresenter.js'][135]++;
  this.displayChat = (function (user) {
  _$jscoverage['CommunicationPanelPresenter.js'][136]++;
  var divChat = document.getElementById("divChat");
  _$jscoverage['CommunicationPanelPresenter.js'][137]++;
  var container = document.getElementById("divContainerChat");
  _$jscoverage['CommunicationPanelPresenter.js'][138]++;
  if (((divChat != null) && (container != null))) {
    _$jscoverage['CommunicationPanelPresenter.js'][139]++;
    divChat.removeChild(container);
  }
  _$jscoverage['CommunicationPanelPresenter.js'][141]++;
  divChat.appendChild(chatElements[user.id]);
});
  _$jscoverage['CommunicationPanelPresenter.js'][162]++;
  this.addChat = (function (user) {
  _$jscoverage['CommunicationPanelPresenter.js'][163]++;
  var element = createChatElement(user);
  _$jscoverage['CommunicationPanelPresenter.js'][164]++;
  chatElements[user.id] = element;
  _$jscoverage['CommunicationPanelPresenter.js'][165]++;
  var item = createChatItem(user);
  _$jscoverage['CommunicationPanelPresenter.js'][166]++;
  var ulOpenChat = document.getElementById("ulOpenChat");
  _$jscoverage['CommunicationPanelPresenter.js'][167]++;
  ulOpenChat.appendChild(item);
});
  _$jscoverage['CommunicationPanelPresenter.js'][186]++;
  this.removeChat = (function (user) {
  _$jscoverage['CommunicationPanelPresenter.js'][187]++;
  (delete chatElements[user.id]);
  _$jscoverage['CommunicationPanelPresenter.js'][188]++;
  var ulOpenChat = document.getElementById("ulOpenChat");
  _$jscoverage['CommunicationPanelPresenter.js'][189]++;
  var liChat = ulOpenChat.getElementById(user.id);
  _$jscoverage['CommunicationPanelPresenter.js'][190]++;
  ulOpenChat.removeChild(liChat);
  _$jscoverage['CommunicationPanelPresenter.js'][194]++;
  var divContainerChat = document.getElementById("divContainerChat");
  _$jscoverage['CommunicationPanelPresenter.js'][195]++;
  var form = divContainerChat.childNodes[0];
  _$jscoverage['CommunicationPanelPresenter.js'][196]++;
  if ((form.id == user.id)) {
    _$jscoverage['CommunicationPanelPresenter.js'][197]++;
    var divChat = document.getElementById("divChat");
    _$jscoverage['CommunicationPanelPresenter.js'][198]++;
    divChat.removeChild(divContainerChat);
  }
});
  _$jscoverage['CommunicationPanelPresenter.js'][218]++;
  this.appendToChat = (function (user, text) {
  _$jscoverage['CommunicationPanelPresenter.js'][219]++;
  var divContainerChat = chatElements[user.id];
  _$jscoverage['CommunicationPanelPresenter.js'][220]++;
  var textArea = divContainerChat.getElementById("chatText");
  _$jscoverage['CommunicationPanelPresenter.js'][221]++;
  textArea.value += ("io:" + text + "\n");
});
  _$jscoverage['CommunicationPanelPresenter.js'][235]++;
  this.createPanel = (function () {
  _$jscoverage['CommunicationPanelPresenter.js'][236]++;
  var element = document.createElement("div");
  _$jscoverage['CommunicationPanelPresenter.js'][237]++;
  element.setAttribute("id", "CommunicationPanel");
  _$jscoverage['CommunicationPanelPresenter.js'][240]++;
  element.innerHTML = "";
  _$jscoverage['CommunicationPanelPresenter.js'][243]++;
  var divCall = document.createElement("div");
  _$jscoverage['CommunicationPanelPresenter.js'][244]++;
  divCall.id = "divCall";
  _$jscoverage['CommunicationPanelPresenter.js'][246]++;
  var divChat = document.createElement("div");
  _$jscoverage['CommunicationPanelPresenter.js'][247]++;
  divChat.id = "divChat";
  _$jscoverage['CommunicationPanelPresenter.js'][250]++;
  var myVideo = document.createElement("video");
  _$jscoverage['CommunicationPanelPresenter.js'][251]++;
  myVideo.id = "myVideo";
  _$jscoverage['CommunicationPanelPresenter.js'][252]++;
  myVideo.setAttribute("autoplay", "autoplay");
  _$jscoverage['CommunicationPanelPresenter.js'][253]++;
  var otherVideo = document.createElement("video");
  _$jscoverage['CommunicationPanelPresenter.js'][254]++;
  otherVideo.id = "otherVideo";
  _$jscoverage['CommunicationPanelPresenter.js'][255]++;
  otherVideo.setAttribute("autoplay", "autoplay");
  _$jscoverage['CommunicationPanelPresenter.js'][258]++;
  statDiv = document.createElement("div");
  _$jscoverage['CommunicationPanelPresenter.js'][259]++;
  statDiv.id = "statDiv";
  _$jscoverage['CommunicationPanelPresenter.js'][260]++;
  var statSpan = document.createElement("span");
  _$jscoverage['CommunicationPanelPresenter.js'][261]++;
  statSpan.id = "statSpan";
  _$jscoverage['CommunicationPanelPresenter.js'][262]++;
  var statReceved = document.createElement("span");
  _$jscoverage['CommunicationPanelPresenter.js'][263]++;
  statReceved.id = "statReceved";
  _$jscoverage['CommunicationPanelPresenter.js'][264]++;
  var statSend = document.createElement("span");
  _$jscoverage['CommunicationPanelPresenter.js'][265]++;
  statSend.id = "statSend";
  _$jscoverage['CommunicationPanelPresenter.js'][266]++;
  statSpan.appendChild(statReceved);
  _$jscoverage['CommunicationPanelPresenter.js'][267]++;
  statSpan.appendChild(statSend);
  _$jscoverage['CommunicationPanelPresenter.js'][268]++;
  var timerSpan = document.createElement("span");
  _$jscoverage['CommunicationPanelPresenter.js'][269]++;
  timerSpan.id = "timerSpan";
  _$jscoverage['CommunicationPanelPresenter.js'][270]++;
  statDiv.appendChild(statSpan);
  _$jscoverage['CommunicationPanelPresenter.js'][271]++;
  statDiv.appendChild(timerSpan);
  _$jscoverage['CommunicationPanelPresenter.js'][274]++;
  var closeButton = document.createElement("button");
  _$jscoverage['CommunicationPanelPresenter.js'][275]++;
  closeButton.type = "button";
  _$jscoverage['CommunicationPanelPresenter.js'][276]++;
  closeButton.id = "closeButton";
  _$jscoverage['CommunicationPanelPresenter.js'][277]++;
  closeButton.onclick = communicationcenter.endCall;
  _$jscoverage['CommunicationPanelPresenter.js'][280]++;
  divCall.appendChild(myVideo);
  _$jscoverage['CommunicationPanelPresenter.js'][281]++;
  divCall.appendChild(otherVideo);
  _$jscoverage['CommunicationPanelPresenter.js'][282]++;
  divCall.appendChild(statDiv);
  _$jscoverage['CommunicationPanelPresenter.js'][283]++;
  divCall.appendChild(closeButton);
  _$jscoverage['CommunicationPanelPresenter.js'][287]++;
  var ulOpenChat = document.createElement("ul");
  _$jscoverage['CommunicationPanelPresenter.js'][288]++;
  ulOpenChat.id = "ulOpenChat";
  _$jscoverage['CommunicationPanelPresenter.js'][295]++;
  divChat.appendChild(ulOpenChat);
  _$jscoverage['CommunicationPanelPresenter.js'][299]++;
  element.appendChild(divCall);
  _$jscoverage['CommunicationPanelPresenter.js'][300]++;
  element.appendChild(divChat);
  _$jscoverage['CommunicationPanelPresenter.js'][302]++;
  return element;
});
  _$jscoverage['CommunicationPanelPresenter.js'][312]++;
  this.updateTimer = (function (text) {
  _$jscoverage['CommunicationPanelPresenter.js'][313]++;
  statDiv.childNodes[1].textContent = text;
});
  _$jscoverage['CommunicationPanelPresenter.js'][326]++;
  this.updateStarts = (function (text, isRecevedData) {
  _$jscoverage['CommunicationPanelPresenter.js'][327]++;
  if (isRecevedData) {
    _$jscoverage['CommunicationPanelPresenter.js'][328]++;
    statDiv.childNodes[0].childNodes[0].textContent = ("Dati ricevuti: " + text);
  }
  else {
    _$jscoverage['CommunicationPanelPresenter.js'][331]++;
    statDiv.childNodes[0].childNodes[1].textContent = ("Dati inviati: " + text);
  }
});
  _$jscoverage['CommunicationPanelPresenter.js'][344]++;
  this.getMyVideo = (function () {
  _$jscoverage['CommunicationPanelPresenter.js'][345]++;
  return document.getElementById("myVideo");
});
  _$jscoverage['CommunicationPanelPresenter.js'][355]++;
  this.getOtherVideo = (function () {
  _$jscoverage['CommunicationPanelPresenter.js'][356]++;
  return document.getElementById("otherVideo");
});
}
