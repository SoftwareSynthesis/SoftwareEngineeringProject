% **************************************************
% Macro specifiche per il documento corrente
% **************************************************
% Nome
\newcommand{\docName}{Specifica tecnica}
% Nome file
\newcommand{\docFileName}{specifica\_tecnica.2.0.pdf}
% Versione
\newcommand{\docVers}{2.0}
% Data creazione
\newcommand{\creationDate}{2013-01-23}
% Data ultima modifica
\newcommand{\modificationDate}{2013-01-30}
% Stato in {Approvato, Non approvato}
\newcommand{\docState}{Approvato}
% Uso in {Interno, Esterno}
\newcommand{\docUsage}{Esterno}
% Destinatari da specificare come nome1\\ &nome2\\ ecc.
\newcommand{\docDistributionList}{Prof. Tullio Vardanega\\&Prof. Riccardo Cardin\\&Dott. Gregorio Piccoli\\&Team SoftwareSynthesis}
% Redattori da specificare come nome1\\ &nome2\\ ecc.
\newcommand{\docAuthors}{Diego Beraldin\\&Elena Zecchinato\\&Marco Schivo}
% Approvato da
\newcommand{\approvedBy}{Riccardo Tresoldi}
% Verificatori
\newcommand{\verifiedBy}{Andrea Meneghinello\\&Stefano Farronato}
% Perscorso (relativo o assoluto) che punta alla directory contenente shared/
% come sua sottodirectory (per comodità chiamiamola 'doc root').
\newcommand{\docRoot}{..}
% definire se si vuole l'indice delle tabelle
\def\INDICETABELLE{false}
% definire se si vuole l'indice delle figure
\def\INDICEFIGURE{true}

% importa il preambolo condiviso da tutti i documenti
\input{\docRoot/shared/preamble.tex}

% Fine del preambolo e inizio del documento
\begin{document}

% Inclusione della prima pagina
\input{\docRoot/shared/firstpage.tex}

%------------------------ RUOLI PA --------------------------
% FASE 1:
% Progettisti: TRES, STEFANO, SCHIVO;
% FASE 2:
% Progettisti: DIEGO, ELENA, RIZZI
%
% Verificatore: MENE
% Responsabile finale: TRES
%------------------------------------------------------------

%------------------------ RUOLI PDC -------------------------
% FASE 1:
% Progettisti: STEFANO, RIZZI, SCHIVO, ELENA
%
% Verificatore: DIEGO
% Responsabile finale: RIZZI
%------------------------------------------------------------

% Storico delle modifiche
\section*{Storia delle modifiche}
\begin{center}
\begin{longtable}{lp{.32\textwidth}lll}
\toprule
Versione & Descrizione intervento & Membro & Ruolo & Data\\
\midrule
1.4 & Aggiornamento vantaggi del framework \inglese{Hibernate} & Andrea Meneghinello & Progettista & 2013-02-11\\
1.3 & Correzione del modello dei dati & Andrea Meneghinello & Progettista & 2013-02-11\\
1.2 & Aggiunta descrizione dei diagrammi di attività e correzione degli stessi & Stefano Farronato & Progettista & 2012-02-09\\
1.1 & Modifica architettura del database & Elena Zecchinato & Progettista & 2013-02-08\\

1.0 & Approvazione documento & Riccardo Tresoldi & Responsabile & 2013-01-30\\
0.19 & Correzione errori ortografici e di forma presenti nel documento in base alle segnalazioni del verificatore&Marco Schivo & Progettista & 2013-01-29\\
0.18 & Correzione diagrammi presenti nel documento in base alle segnalazioni del verificatore&Elena Zecchinato & Progettista & 2013-01-29\\
0.17 & Verifica lessico ortografica del documento & Andrea Meneghinello & Verificatore & 2013-01-28\\
0.16 & Verifica correttezza e corrispondenza dei diagrammi presenti nel documento & Stefano Farronato & Verificatore & 2013-01-27\\
0.15 & Inserimento tabelle di tracciamento prodotte nel capitolo 12&Diego Beraldin & Progettista & 2013-01-28\\
0.14 & Inserimento diagrammi delle attività e dei package prodotti nel capitolo 11&Diego Beraldin & Progettista & 2013-01-28\\
0.13 & Inserimento diagrammi delle classi nel capitolo 6, 7, 8, 9&Marco Schivo & Progettista & 2013-01-28\\
0.12 & Inserimento diagrammi relativi ai design pattern evidenziati&Marco Schivo & Progettista & 2013-01-28\\
0.11 & Inizio stesura capitolo relativo alla descrizione delle classi&Diego Beraldin & Progettista & 2013-01-27\\
0.10 & Stesura della sezione relativa all'architettura \texttt{mytalk.clientview} stilando i componenti evidenziati&Elena Zecchinato & Progettista & 2013-01-27\\
0.9 & Stesura della sezione relativa all'architettura \texttt{mytalk.clientpresenter} stilando i componenti evidenziati&Marco Schivo & Progettista & 2013-01-27\\
0.8 & Stesura della sezione relativa all'architettura \texttt{mytalk.server} stilando i componenti evidenziati&Marco Schivo & Progettista & 2013-01-26\\
0.7 & Stesura della sezione relativa alla progettazione logica &Diego Beraldin  & Progettista & 2013-01-26\\
0.6 & Completata la sezione relativa alla progettazione concettuale &Elena Zecchinato & Progettista & 2013-01-25\\
0.5 & Inizio stesura della sezione relativa alla progettazione concettuale con classi evidenziate in fase di progettazione &Elena Zecchinato& Progettista & 2013-01-24\\
0.4 & Descrizione dei design pattern evidenziati nella fase di progettazione. &Diego Beraldin & Progettista & 2013-01-24\\
0.3 & Aggiunto capitolo relativo agli strumenti utilizzati.& Marco Schivo & Progettista & 2013-01-23\\
0.2 & Stesura dell'introduzione ai design pattern. Stesura dell'introduzione ai tracciamenti. &Elena Zecchinato & Progettista & 2013-01-23\\
0.1 & Creazione del documento e stesura della sezione ``Introduzione''. &Diego Beraldin & Progettista & 2013-01-23\\
\bottomrule
\end{longtable}
\end{center}
\clearpage

% inclusione dell'indice
\input{\docRoot/shared/toc.tex}

% Alcuni aggiustamenti per le pagine
\pagenumbering{arabic}
\setcounter{page}{1}
\pagestyle{normal}

% Qui ha inizio il documento vero e proprio...
\clearpage

\begin{abstract}
Il presente documento illustra l'architettura del sistema ad alto livello e comprende una suddivisione di quest'ultima in sotto-architetture logiche, l'enumerazione e la descrizione dei componenti funzionali che le costituiscono nonché la decomposizione dei componenti nei package e, in ultima istanza, nelle classi. Vengono presentati inoltre gli elementi di riuso architetturale (\inglese{pattern}) utilizzati, motivandone la scelta. Infine, il documento è corredato da sei tabelle riepilogative inerenti al tracciamento componenti-requisiti, componenti-\underline{\inglese{design pattern}} e componenti-classi.
\end{abstract}
\clearpage

\section{Introduzione}
\subsection{Scopo del prodotto}
\purpose

\subsection{Scopo del documento}
Il presente documento è stato redatto al fine di produrre le specifiche sulla progettazione ad alto livello, del prodotto \caName. A tal fine il documento presenterà:
\begin{itemize}
    \item una descrizione degli strumenti e dei \underline{\inglese{framework}} su cui si basa l'architettura;
	\item un elenco con le specifiche dei \inglese{design pattern} utilizzati;
	\item l'architettura di alto livello del sistema;
	\item una descrizione dettagliata dei componenti rilevati in fase di progettazione indicando relativamente a ciascuno di essi il tipo, la funzione e l'obiettivo;
	\item i diagrammi UML per definire i flussi principali di controllo dell'applicativo;
	\item il tracciamento di requisiti e componenti;
	\item il tracciamento di componenti e \inglese{design pattern};
	\item il tracciamento di classi e componenti.
\end{itemize}

\subsection{Glossario}
\glossaryIntro

\clearpage
\section{Riferimenti}

\subsection{Normativi}
\begin{itemize}
\item[] \textit{piano\_di\_qualifica.3.0.pdf} allegato.
\item[] \textit{norme\_di\_progetto.3.0.pdf} allegato.
\item[] \textit{analisi\_dei\_requisiti.3.0.pdf} allegato
\end{itemize}

\subsection{Informativi}
\begin{itemize}
\item[] Capitolato d'appalto: \caName{}, v1.0, redatto e rilasciato dal proponente Zucchetti S.r.l. reperibile all'indirizzo \url{http://www.math.unipd.it/~tullio/IS-1/2012/Progetto/C1.pdf};
\item[] testo di consultazione: \textit{Software Engineering (8th edition) Ian Sommerville, Pearson Education | Addison Wesley};
\item[] manuale all'utilizzo dei design pattens: \textit{Design Patterns, Elementi per il riuso di software a oggetti -- (1/Ed. italiana) Eric Gamma, Richard Helm, Ralph Johnson, John Vlissides, Pearson Education};
\item[] manuale di basi di dati: \textit{Sistemi di basi di dati-fondamenti} -- (6° edizione) Ramez Elmasri / Shamkant B. Navathe
\item[] \textit{glossario.3.0.pdf} allegato.
\end{itemize}
\clearpage

\section{Strumenti utilizzati}

\subsection{Java}
L'utilizzo del linguaggio \underline{Java} è richiesto dal proponente esclusivamente per la realizzazione della componente \underline{server}.

\subsubsection*{Vantaggi}
\begin{itemize}[noitemsep,nolistsep]
\item[-] è un linguaggio predisposto nativamente alla gestione parallela di \inglese{thread} e questo applicato ad un server dà la possibilità di gestire parallelamente richieste da parte di più utenti allo stesso tempo;
\item[-] essendo un linguaggio orientato agli oggetti e fortemente tipizzato si presta all'applicazione di \inglese{design pattern} e alla costruzione di un'architettura robusta, fortemente modulare e al contempo flessibile, in accordo con i principi del paradigma di programmazione OO;
\item[-] permette la generazione automatica della documentazione con l'ausilio di JavaDoc;
\item[-] garantisce la portabilità del codice (a livello di bytecode), l'indipendenza dalla piattaforma fisica di esecuzione grazie alla JVM e l'integrazione nell'ambiente di esecuzione del proponente (\underline{TomCat}).
\end{itemize}

 
\subsection{Web server Apache}

La struttura dell'applicativo si basa su pagine web scritte in \underline{HTML5}. Ciò richiede la presenza di un server web dove collocare le pagine richiamabili dai browser degli utenti.

\subsubsection*{Vantaggi}

\begin{itemize}[noitemsep,nolistsep]
  \item[-] diversi membri del team hanno già lavorato su tale struttura, il costo in termini di tempo per istruire il personale è dunque ridotto al minimo;
  \item[-] Apache offre funzioni di controllo per la sicurezza come quelli che compie il \inglese{proxy};
\end{itemize}
  
\subsection{RDBMS MySQL}

Ogni utente avrà a disposizione diversi dati consultabili e modificabili in diverse aree dell'applicativo. Per esempio, un utente sarà interessato a gestire i propri dati personali.

Ciò richiede che l'applicativo sia dotato di un sistema di memorizzazione permanente dei dati. A tale scopo si è scelto di usare un RDBMS (\inglese{relational database management system}) e nello specifico  il team intende appoggiarsi ad un server MySQL\@.

\subsubsection*{Vantaggi}

\begin{itemize}[noitemsep,nolistsep]
  \item[-] come per Apache, anche per questo sistema si stima che costi per istruire i personali saranno minimi, poiché i membri del team hanno già avuto modo di utilizzare tale strumento;
  \item[-] uno dei principali strumenti d'amministrazione di un database MySQL è phpMyAdmin. Il team conta di utilizzarlo in virtù dell'intuitività con cui è costruita l'interfaccia grafica;
  \item[-] tale DBMS supporta le transazioni, essenziali nel nostro progetto per la manipolazione e la lettura dei dati memorizzati.
\end{itemize}

\subsection{Servlet container TomCat}

L'applicativo dovrà disporre di un lato server ed un lato client. Se da una parte il lato client è rappresentato dall'ambiente di esecuzione del browser che ha il compito di visualizzare una pagina web fornita tramite un server Apache ed eseguire gli \inglese{script} ad essa associati, dall'altra l'applicativo server sarà strutturato tramite delle \inglese{servlet} Java che, per conformità con i software usati, saranno caricate nel \inglese{servlet container} di TomCat che si appoggia sul già citato Apache.

\subsubsection*{Vantaggi}

\begin{itemize}[noitemsep,nolistsep]
  \item[-] Alcuni membri del gruppo hanno già lavorato in passato con Tomcat. LA loro esperienza potrà tornare utile velocizzando la fase d'apprendimento, da parte dei membri che ancora non lo conoscono.
\end{itemize}

\subsection{Hibernate}\label{sec:hibernate}

Hibernate è un \inglese{framework} Java utilizzato per facilitare l'utilizzo di un \underline{database} da parte del server realizzando la mappatura fra oggetti intesi in senso OOP ed ennuple del modello relazionale (\inglese{object-relational mapping}).

\subsubsection*{Vantaggi}
\begin{itemize}[noitemsep,nolistsep]
\item[-] Hibernate permette di utilizzare le tabelle di un database relazionale come se fossero degli oggetti mappando il database su di opportune classi strutturate ad-hoc svincolando la gestione della persistenza dei dati dalla logica di business;
\item[-] con questo \inglese{framework} Java riesce a lavorare su un database rendendo trasparenti al programmatore le vere e proprie \inglese{query} e mostrando esclusivamente classi e metodi; Lo sviluppatore è inoltre esonerato dalla gestione dei risultati di chiamate SQL e la loro eventuale conversione in oggetti.
\item[-] essendo rilasciato sotto licenza LGPL può essere utilizzato senza restrizioni (\inglese{copyleft}) e vincoli di licenza delle opere derivate.
\item[-] l'applicazione rimane portabile in tutti i sistemi di gestione supportati, con un basso \inglese{overhead}.
\end{itemize}
\clearpage

\section{Introduzione all'architettura di sistema}\label{sec:introdesign}
Per introdurre l'architettura proposta è essenziale mettere in evidenza le seguenti considerazioni:
\begin{itemize}
	\item il sistema poggia su un database nel quale sono contenuti i dati d'interesse per gli utenti (dati anagrafici, lista dei messaggi audio, lista dei messaggi audio e video, la rubrica dei contatti e lo storico delle chiamate);
	\item il sistema proposto dal team è dotato di una parte server e una parte client;
	\item dopo un'analisi preliminare il team ha stabilito che la progettazione del server non deve essere vincolata da quella del client in modo tale da evitare che il progetto dell'applicativo lato server abbia la cognizione di come funziona il client. Ciò permetterà un futuro riutilizzo del codice (e.g. se si desiderasse creare un nuovo applicativo di tipo \underline{VoIP} si potrà riutilizzare il server già creato);
	\item per quanto riguarda il lato client, al fine di garantire un alto livello di riutilizzo del codice e la possibilità di eseguire manutenzioni nel minor tempo possibile, si vuole che la logica d'implementazione del client sia svincolata dalla rappresentazione grafica del medesimo.
\end{itemize}

Tali considerazioni di base, hanno portato il team a suddividere l'architettura in tre sotto-architetture, intese anche come package, più una quarta architettura inerente la struttura del database:
\begin{itemize}
	\item il database;
	\item il server (\texttt{org.softwaresynthesis.mytalk.server});
	\item il presenter del client (\texttt{org.softwaresynthesis.mytalk.clientpresenter});
	\item la vista del client (\texttt{org.softwaresynthesis.mytalk.clientview}
\end{itemize}

Le specifiche di ogni sotto-architettura saranno definite in seguito, nelle relative sezioni.

Inoltre si fa presente che l'architettura generale, intesa come agglomerato delle tre sotto-architetture precedentemente elencate, fa uso del pattern MVP\@.

Sotto tale ottica la sotto-architettura \texttt{server} ricopre il ruolo di \inglese{model}, \texttt{clientpresenter} costituisce invece il \inglese{presenter}, mentre \texttt{clientview} è la vista definita per questo progetto. Tra le considerazioni più interessanti che hanno portato alla scelta di questo \inglese{pattern}, va messa in evidenza la seguente.

Assegnando a ogni sotto-architettura un ruolo specifico, si garantisce un alto livello di riutilizzo del codice (e.g. la vista comunica con il \inglese{presenter} poiché non conosce la logica di \inglese{business} del sistema).

Quindi in un futuro di potrebbe riprendere la vista oggi definita, e riutilizzarla in un altro progetto, andando solo a ridefinire, se necessario, un presente che riproponga una nuovo adattamento della parte logica.

Di seguito verranno proposte le sotto-architetture evidenziate. Di ogni una sarà dato un elenco dettagliato dei componenti che lo interessano. Si sottolinea che per componenti non si intende i sotto-package, ma gli agglomerati di classi (potenzialmente prese da package diversi) che concorrono ad un fine comune: la definizione delle funzionalità del componente trattato.

\begin{figure}[H]
\centering
  \includegraphics[width=.8\textwidth]{DiagrammaPackage}
  \caption{Diagramma dei package generale}\label{fig:packagegenerale}
\end{figure}
\clearpage

\subsection{Logica di rete}

\subsubsection{Descrizione della logica di connessione}
La rete che viene a crearsi sotto l'architettura di \caName{} è suddivisa in ``comunicazioni'', ovvero gruppi di due o più utenti che comunicano tra di loro. Ogni comunicazione è formata dalle singole ``connessioni'' tra i vari client.

Questo capitolo serve a spiegare quale è la logica che governa la rete. Iniziamo definendo i tipi di client che la popolano.
\begin{description}
	\item{\scshape\bfseries Nodo}\\
	Il Nodo è rappresentato da un semplice client che si trova all'interno di una comunicazione e che ha una unica connessione attiva verso un altro client.
	\item{\scshape\bfseries Supernodo}\\
	Il Supernodo è un client con funzione di server. È usato nelle comunicazioni tra tre o più utenti per smistare le connessioni di tutti facendosi carico del traffico dei client.
\end{description}

Vediamo nel dettaglio come avviene una comunicazione. Essa nasce sempre tra due utenti, nel momento in cui uno desidera iniziarla effettua una richiesta verso il server che la inoltra al destinatario.

La comunicazione nasce così come un'unica connessione tra due client in modalità \underline{\inglese{peer-to-peer}} dove entrambi gli utenti hanno il ruolo di Nodo. Una comunicazione potrà iniziare solo attraverso tale metodologia, in quanto non vengono aperte comunicazioni iniziali tra più di due utenti.

Da questa situazione uno dei due utenti può richiederne l'aggiunta di un ulteriore soggetto. Dopo questa richiesta, il Nodo che la ha eseguita diventa un Supernodo con attive sia la connessione con il vecchio Nodo sia quella con il nuovo Nodo appena aggiunto.

Questa operazione crea una connessione fra tre Nodi estendibile dal Supernodo e dagli altri Nodi attraverso una richiesta al Supernodo stesso.

%Solo il Supernodo può richiedere nuove connessioni al Server. Con ulteriori richieste i nuovi nodi si collegano al Supernodo con una connessione estendendo la comunicazione.

Ogni Nodo può togliersi dalla comunicazione chiudendo la connessione con il Supernodo. Se è il Supernodo stesso a volersi togliere dalla comunicazione, l'intera comunicazione cade e tutti gli utenti vendono disconnessi.

\subsubsection{L'idea iniziale}
La logica di gestione della rete scelta dal team può rendere poco stabile le comunicazioni. Tale problematica è stata analizzata a lungo, e al fine di rendere le comunicazioni più stabili e solide era stata presa in considerazione un ulteriore soluzione alternativa sempre basata sul modello concettuale di Nodi e Supernodi, tuttavia è stata scartata dopo una breve analisi preliminare.

La differenza principale di tale soluzione rispetto a quella adottata è nella gestione dinamica del Supernodo, che viene scelto in base alla sua capacità di banda e alla possibilità di mantenere attive, con la massima qualità, tutte le connessioni con i Nodi della comunicazione.

Questa soluzione avrebbe richiesto un test di qualità della rete per ogni Nodo verso il nuovo possibile Supernodo, operazione di difficile progettazione e con complessità elevata, pari a $\omega(n-1)$ con n Nodi attivi nella comunicazione.

Al fine di garantire sempre la migliore qualità di connessione era stata presa inoltre in considerazione l'idea di controllare periodicamente la qualità del Supernodo e degli altri Nodi in modo da sostituire il Supernodo se necessario. Purtroppo anche questa soluzione richiederebbe dei calcoli di complessità $\omega(n*(n-1))$ con n Nodi attivi nella comunicazione.

Con una corretta implementazione questa soluzione avrebbe permesso una migliore qualità del prodotto \caName, il gruppo ha tuttavia optato per la prima implementazione presentata in quanto le risorse disponibili non erano sufficienti per terminare la seconda.
\clearpage

\section{Architettura del database}\label{sec:database}

Come già citato nella parte introduttiva all'architettura, il server si appoggia ad un database dove sono registrati i dati del sistema. La progettazione di tale database passa per due fasi (come appreso dal manuale ``Sistemi di basi di dati''): la progettazione concettuale e la progettazione logica.

\subsection{Progettazione concettuale}
Con la progettazione concettuale definiremo una struttura ``concettuale'' della base di dati. Tale struttura non rappresenta quella finale pronta per la creazione su DBMS, ma bensì un modello in grado di rappresentare il problema, svincolato da come esso debba essere logicamente rappresentato.

\subsubsection{Lista delle classi}

\begin{description}
	\item{\scshape\bfseries UserData}: è l'entità le cui istanze rappresentano gli utenti registrati nel sistema. UserData è caratterizzata dai seguenti attributi:

\begin{center}
\rowcolors{2}{lightblue}{llightblue}
\begin{tabular}{lccc}
\toprule
Nome attributo & Tipo & Opzionale & Vincoli\\
\midrule
ID\_user & Integer & NO & PrimaryKey\\
E-Mail & Varchar(100) & NO & Unique\\
Password & Password & NO &\\
Question & Varchar(100) & NO &\\
Answer & Varchar(100) & NO &\\
Name & Varchar(100) & SÌ &\\
Cognome & Varchar(100) & SÌ &\\
Picture & Varchar(150) & SÌ &\\
\bottomrule
\end{tabular}
\end{center}

	\item{\scshape\bfseries Calls}: è l'entità le cui istanze rappresentano le chiamate effettuate attraverso il sistema software \caName. Calls è caratterizzata dai seguenti attributi:

\begin{center}
\rowcolors{2}{lightblue}{llightblue}
\begin{tabular}{lccc}
\toprule
Nome attributo & Tipo & Opzionale & Vincoli\\
\midrule
ID\_call & Integer & NO & PrimaryKey\\
Start\_date & Datetime & NO & \\
End\_date & Datetime & SÌ & \\
\bottomrule
\end{tabular}
\end{center}

	\item{\scshape\bfseries Groups}: è l'entità le cui istanze rappresentano un gruppo della rubrica di un utente. Tale entità è costituita dagli attributi:

\begin{center}
\rowcolors{2}{lightblue}{llightblue}
\begin{tabular}{lccc}
\toprule
Nome attributo & Tipo & Opzionale & Vincoli\\
\midrule
ID\_group & Integer & NO & PrimaryKey\\
Name & Varchar(100) & NO &\\
\bottomrule
\end{tabular}
\end{center}	
	
	\item{\scshape\bfseries Messages}: è l'entità che rappresenta le informazioni basilari di un messaggio della segreteria dell'utente. Gli attributi che la compongono sono:

\begin{center}
\rowcolors{2}{lightblue}{llightblue}
\begin{tabular}{lccc}
\toprule
Nome attributo & Tipo & Opzionale & Vincoli\\
\midrule
ID\_message & Integer & NO & PrimaryKey\\
Sender & Varchar(100) & NO & \\
Receiver & Varchar(100) & NO & \\
New & Boolean & NO & \\
Start\_date & Datetime & NO & \\
End\_date & Datetime & SÌ & \\
\bottomrule
\end{tabular}
\end{center}	
	
	\item{\scshape\bfseries AudioMessages}: è un entità che specializza Messages e rappresenta i messaggi audio lasciati nella segreteria di un utente. L'entità non è caratterizzata da alcun attributo proprio.
	
	\item{\scshape\bfseries AudioVideoMessages}: è un entità che specializza Messages e rappresenta i messaggi audio/video lasciati nella segreteria di un utente.  L'entità non è caratterizzata da alcun attributo proprio.	
	
\end{description}

\subsubsection{Chiavi primarie sintetiche}
I progettisti hanno optato per la definizione di chiavi primarie sintetiche, ovvero chiavi generate automaticamente all'inserimento di un nuovo \inglese{record} nelle tabelle corrispondenti alle entità.

Tale scelta è dettata dall'utilizzo del framework Hibernate che non permette la modifica del valore della chiavi primarie associate ad una istanza di un oggetto di \inglese{business}. Le chiavi saranno quindi composte da un campo a valore intero, da intendersi come un contatore che identifica univocamente i record.

Nel caso particolare dei messaggi, inoltre, il campo ID\_message, oltre a rappresentare un identificatore univoco, coincide anche con il nome del file sul server in cui è memorizzato il messaggio stesso, all'interno di una \inglese{directory} predefinita e nota ai componenti del sistema.

\subsubsection{Gerarchia tra classi}

\begin{description}
	\item{\scshape\bfseries Messages(AudioMessages e AudioVideoMessages)}: i messaggi si suddividono logicamente in due categorie, i messaggi dotati solamente di traccia audio e quelli aventi anche una traccia video. Gli attributi contenuti in queste entità sono gli stessi. Infatti la necessità di mostrare la separazione deriva dalla volontà del team di evidenziare la distinzione tra i due oggetti, motivata dalla possibilità di gestire le istanze delle due entità in modo diverso.
\end{description}

\subsubsection{Associazione tra classi}

\begin{description}
	\item{\scshape\bfseries UserData - Calls (molti a molti)}: tale associazione rappresenta il legame che intercorre tra gli utenti e le chiamate. Tale associazione è del tipo molti a molti, con totalità parziale verso Calls e totalità totale verso UserData.
	
	\item{\scshape\bfseries UserData - Groups (molti a molti)}: tale associazione rappresenta il legame che intercorre tra gli utenti ed i gruppi, per la quale si è deciso di usare un associazione molti a molti con totalità parziale solo da Groups a UserData. Ciò significa che: un utente può comparire in zero o più gruppi (in ragione del fatto che potrebbe esserci più di qualcuno che registra un dato utente nella propria rubrica), ed un utente può possedere uno o più gruppi.
	
	\item{\scshape\bfseries UserData - Groups (uno a molti)}: tale associazione rappresenta il legame che intercorre tra il proprietario del gruppo e il gruppo stesso. L'associazione è del tipo uno a molti, a rappresentare come un gruppo sia visualizzabile unicamente dal proprietario, mentre un utente può avere (e di conseguenza visualizzare) più gruppi.
	
	\item{\scshape\bfseries UserData - Messages (uno a molti)}: tale associazione rappresenta il legame che intercorre tra gli utenti ed i messaggi registrati nella sua segreteria. L'associazione è del tipo uno a molti verso Messages, con totalità parziale verso Messages e totalità totale verso UserData. L'idea alla base è che un utente può avere nella propria segreteria uno o più messaggi, così come può non averne nessuno, mentre ogni messaggio della segreteria è ``visionabile'' da un unico utente, il destinatario del messaggio.
\end{description}

\subsection{Progettazione logica}
Con la progettazione logica intendiamo costruire la struttura definitiva del database sulla base della progettazione concettuale. Quindi si deciderà come trasformare le gerarchie e in seguito le associazioni, al fine di restituire una struttura chiara e pronta per la creazione sul DBMS\@. La lista delle classi proposta, e lo schema associato, rappresentano tale struttura.

\subsubsection{Rappresentazione delle gerarchie}

\begin{description}
	\item{\scshape\bfseries Messages(AudioMessages e AudioVideoMessages)}: al fine di evidenziare la suddivisione logica tra le due tipologie di messaggi, è stato deciso di trasformare la specializzazione di Messages con una tabella unica contenente un discriminante. È rimasta esclusivamente l'entità Messages a cui è stato aggiunto l'attributo ``Audio'' con la funzione di discriminare le due tipologie di messaggi.
\end{description}

\subsubsection{Rappresentazione delle associazioni}

\begin{description}
	\item{\scshape\bfseries UserData - Calls}: tale associazione si è risolta attraverso l'introduzione dell'entità CallLists. Tale entità contiene l'attributo User come chiave esterna verso l'entità UserData e l'attributo Call\_ID come chiave esterna verso l'entità Calls. È dotata inoltre dell'attributo Caller che identifica colui che ha per primo avviato la chiamata; per ogni gruppo di ennuple aventi lo stesso Call\_ID si avrà soltanto una ennupla contrassegnata con il campo Caller a vero.
	
	\item{\scshape\bfseries UserData - Groups}: tale associazione si è risolta con la creazione di una terza entità denominata AddressBooks, che contiene una chiave esterna verso UserData e una chiave esterna verso Groups.
	
	\item{\scshape\bfseries UserData - Groups}: tale associazione si è risolta trasformando l'attributo Owner in una chiave esterna verso UserData.
	
	\item{\scshape\bfseries UserData - Messages}: tale associazione si è risolta inserendo una chiave esterna verso UserData, all'interno dell'entità Messages.
\end{description}

\subsubsection{Lista delle classi}

\begin{center}

UserData

\rowcolors{2}{lightblue}{llightblue}
\begin{center}
\begin{tabular}{lccc}
\toprule
Nome attributo & Tipo & Opzionale & Vincoli\\
\midrule
ID\_user & Integer & NO & PrimaryKey\\
E-Mail & Varchar(100) & NO & Unique\\
Password & Password & NO &\\
Question & Varchar(100) & NO &\\
Answer & Varchar(100) & NO &\\
Name & Varchar(100) & SÌ &\\
Surname & Varchar(100) & SÌ &\\
Picture & Varchar(150) & SÌ &\\
\bottomrule
\end{tabular}
\end{center}

Calls

\begin{center}
\rowcolors{2}{lightblue}{llightblue}
\begin{tabular}{lccc}
\toprule
Nome attributo & Tipo & Opzionale & Vincoli\\
\midrule
ID\_call & Integer & NO & PrimaryKey\\
Start\_date & Datetime & NO & \\
End\_date & Datetime & SÌ &\\
\bottomrule
\end{tabular}
\end{center}

CallLists

\begin{center}
\rowcolors{2}{lightblue}{llightblue}
\begin{tabular}{lccc}
\toprule
Nome attributo & Tipo & Opzionale & Vincoli\\
\midrule
ID\_call & Integer & NO & PrimaryKey e ForeignKey verso Calls\\
ID\_user & Integer & NO & PrimaryKey e ForeignKey verso UserData \\
Caller & Boolean & NO &\\
\bottomrule
\end{tabular}
\end{center}

AddressBooks

\begin{center}
\rowcolors{2}{lightblue}{llightblue}
\begin{tabular}{lccc}
\toprule
Nome attributo & Tipo & Opzionale & Vincoli\\
\midrule
ID\_user & Integer & NO & PrimaryKey e ForeignKey verso UserData\\
ID\_group & Integer & NO & PrimaryKey e ForeignKey verso Groups\\
\bottomrule
\end{tabular}
\end{center}

Groups

\begin{center}
\rowcolors{2}{lightblue}{llightblue}
\begin{tabular}{lccc}
\toprule
Nome attributo & Tipo & Opzionale & Vincoli\\
\midrule
ID\_group & Integer & NO & PrimaryKey\\
Name & Varchar(100) & NO & \\
Owner & Varchar(100) & NO & ForeignKey verso UserData\\
\bottomrule
\end{tabular}
\end{center}	

Messages

\begin{center}
\rowcolors{2}{lightblue}{llightblue}
\begin{tabular}{lccc}
\toprule
Nome attributo & Tipo & Opzionale & Vincoli\\
\midrule
ID\_message & Integer & NO & PrimaryKey\\
Sender & Varchar(100) & NO & ForeignKey verso UserData \\
Receiver & Varchar(100) & NO & ForeignKey verso UserData\\
New & Boolean & NO & \\
Audio & Boolean & NO & \\
Start\_date & Datetime & NO & \\
End\_date & Datetime & SÌ & \\
\bottomrule
\end{tabular}	
\end{center}

\end{center}

\subsubsection{Diagramma delle classi}
\begin{figure}[H]
\begin{center}
\includegraphics[width=.9\textwidth]{Database_logico}
\caption{Diagramma delle classi - Schema logico database}\label{fig:database_logico}
\end{center}
\end{figure}

\clearpage

\section{Architettura \texttt{mytalk.server}}\label{sec:server}
Tale sotto-architettura definisce le specifiche e le funzionalità dell'applicativo lato server. In esso saranno definiti i seguenti componenti:
\begin{itemize}[noitemsep,nolistsep]
	\item[-] \textsf{CS01 -- Gestione database};
	\item[-] \textsf{CS02 -- Gestione connessione};
	\item[-] \textsf{CS03 -- Gestione rubrica};
	\item[-] \textsf{CS04 -- Gestione stato};
	\item[-] \textsf{CS05 -- Gestione segreteria};
	\item[-] \textsf{CS06 -- Gestione chiamate};
	\item[-] \textsf{CS07 -- Façade del server}.
\end{itemize}

I componenti sopracitati verranno definiti di seguito. Si sottolinea sin da ora che il server è l'unico in grado di comunicare con il database su cui regge l'applicativo.

Infine, si fa notare che i nomi di tutte le classi riportate nella presente sezione sono implicitamente parte del package \texttt{org.softwaresynthesis.mytalk.server} pertanto tale prefisso sarà omesso nella loro denominazione.

\subsection{Componenti evidenziati}


\subsubsection{CS01 -- Gestione database}
\begin{description}
\item{\scshape\bfseries Descrizione:}\\
È il componente che si occupa di rappresentare la struttura del database relazionale su cui poggia l'applicativo. Tramite questo componente, il sistema potrà quindi effettuare operazione di lettura e scrittura di entità all'interno del database.

Le classi che fanno parte  di questo componente possono essere suddivise in:
\begin{itemize}
  \item una classe di utilità per la creazione delle sessioni di connessione al DBMS su cui saranno realizzate le transazioni;
  \item le classi \inglese{data access object} (DAO) concrete per il DBMS prescelto (MySQL) e le relative interfacce;
  \item le classi \inglese{factory} (concrete e astratte) utilizzate per ottenere le istanze delle classi DAO necessarie a supportare la persistenza dei dati del database.
\end{itemize}

Inoltre, sono utilizzate le classi \inglese{transfer object} (TO) esterne e le relative interfacce che modellano le entità di \inglese{business}, in particolare:
\begin{itemize}[noitemsep,nolistsep]
  \item[-] \texttt{call.ICall}
	\item[-] \texttt{call.Call}
	\item[-] \texttt{abook.IGroup}
	\item[-] \texttt{abook.Group}
	\item[-] \texttt{message.IMessage}
	\item[-] \texttt{message.Message}
	\item[-] \texttt{abook.IUserData}
	\item[-] \texttt{abook.UserData}
\end{itemize}

In linea generale le classi TO mappano le entità rappresentate nel database e sono dotate di variabili di istanza che corrispondono ai campi dei \inglese{record}. Le operazioni disponibili su questo genere di oggetti comprendono i metodi get/set associati ai campi delle tabelle del database e sono rese disponibili dalle interfacce (una per ogni entità) implementate dalle classi TO\@.

Ad ognuna delle entità è associata inoltre un'interfaccia DAO il cui contratto stabilisce la responsabilità di gestire la transizione di stato degli oggetti TO da transienti a persistenti, l'aggiornamento delle informazioni sul database, la ricerca di un elemento e la rimozione di un oggetto dallo stato persistente, realizzando le operazioni di \inglese{insert}, \inglese{update}, \inglese{find}, \inglese{select} e \inglese{delete} corrispondenti.

Poiché le implementazioni delle interfacce DAO contengono istruzioni dipendenti dal DBMS utilizzato, è stato realizzato un set di classi specifiche per MySQL che si appoggiano al \inglese{framework} Hibernate per la gestione della persistenza dei dati. Inoltre, è stata introdotta una classe \inglese{factory} per MySQL (\texttt{dao.MySQLDAOFactory})responsabile della creazione degli oggetti DAO specifici per questo DBMS\@.

Allo scopo di rendere l'architettura facilmente estendibile a futuri ampliamenti o cambiamenti di DBMS, è stata introdotta un'interfaccia della \inglese{factory} in cui i tipi di ritorno dei metodi sono le interfacce DAO\@. Una diversa classe \inglese{factory} che la implementi potrà pertanto restituire istanze di sottotipi delle interfacce DAO specifiche per gestori di database distinti.

\item{\scshape\bfseries Diagramma delle classi:}
\begin{figure}[H]
  \centering
  \includegraphics[width=.5\textwidth]{class_gestione_database}
  \caption{Diagramma delle classi - Gestione database}\label{fig:gestione_database}
\end{figure}

	\item{\scshape\bfseries Classi utilizzate:}
	\begin{itemize}[nolistsep, noitemsep]
	  \item[-] \texttt{dao.IDAOFactory}
	  \item[-] \texttt{dao.MySQLDAOFactory}
	  \item[-] \texttt{dao.ICallDAO}
	  \item[-] \texttt{dao.MySQLCallDAO}
	  \item[-] \texttt{dao.IGroupDAO}
	  \item[-] \texttt{dao.MySQLGroupDAO}
	  \item[-] \texttt{dao.IMessageDAO}
	  \item[-] \texttt{dao.MySQLMessageDAO}
	  \item[-] \texttt{dao.IUserDataDAO}
	  \item[-] \texttt{dao.MySQLUserDataDAO}
	  \item[-] \texttt{dao.HibernateUtil}
	  \item[-] \texttt{call.ICall}
	  \item[-] \texttt{call.Call}
	  \item[-] \texttt{abook.IGroup}
	  \item[-] \texttt{abook.Group}
	  \item[-] \texttt{message.IMessage}
	  \item[-] \texttt{message.Message}
	  \item[-] \texttt{abook.IUserData}
	  \item[-] \texttt{abook.UserData}
	\end{itemize}
\end{description}

\subsubsection{CS02 -- Gestione connessione}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Tale componente ingloba le classi destinate a stabilire le \inglese{routine} di connessione. A tal fine è stata definita l'interfaccia di una classe Singleton \texttt{connection.ICommunicationHandler}, implementata da \texttt{connection.CommunicationHandler} che ha il compito di creare gli oggetti necessari alla connessione.

Le specifiche di tali oggetti sono descritte dall'interfaccia \texttt{connection.IConnection}, con la relativa implementazione \texttt{connection.WebRTCInfo}, che permette il recupero delle informazioni di cui il client necessita per instaurare la connessione. Dal momento che si tratta di informazioni per loro stessa natura volatili, non è stato predisposto per esse alcun meccanismo di memorizzazione in forma fortemente strutturata e persistente.
	\item{\scshape\bfseries Diagramma delle classi:}
	\begin{figure}[H]
\begin{center}
\includegraphics[width=.8\textwidth]{class_gestione_connessione}
\caption{Diagramma delle classi - Gestione connessione}\label{fig:gestione_connessione}
\end{center}
\end{figure}
	
	\item{\scshape\bfseries Classi utilizzate:}
	\begin{itemize}[nolistsep, noitemsep]
	  \item[-] \texttt{connection.ICommunicationHandler}
	  \item[-] \texttt{connection.CommunicationHandler}
	  \item[-] \texttt{connection.IConnection}
	  \item[-] \texttt{connection.WebRTCInfo}
	\end{itemize}
\end{description}

\subsubsection{CS03 -- Gestione rubrica}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Ad ogni utente del sistema, che corrisponde a un'istanza di \texttt{abook.UserData} è associata una rubrica personale, rappresentata dall'interfaccia \texttt{abook.IAddressBook} e dalla relativa implementazione \texttt{abook.AddressBook}.

I contatti in rubrica corrispondono agli utenti del sistema che il possessore ha aggiunto alla stessa. Una rubrica può contenere zero o più utenti, come si evince dalla relazione di composizione fra \texttt{abook.AddressBook} e \texttt{abook.IUserData} riportata del diagramma in figura~\ref{fig:gestionerubrica}.

Gli utenti, inoltre, possono essere opzionalmente organizzati in gruppi: un contatto in rubrica può, in un dato momento, appartenere a uno o più gruppi oppure non appartenere a nessuno.

D'altro canto, la rubrica può contenere uno o più gruppi, laddove il limite inferiore è fissato dalla presenza di default di un gruppo \inglese{blacklist} in ogni rubrica. Questo spiega la relazione di composizione fra \texttt{abook.AddressBook} e \texttt{abook.IGroup}.

Infine, il passaggio dei dati corrispondenti ai contatti della rubrica al \inglese{presenter} è gestito restituendo una versione serializzata degli oggetti compatibile con il dominio applicativo dei client che rappresenta inoltre una sorta di \inglese{proxy} di protezione, corrispondente alla classe \texttt{org.softwaresynthesis.mytalk.clientpresenter.kernel.JSUserData}. Un trattamento analogo è stato riservato ai gruppi di utenti che fanno parte di una rubrica personale.

La gestione della rubrica lato client è resa inoltre più agevole modellando quest'ultima come una collezione di contatti e gruppi, attraverso un livello di astrazione ulteriore introdotto da \texttt{clientpresenter.kernel.JSAddressBook}.

	\item{\scshape\bfseries Diagramma delle classi:}
\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{class_gestione_rubrica}
  \caption{Diagramma delle classi - Gestione rubrica}\label{fig:gestionerubrica}
\end{figure}
	
	\item{\scshape\bfseries Classi utilizzate:}\\
	\begin{itemize}[nolistsep, noitemsep]
	  \item[-] \texttt{abook.AddressBook}
	  \item[-] \texttt{abook.IAddressBook}
	  \item[-] \texttt{abook.IGroup}
	  \item[-] \texttt{abook.Group}
	  \item[-] \texttt{abook.IUserData}
	  \item[-] \texttt{abook.UserData}
	  \item[-] \texttt{org.softwaresynthesis.mytalk.clientpresenter.kernel.JSUserData}
	  \item[-] \texttt{org.softwaresynthesis.mytalk.clientpresenter.kernel.JSGroup}
	  \item[-] \texttt{org.softwaresynthesis.mytalk.clientpresenter.kernel.JSAddressBook}
	\end{itemize}
\end{description}

\subsubsection{CS04 -- Gestione stato}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Le classi di tale componente sono utilizzate per gestire lo stato degli utenti, permettendo un comportamento diverso delle istanze di \texttt{abook.UserData} a seconda dello stato in cui si trova l'utente corrispondente. Gli stati possibili sono in prima istanza ``\inglese{online}'' e ``\inglese{offline}'', rappresentati dalle classi \texttt{state.StateOnline} e \texttt{state.StateOffline} rispettivamente.

Gli utenti che si trovano nello stato online possono trovarsi in due situazioni: ``occupato'' o ``disponibile'', rappresentati a loro volta dalle classi \texttt{state.StateOccupied} e \texttt{state.StateAvailable}.

Se l'utente è impegnato in una conversazione con uno o più utenti, allora lo stato in cui si trova è ``occupato''. Tuttavia, un utente può anche impostare manualmente il proprio stato ad ``occupato'' anche per segnalare di non essere disponibile a ricevere chiamate in ingresso.
	
La chiamata viene inoltre trattata in modo differente a seconda che l'utente si trovi nello stato ``disponibile'' o ``occupato''/``\inglese{offline}'', dal momento che nel primo caso la chiamata va a buon fine mentre nel secondo verrà attivato il meccanismo di segreteria telefonica.
	
Inoltre, i cambiamenti di stato vengono notificati a tutti gli utenti presenti in rubrica tali che si trovano nello stato \inglese{online}.
	\item{\scshape\bfseries Diagramma delle classi:}
\begin{figure}[H]
  \centering
  \includegraphics[width=.9\textwidth]{class_gestione_stato}
  \caption{Diagramma delle classi - Gestione stato}\label{fig:gestione_stato}
\end{figure}
	
	\item{\scshape\bfseries Classi utilizzate:}\\ 
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \texttt{abook.UserData}
	  \item[-] \texttt{state.IState}
	  \item[-] \texttt{state.StateAvailable}
	  \item[-] \texttt{state.StateOccupied}
	  \item[-] \texttt{state.StateOffline}
	  \item[-] \texttt{state.StateOnline}
	\end{itemize}
\end{description}

\subsubsection{CS05 -- Gestione segreteria}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Il sistema di segreteria telefonica corrisponde all'interfaccia \texttt{message.IMessageBox} e alla relativa implementazione \texttt{message.MessageBox} che permettono un accesso centralizzato all'insieme di messaggi che un determinato utente ha ricevuto.

I messaggi di natura audio o audio/video sul server corrispondono alle istanze dalla classe \texttt{message.Message} e sono caratterizzati da mittente, destinatario, data di registrazione nella segreteria.

L'onere di caricare in memoria e gestire l'intero messaggio è posticipato al momento di effettiva necessità mediante l'utilizzo lato client di una sorta di \inglese{virtual proxy} corrispondente alla classe \texttt{clientpresenter.kernel.JSMessage} che rende disponibili le medesime operazioni di \texttt{message.Message} ma consente di scaricare il contenuto del messaggio sul client solo quando effettivamente richiesto.

La gestione della segreteria lato client è resa più agevole dall'introduzione della classe \texttt{clientpresenter.kernel.JSMessageBox} che rappresenta una collezione di messaggi.

	\item{\scshape\bfseries Diagramma delle classi:}
\begin{figure}[H]
  \centering
  \includegraphics[width=.6\textwidth]{class_gestione_segreteria}
  \caption{Diagramma delle classi - Gestione segreteria}\label{fig:gestione_segreteria}
\end{figure}	
	
	\item{\scshape\bfseries Classi utilizzate:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \texttt{message.IMessageBox}
	  \item[-] \texttt{message.MessageBox}
		\item[-] \texttt{message.IMessage}
	  \item[-] \texttt{message.Message}
	  \item[-] \texttt{org.softwaresythesis.mytalk.clientpresenter.kernel.JSMessage}
	  \item[-] \texttt{org.softwaresythesis.mytalk.clientpresenter.kernel.JSMessageBox}
	\end{itemize}
\end{description}

\subsubsection{CS06 -- Gestione chiamate}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Le classi di questo componente hanno il ruolo di incapsulare la logica di gestione delle chiamate e di accesso ai dati relativi a una chiamata (data, mittente e $n\geq1$ destinatari della chiamata). Tali informazioni rivestono un ruolo importante per la rappresentazione e la trasmissione ai client dello storico delle chiamate.

Oltre all'interfaccia \texttt{ICall} e alla sua implementazione lato server \texttt{Call}, che rappresenta il \inglese{transfer object} per la gestione del database, sono state predisposte l'interfaccia \texttt{ICallList} e la relativa implementazione \texttt{CallList} per la rappresentazione di una collezione di chiamate.

Le tabelle del database che corrispondono a \texttt{CallList} e al \inglese{transfer object} \texttt{Call} sono Calls e l'entità di associazione CallLists. La chiave primaria in Calls (e chiave esterna in CallLists) è di tipo \texttt{BIGINT} senza segno, il team è consapevole che questo impone una limitazione dell'ordine di $\times10^{19}$ al numero di chiamate che possono essere memorizzate contemporaneamente. Una soluzione da adottarsi in futuro per evitare la perdita di dati potrebbe consistere nello spostare da database a disco parte di queste informazioni.

Per la gestione dello storico delle chiamate lato client, invece, sono state previste le classi \texttt{clientpresenter.kernel.JSCall}, che aderisce al medesimo contratto della sua controparte server, e \texttt{JSCallList}, che rappresenta invece lo storico delle chiamate associato al client su cui risiede il \inglese{presenter}.

  \item{\scshape\bfseries Diagramma delle classi:}
% TODO esportare l'immagine e includerla qui
% \begin{figure}[H]
%   \centering
%   \includegraphics[width=.6\textwidth]{class_gestione_chiamate}
%   \caption{Diagramma delle classi - Gestione chiamate}\label{fig:gestionechiamate}
% \end{figure}

  \item{\scshape\bfseries Classi utilizzate:}\\
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \texttt{call.ICall}
    \item[-] \texttt{call.Call}
    \item[-] \texttt{call.ICallList}
    \item[-] \texttt{call.CallList}
    \item[-] \texttt{org.softwaresythesis.mytalk.clientpresenter.kernel.JSCall}
    \item[-] \texttt{org.softwaresythesis.mytalk.clientpresenter.kernel.JSCallList}
  \end{itemize}
\end{description}

\subsubsection{CS07 -- Façade del server}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
L'interfaccia \texttt{IServerFacade} e la relativa implementazione \texttt{StandardServerFacade}, nella quale si è scelto di applicare il \inglese{design pattern} Singleton, forniscono una sorta di interfaccia alle funzionalità offerte dalla sotto-architettura \texttt{server} ai componenti che risiedono nel client.

Le funzionalità esposte consentono di gestire i messaggi presenti in segreteria, le richieste di comunicazione con altri utenti, l'autenticazione o  la registrazione degli utenti.
	\item{\scshape\bfseries Diagramma delle classi:}
\begin{figure}[H]
  \centering
  \includegraphics[width=.6\textwidth]{class_facade_server}
  \caption{Diagramma delle classi - Façade del server}\label{fig:facade_server}
\end{figure}	
	
	\item{\scshape\bfseries Classi utilizzate:}\\
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \texttt{IServerFacade}
	  \item[-] \texttt{StandardServerFacade}
	\end{itemize}
\end{description}

\subsection{Descrizione delle classi}

\subsubsection{Package \texttt{org.softwaresynthesis.mytalk.server.dao}}

\begin{itemize}[leftmargin=0em]

\item \texttt{IDAOFactory}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Interfaccia della Abstract Factory che contiene operazioni permettono di ottenere un riferimento di tipo statico interfaccia alle classi DAO (cioè \texttt{IMessageDAO}, \texttt{IUserDataDAO}, \texttt{IGroupDAO} e \texttt{ICallDAO}).

Le operazioni astratte contenute in questa interfaccia sono dunque dei Factory Method (ad esempio \texttt{createMessageDAO(): IMessageDAO}) che nelle implementazioni delle \inglese{factory} concrete restituiscono oggetti aventi un tipo dinamico specifico per il DBMS utilizzato.
  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{Gestione database}
    \item[-] \textsf{Gestione chiamate}
    \item[-] \textsf{Gestione segreteria}
    \item[-] \textsf{Gestione rubrica}
  \end{itemize}
\end{description}

\item \texttt{MySQLDAOFactory}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Implementazione dell'interfaccia \texttt{IDAOFactory} specifica per il DBMS MySQL\@. Il tipo dinamico degli oggetti DAO restituiti dalle implementazioni delle operazioni astratte sarà pertanto \texttt{MySQLMessageDAO}, \texttt{MySQLUserDataDao}, \texttt{MySQLGroupDAO} e \texttt{MySQLCallDAO}.
  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS01 -- Gestione database}
    \item[-] \textsf{CS06 -- Gestione chiamate}
    \item[-] \textsf{CS05 -- Gestione segreteria}
    \item[-] \textsf{CS03 -- Gestione rubrica}
  \end{itemize}
\end{description}

\item \texttt{ICallDAO}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Interfaccia che definisce le operazioni per la gestione della persistenza relativa agli oggetti corrispondenti al tipo interfaccia \texttt{call.ICall}.

Le operazioni dichiarate in questa interfaccia corrispondono alle operazioni di inserimento, ricerca univoca tramite chiave primaria, ricerca tramite una serie di parametri, aggiornamento e cancellazione di un \inglese{transfer object} e, conseguentemente, di un record nella tabella corrispondente alle chiamate.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS01 -- Gestione database}
    \item[-] \textsf{CS06 -- Gestione chiamate}
  \end{itemize}
\end{description}

\item \texttt{MySQLCallDao}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Implementazione dell'interfaccia \texttt{ICallDAO} che fornisce una definizione concreta alle operazioni per la gestione della persistenza delle chiamate specifica per il DBMS MySQL\@.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS01 -- Gestione database}
    \item[-] \textsf{CS06 -- Gestione chiamate}
  \end{itemize}
\end{description}

\item \texttt{IMessageDAO}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Interfaccia che definisce le operazioni per la gestione della persistenza relativa agli oggetti corrispondenti al tipo interfaccia \texttt{message.IMessage}.

Le operazioni dichiarate in questa interfaccia corrispondono alle operazioni di inserimento, ricerca univoca tramite chiave primaria, ricerca tramite una serie di parametri, aggiornamento e cancellazione di un \inglese{transfer object} e, conseguentemente, di un record nella tabella corrispondente ai messaggi in segreteria.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS01 -- Gestione database}
    \item[-] \textsf{CS05 -- Gestione segreteria}
  \end{itemize}
\end{description}

\item \texttt{MySQLMessageDAO}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Implementazione dell'interfaccia \texttt{IMessageDAO} che fornisce una definizione concreta alle operazioni per la gestione della persistenza dei messaggi in segreteria specifica per il DBMS MySQL\@.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS01 -- Gestione database}
    \item[-] \textsf{CS05 -- Gestione segreteria}
  \end{itemize}
\end{description}

\item \texttt{IGroupDAO}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Interfaccia che definisce le operazioni per la gestione della persistenza relativa agli oggetti corrispondenti al tipo interfaccia \texttt{abook.IGroup}.

Le operazioni dichiarate in questa interfaccia corrispondono alle operazioni di inserimento, ricerca univoca tramite chiave primaria, ricerca tramite una serie di parametri, aggiornamento e cancellazione di un \inglese{transfer object} e, conseguentemente, di un record nella tabella corrispondente ai gruppi della rubrica.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS01 -- Gestione database}
    \item[-] \textsf{CS03 -- Gestione rubrica}
  \end{itemize}
\end{description}

\item \texttt{MySQLGroupDAO}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Implementazione dell'interfaccia \texttt{IGroupDAO} che fornisce una definizione concreta alle operazioni per la gestione della persistenza dei gruppi di una rubrica utente specifica per il DBMS MySQL\@.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS01 -- Gestione database}
    \item[-] \textsf{CS03 -- Gestione rubrica}
  \end{itemize}
\end{description}

\item \texttt{IUserDataDAO}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Interfaccia che definisce le operazioni per la gestione della persistenza relativa agli oggetti corrispondenti al tipo interfaccia \texttt{abook.IUserData}.

Le operazioni dichiarate in questa interfaccia corrispondono alle operazioni di inserimento, ricerca univoca tramite chiave primaria, ricerca tramite una serie di parametri, aggiornamento e cancellazione di un \inglese{transfer object} e, conseguentemente, di un record nella tabella corrispondente agli utenti del sistema.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS01 -- Gestione database}
    \item[-] \textsf{CS03 -- Gestione rubrica}
  \end{itemize}
\end{description}

\item \texttt{MySQLUserDataDAO}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Implementazione dell'interfaccia \texttt{IUserDataDAO} che fornisce una definizione concreta alle operazioni per la gestione della persistenza dei dati degli utenti specifica per il DBMS MySQL\@.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS01 -- Gestione database}
    \item[-] \textsf{CS03 -- Gestione rubrica}
  \end{itemize}
\end{description}

\item \texttt{HibernateUtil}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Classe che implementa il \inglese{pattern} Singleton e che viene utilizzata dalle classi DAO specifiche per MySQL al fine di ottenere un riferimento alla sessione di connessione al DBMS tramite la quale effettuare le transazioni corrispondenti alle operazioni volte ad assicurare la persistenza dei dati.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS01 -- Gestione database}
  \end{itemize}
\end{description}

\end{itemize}

\subsubsection{Package \texttt{org.softwaresynthesis.mytalk.server.connection}}

\begin{itemize}[leftmargin=0em]

\item \texttt{ICommunicationHandler}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Interfaccia per la gestione delle richieste per ottenere le informazioni necessarie a un client per stabilire una comunicazione con altri client. In particolare le operazioni in essa dichiarate dovranno ritornare un istanza di un oggetto che implementa \texttt{IConnection}.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
		\begin{itemize}[noitemsep,nolistsep]
			\item[-] \textsf{CS02 -- Gestione connessione}
		\end{itemize}
\end{description}

\item \texttt{StandardCommunicationHandler}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Implementazione che si fornisce dell'interfaccia \texttt{ICommunicationHandler}. In tale classe, le informazioni ritornate al client sono informazioni necessarie a stabilire una connessione di tipo \underline{WebRTC} (ritorna un istanza di \texttt{WebRTCInfo}).

	\item{\scshape\bfseries Componenti che ne fanno uso:}
		\begin{itemize}[noitemsep,nolistsep]
			\item[-] \textsf{CS02 -- Gestione connessione}
		\end{itemize}
\end{description}

\item \texttt{IConnection}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Interfaccia mediante la quale è possibile recuperare  i dati necessari a un client al fine di stabilire una connessione con un altro client, in particolare l'indirizzo IP e la porta.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
		\begin{itemize}[noitemsep,nolistsep]
			\item[-] \textsf{CS02 -- Gestione connessione}
			\item[-] \textsf{CP01 -- Gestione comunicazione}
		\end{itemize}
\end{description}

\item \texttt{WebRTCInfo}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Implementazione dell'interfaccia \texttt{IConnection} che rappresenta le informazioni usate da un client per stabilire una connessione WebRTC con un altro client.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
		\begin{itemize}[noitemsep,nolistsep]
			\item[-] \textsf{CS02 -- Gestione connessione}
		\end{itemize}
\end{description}

\end{itemize}

\subsubsection{Package \texttt{org.softwaresynthesis.mytalk.server.abook}}

\begin{itemize}[leftmargin=0em]

\item \texttt{IAddressBook}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Interfaccia che raccoglie le operazioni sulla rubrica di un utente e permette di controllare l'accesso alle strutture dati che la implementano ad esempio al fine di recuperare l'insieme dei contatti, dei gruppi e dei contatti in \inglese{blacklist}.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CS03 -- Gestione rubrica}
	  \item[-] \textsf{CS01 -- Gestione database}
	\end{itemize}
\end{description}

\item \texttt{AddressBook}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Classe che implementa l'interfaccia \texttt{IAddressBook} e rappresenta quindi la rubrica associata a un determinato utente. Permette di accedere ai contatti di cui si compone e ai gruppi, ivi compresa la \inglese{blacklist} di un utente.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CS03 -- Gestione rubrica}
	\end{itemize}
\end{description}

\item \texttt{IUserData}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Interfaccia per le classi che rappresentano gli utenti, è dotata di operazioni get/set per accedere ai dati degli utenti registrati sul sistema.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CS03 -- Gestione rubrica}
	  \item[-] \textsf{CS01 -- Gestione database}
	  \item[-] \textsf{CS02 -- Gestione connessione}
	\end{itemize}
\end{description}

\item \texttt{UserData}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Classe \inglese{transfer object} che implementa l'interfaccia \texttt{IUserData} le cui istanze corrispondono ai record della tabella degli utenti nel database. È caratterizzata dai campi dati che corrispondono alle proprietà degli utenti (email, password, domanda segreta e relativa risposta, nome, cognome e immagine personale).

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
		\item[-] \textsf{CS03 -- Gestione rubrica}
	  \item[-] \textsf{CS04 -- Gestione stato}
	\end{itemize}
\end{description}

\item \texttt{IGroup}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Interfaccia per i gruppi interni alla rubrica, prevede un'operazione astratta \texttt{add(IUserData)} per l'aggiunta di un nuovo contatto al gruppo e un'operazione \texttt{remove(IUserData)} per la sua rimozione di un contatto dal gruppo. Contiene anche i metodi get/set per impostare o recuperare il nome di un gruppo.

	\item{\scshape\bfseries Componenti che ne fanno uso:} 
	  \begin{itemize}[noitemsep,nolistsep]
	    \item[-] \textsf{CS03 -- Gestione rubrica}
	    \item[-] \textsf{CS01 -- Gestione database}
	  \end{itemize}
\end{description}

\item \texttt{Group}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Implementazione dell'interfaccia \texttt{IGroup}, che costituisce anche il \inglese{transfer object} per i gruppi di una rubrica utente. Ogni gruppo è dotato di un nome e raccoglie in sé zero o più istanze di classi sottotipo di \texttt{abook.IUserData}.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	  \begin{itemize}[noitemsep,nolistsep]
	    \item[-] \textsf{CS03 -- Gestione rubrica}
	  \end{itemize}
\end{description}

\end{itemize}

\subsubsection{Package \texttt{org.softwaresynthesis.mytalk.server.state}}

\begin{itemize}[leftmargin=0pt]

\item \texttt{IState}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Interfaccia padre della gerarchia di stati che gli utenti possono assumere nel corso dell'interazione con il sistema. La composizione delle istanze di \texttt{abook.UserData} con oggetti sottotipo di \texttt{IState} cui inoltrano le richieste ricevute dall'esterno permette di cambiare dinamicamente il comportamento degli oggetti che rappresentano gli utenti.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CS04 -- Gestione stato}
	  \item[-] \textsf{CS02 -- Gestione connessione}
	\end{itemize}
\end{description}

\item \texttt{StateOnline}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Classe astratta che implementa l'interfaccia \texttt{IState} e viene estesa da tutti gli stati che corrispondono alla presenza \inglese{online} dell'utente. È ulteriormente specializzata dalle sottoclassi concrete \texttt{StateAvailable} e \texttt{StateOccupied}, le quali hanno facoltà di determinare il reale comportamento degli utenti \inglese{online}.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CS04 -- Gestione stato}
	\end{itemize}
\end{description}

\item \texttt{StateOffline}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Classe concreta della gerarchia degli stati che implementa l'interfaccia \texttt{IState} e corrisponde alla mancata presenza online dell'utente che la possiede. Un utente che si trova nello stato ``\inglese{offline}'' non può essere contattato direttamente ma solo attraverso la segreteria telefonica.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CS04 -- Gestione stato}
	\end{itemize}
\end{description}

\item \texttt{StateAvailable}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Classe concreta della gerarchia degli stati che corrisponde alla presenza \inglese{online} di un utente e alla sua disponibilità ad accettare comunicazioni in ingresso.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
    \begin{itemize}[noitemsep,nolistsep]
      \item[-] \textsf{CS04 -- Gestione stato}
    \end{itemize}
\end{description}

\item \texttt{StateOccupied}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Classe concreta della gerarchia degli stati che corrisponde alla mancata disponibilità di un utente a ricevere ulteriori comunicazioni in ingresso dal momento che si trova impegnato in un'altra conversazione. Gli utenti che si trovano in questo stato non possono essere contattati direttamente ma solo attraverso la possibilità di lasciare un messaggio in segreteria.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CS04 -- Gestione stato}
	\end{itemize}
\end{description}

\end{itemize}

\subsubsection{Package \texttt{org.softwaresynthesis.mytalk.server.message}}

\begin{itemize}[leftmargin=0pt]

\item \texttt{IMessageBox}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Interfaccia che rappresenta la segreteria telefonica dell'utente cui è associata. Tramite opportune operazioni permette di accedere all'elenco dei messaggi audio o audio/video che l'utente ha ricevuto nel periodo in cui era in linea o non era disponibile perché impegnato in una conversazione.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}
	  \item[-] \textsf{CS05 -- Gestione segreteria}
	\end{itemize}
\end{description}

\item \texttt{MessageBox}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Classe concreta che implementa l'interfaccia \texttt{IMessageBox} e rappresenta dunque la rubrica associata a un determinato utente.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CS05 -- Gestione segreteria}
	\end{itemize}
\end{description}

\item \texttt{IMessage}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Interfaccia che dichiara le operazioni astratte (get/set) necessarie ad accedere alle proprietà di un messaggio in segreteria (in particolare: mittente, destinatario, stato del messaggio e data di registrazione).

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS05 -- Gestione segreteria}
    \item[-] \textsf{CS01 -- Gestione database}
  \end{itemize}
\end{description}

\item \texttt{Message}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Classe \inglese{transfer object} che rappresenta un messaggio di natura audio o audio/video nella segreteria telefonica di un utente e implementa l'interfaccia \texttt{IMessage}.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	  \begin{itemize}[noitemsep,nolistsep]
	    \item[-] \textsf{CS05 -- Gestione segreteria}
	  \end{itemize}
\end{description}

\end{itemize}

\subsubsection{Package \texttt{org.softwaresynthesis.mytalk.server.call}}

\begin{itemize}[noitemsep,nolistsep]

\item \texttt{ICall}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Interfaccia che contiene le operazioni astratte di accesso ai dati (metodi get/set) che caratterizzano le chiamate, vale a dire il chiamante, l'insieme degli utenti chiamati nonché la data e l'ora di avvio e di terminazione della chiamata.
  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS06 -- Gestione chiamate}
    \item[-] \textsf{CS01 -- Gestione database}
  \end{itemize}
\end{description}

\item \texttt{Call}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Classe \inglese{transfer object} che rappresenta le chiamate realizzate attraverso il sistema e implementa l'interfaccia \texttt{ICall}.
  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS06 -- Gestione chiamate}
  \end{itemize}
\end{description}

\item \texttt{ICallList}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Interfaccia che permette di interrogare la collezione di oggetti che costituisce lo storico delle chiamate di un utente fornendo opportuni sistemi di scorrimento.
  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS06 -- Gestione chiamate}
  \end{itemize}
\end{description}

\item \texttt{CallList}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Implementazione dell'interfaccia \texttt{ICallList}, permette di accedere alla lista delle chiamate che hanno coinvolto un utente sia in qualità di chiamante che di chiamato.
  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CS06 -- Gestione chiamate}
  \end{itemize}
\end{description}

\end{itemize}

\subsubsection{Package \texttt{org.softwaresynthesis.mytalk.server}}

\begin{itemize}[leftmargin=0em]

\item \texttt{IServerFacade}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Interfaccia che contiene tutte le operazioni richieste dai componenti della sotto-architettura \texttt{clientpresenter} inerenti alla registrazione, all'autenticazione,  alla gestione della rubrica e della segreteria nonché delle connessioni con altri utenti.

In quest'ultimo caso le operazioni richieste vengono a loro volta inoltrate al componente responsabile della gestione della connessione (\texttt{server.connection.IConnectionHandler}).
	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CS07 -- Façade del server}
	  \item[-] \textsf{CP01 -- Gestione comunicazione}
	\end{itemize}
\end{description}

\item \texttt{StandardServerFacade}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Questa classe Singleton è l'implementazione dell'interfaccia \texttt{IServerFacade} e contiene, in particolare, i metodi che rendono concrete le operazioni corrispondenti ai Factory Method dichiarati nell'interfaccia citata (per la gestione dei messaggi in segreteria e degli utenti nella rubrica).
	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CS07 -- Façade del server}
	\end{itemize}
\end{description}

\end{itemize}

\begin{figure}[H]
  \centering
  \includegraphics[width=1\textwidth]{server_generale}
  \caption{Diagramma delle classi - Architettura \texttt{mytalk.server}}\label{fig:server_generale}
\end{figure}
\clearpage

\section{Architettura \texttt{mytalk.clientpresenter}}\label{sec:clientpresenter}
La sotto-architettura \texttt{clientpresenter}, nasce con lo scopo di imporre una separazione tra la logica di gestione di un client e l'interfaccia grafica visualizzata all'utente finale.

Dal momento che il \inglese{presenter} ha la responsabilità di ricevere i comandi utente dalla vista e di sovrintendere all'aggiornamento della stessa, è prevista anche la presenza di una serie di oggetti necessari a gestire l'interazione con la vista, corrispondenti al componente \textsf{Gestione GUI}.

Dal momento che per l'interazione con l'utente sono previste molteplici viste, è stato predisposto un \inglese{presenter} per ognuna di queste. Ogni vista detiene un riferimento al proprio \inglese{presenter} cui vengono inviate le richieste su risposta dell'interazione con l'utente, in quanto le operazioni del \inglese{presenter} sono impostate come funzioni di \inglese{callback} nell'interfaccia grafica.

D'altro canto, i vari \inglese{presenter} interagiscono con le viste grazie alla conoscenza di una ``interfaccia'' per la loro manipolazione, in quanto tramite JavaScript è possibile intervenire sul \underline{DOM}\@. Tali considerazioni sono conformi all'utilizzo del \inglese{design pattern} MVP.\footnote{%
  Per una descrizione più dettagliata del \inglese{pattern} MVP si rimanda alla sezione \ref{sec:MVP}\@.
}

Questo componente ha inoltre il compito di recuperare i dati presenti sul server relativi alla rubrica di un utente, la sua segreteria telefonica e lo storico delle chiamate che lo interessano. I diversi \inglese{presenter} del componente \textsf{Gestione GUI} hanno dunque anche il compito di interrogare il server al fin di procurarsi le informazioni con cui popolare l'interfaccia grafica utente.

Questi sono rappresentati dalle strutture del componente \textsf{Rappresentazione dati} e permangono internamente al \inglese{presenter} per essere disponibili a successive interrogazioni da parte della GUI senza coinvolgere nuovamente il server.

Inoltre, allo scopo di gestire le comunicazioni in ingresso dal server, ad esempio le notifiche dei cambiamenti di stato o le chiamate in ingresso, è stato predisposto il componente \textsf{Gestione remota}.

La logica di comunicazione fra client è incapsulata all'interno delle classi facenti parte del componente \textsf{Gestione comunicazione}. Queste ultime sfruttano la comunicazione con il server, tramite opportune procedure di interrogazione attraverso il componente \textsf{Façade del server}, al fine di ottenere le informazioni necessarie per stabilire una connessione fra client.

In sintesi, la sotto-architettura \texttt{clientpresenter} dispone dei seguenti componenti:
\begin{itemize}[noitemsep,nolistsep]
	\item[-] \textsf{CP01 -- Gestione comunicazione};
	\item[-] \textsf{CP02 -- Rappresentazione dati};
	\item[-] \textsf{CP03 -- Gestione GUI};
	\item[-] \textsf{CP04 -- Gestione remota};
\end{itemize}
che saranno descritte con maggiori dettagli nella sezione successiva.

Si ricorda sin da ora che i nomi di tutte le interfacce e tutte le classi riportate nella sezione sono implicitamente parte del package \texttt{org.softwaresynthesis.mytalk.clientpresenter} pertanto tale prefisso sarà omesso nella loro denominazione.

Nella progettazione ad alto livello è stato scelto di non tenere in considerazione il dominio tecnologico dell'applicativo, che non prevede la presenza di classi e interfacce. In questa sede, la progettazione sarà influenzata unicamente dalle specifiche e dai principi della programmazione orientata agli oggetti.

Tale scelta è motivata dalle seguenti considerazioni:
\begin{itemize}
   \item l'utilizzo dei \inglese{pattern} architetturali necessita a monte di uno stile di progettazione ad oggetti;
   \item così facendo è garantita la possibilità di riuso del risultato progettazione architetturale sotto altri domini tecnologici.
\end{itemize}

La presenza delle interfacce, delle relazioni di implementazione e l'estensione fra classi saranno pertanto mantenute.

\subsection{Componenti evidenziati}

\subsubsection{CP01 -- Gestione comunicazione}

\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
È il componente che definisce i client con cui sta comunicando o con cui desidera comunicare l'utente. Tale componente è costituito da un'interfaccia \texttt{kernel.IClient} che rappresenta un modello di client con cui interagire (possibilità di stabilire una connessione, possibilità di estendere una comunicazione e possibilità di verificare se il client è Supernodo).

Il componente \textsf{Gestione comunicazione} ha inoltre il compito di procurarsi le informazioni relative alla propria connessione, contattando ad esempio un server STUN, per avere la conoscenza del proprio indirizzo IP\@. Quest'ultimo deve essere comunicato al server in fase di autenticazione, al fine di permettere l'avvio di connessioni in ingresso.

Quando un determinato utente (mittente) desidera stabilire una comunicazione con un altro utente (destinatario), il client associato al mittente ha il compito innanzitutto di farsi restituire dal server le informazioni necessarie ad instaurare la connessione.

	\item{\scshape\bfseries Diagramma delle classi:}
  \begin{figure}[H]
    \centering
    \includegraphics[width=.8\textwidth]{gestione_comunicazione}
    \caption{Diagramma delle classi - Gestione comunicazione}\label{fig:gestionecomunicazione}
  \end{figure}

	\item{\scshape\bfseries Classi utilizzate:} 
	\begin{itemize}[noitemsep,nolistsep]
		\item[-] \texttt{kernel.IClient}
		\item[-] \texttt{kernel.Client}
	\end{itemize}  
\end{description}

\subsubsection{CP02 -- Rappresentazione dati}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Le classi di questo componente hanno il compito di rappresentare sotto forma di apposite strutture dati le informazioni ottenute dall'interrogazione del modello dei dati e ricevute in forma serializzata a seguito delle richieste al server.

La disponibilità di queste informazioni sul client permette una più agevole rappresentazione dell'interfaccia grafica per gli oggetti del componente \textsf{Gestione GUI} ed evita nuove interrogazioni al server qualora i dati in possesso da parte del \inglese{presenter} siano ancora validi.

I dati rappresentati in forma di oggetti sono necessari, in particolare, per la gestione della segreteria, dello storico delle chiamate e della rubrica lato client.

  \item{\scshape\bfseries Diagramma delle classi:}\\
%TODO questo diagramma deve essere generato ed esportato
%   \begin{figure}[H]
%     \centering
%     \includegraphics[width=.8\textwidth]{rappresentazione_dati}
%     \caption{Diagramma delle classi - Rappresentazione dati}\label{fig:rappresentazionedati}
%   \end{figure}

	\item{\scshape\bfseries Classi utilizzate:} 
	\begin{itemize}[noitemsep,nolistsep]
		\item[-] \texttt{kernel.JSCall}
		\item[-] \texttt{kernel.JSGroup}
		\item[-] \texttt{kernel.JSMessage}
		\item[-] \texttt{kernel.JSUserData}
		\item[-] \texttt{kernel.JSAddressBook}
		\item[-] \texttt{kernel.JSMessageBox}
    \item[-] \texttt{kernel.JSCallList}
	\end{itemize}  
\end{description}

\subsubsection{CP03 -- Gestione GUI}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Il componente ha il duplice ruolo di intercettare gli eventi che scaturiscono dall'interazione dell'utente con la GUI e di controllare l'aggiornamento della stessa a seguito dei cambiamenti che intervengono sul modello dei dati.

Le istanze di sottotipi di \texttt{guicontrol.MainPanelPresenter} comprendono dunque, oltre ad alcune operazioni comuni (ad es. per l'inizializzazione o per la comparsa/scomparsa dell'elemento grafico associato), tutte le funzioni di \inglese{callback} richiamate dall'interfaccia grafica.

D'altro canto, dal momento che questo componente è responsabile anche delle modifiche alle viste, le sottoclassi di \texttt{guicontrol.MainPanelPresenter} contengono anche le operazioni richiamate dall'esterno per l'aggiornamento dinamico della GUI\@.

La struttura delle classi che lo compongono mostra una corrispondenza biunivoca con gli elementi grafici presentati nella sezione~\ref{sec:gui} con un \inglese{presenter} per ognuno dei pannelli, cui si aggiunge un oggetto istanza di \texttt{guicontrol.PresenterMediator}. Quest'ultimo incapsula la collaborazione fra i vari \inglese{presenter} e permette di gestire gli eventi generati da un elemento della GUI inviando a uno (o più) \inglese{presenter} i messaggi corrispondenti alle azioni da compiere.

	\item{\scshape\bfseries Diagramma delle classi:}\\
%TODO questo diagramma deve essere generato ed esportato
%   \begin{figure}[H]
%     \centering
%     \includegraphics[width=.8\textwidth]{gestione_gui}
%     \caption{Diagramma delle classi - Rappresentazione dati}\label{fig:gestionegui}
%   \end{figure}

	\item{\scshape\bfseries Classi utilizzate:}\\
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \texttt{guicontrol.AccountSettingsPanelPresenter}
	  \item[-] \texttt{guicontrol.AddressBookPanelPresenter}
	  \item[-] \texttt{guicontrol.CallHistoryPanelPresenter}
	  \item[-] \texttt{guicontrol.CommunicationPanelPresenter}
	  \item[-] \texttt{guicontrol.ContactPanelPresenter}
	  \item[-] \texttt{guicontrol.LanguagePanelPresenter}
	  \item[-] \texttt{guicontrol.MainPanelPresenter}
		\item[-] \texttt{guicontrol.MessagePanelPresenter}
		\item[-] \texttt{guicontrol.PresenterMediator}
	  \item[-] \texttt{guicontrol.ToolsPanelPresenter}
	\end{itemize}
\end{description}

\subsubsection{CP04 -- Gestione remota}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Rappresenta l'interfaccia d'accesso verso la sotto-architettura \texttt{clientpresenter}, in particolare per i componenti presenti nel \texttt{server}. La presenza di tale componente svincola il server dal dover conoscere l'esatta sequenza di chiamata dei metodi per portare a conseguimento una determinata procedura in quanto le classi del componente \textsf{Gestione remota} hanno la cognizione dell'iter di chiamate a metodo per portare a termine correttamente le operazioni richieste dall'esterno.

Un esempio di richiesta proveniente dal server che richiede di essere gestita in questa sede è la reazione al cambiamento di stato di un utente presente nella rubrica del client, che si traduce in una notifica in entrata dal server e ha un effetto sull'interfaccia grafica.

Un altro esempio è la ricezione di una chiamata in ingresso, dal momento che la precondizione per stabilire una comunicazione via WebRTC è che il chiamato dia l'autorizzazione per stabilire la comunicazione.

	\item{\scshape\bfseries Diagramma delle classi:}
\begin{figure}[H]
\centering
  \includegraphics[width=.8\textwidth]{facade_presenter}
  \caption{Diagramma delle classi - Gestione remota}\label{fig:facade_presenter}
\end{figure}

	\item{\scshape\bfseries Classi utilizzate:} 
	\begin{itemize}[noitemsep,nolistsep]
		\item[-] \texttt{kernel.IRemoteHandler}
		\item[-] \texttt{kernel.RemoteHandler}
	\end{itemize}
\end{description}

\subsection{Descrizione delle classi}

\subsubsection{Package \texttt{org.softwaresynthesis.mytalk.clientpresenter.kernel}}

\begin{itemize}[leftmargin=0em]

\item \texttt{IClient}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Interfaccia che raccoglie le operazioni astratte che devono essere effettuate dal client del sistema.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP01 -- Gestione comunicazione}
	\end{itemize}
\end{description}

\item \texttt{Client}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Implementazione dell'interfaccia \texttt{IClient} che incapsula al suo interno la logica di eventuale ritrasmissione dei dati in ingresso (nel caso in cui il client sia un Supernodo) e di invio dei dati prodotti in locale ai client con cui è stata instaurata una connessione. 

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP01 -- Gestione comunicazione}
	\end{itemize}
\end{description}

\item \texttt{JSCall}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Tale classe modella una chiamata appartenente allo storico dell'utente corrente (dove risiede il \inglese{presenter}), e permette di accedere alle informazioni caratteristiche quali il mittente, l'insieme dei destinatari, la durata e la data di inizio della chiamata, sia essa di natura audio oppure audio/video.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP02 -- Rappresentazione dati}
	  \item[-] \textsf{CS06 -- Gestione chiamate}
	\end{itemize}
\end{description}

\item \texttt{JSGroup}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Classe avente il compito di modellare un gruppo nella rubrica dell'utente corrente; in particolare, ogni gruppo possiede un nome e contiene al proprio interno zero o più contatti.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP02 -- Rappresentazione dati}
	  \item[-] \textsf{CS03 -- Gestione rubrica}
	\end{itemize}
\end{description}

\item \texttt{JSMessage}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Classe che rappresenta un messaggio presente nella segreteria dell'utente corrente. I diversi \inglese{presenter} del componente Gestione GUI possono accedere al mittente del messaggio, allo stato del messaggio (ascoltato o non ascoltato), alla natura del messaggio (audio o audio/video), alla durata e, in ultima istanza, al contenuto del messaggio.

Tale valore non è inizializzato allo scaricamento iniziale dei messaggi sul client, in quanto il contenuto audio o audio/video è recuperato dal server in un secondo momento solo quando è effettivamente necessario per evitare di sovraccaricare la rete senza motivi reali.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP02 -- Rappresentazione dati}
	  \item[-] \textsf{CS05 -- Gestione segreteria}
	\end{itemize}
\end{description}

\item \texttt{JSUserData}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Classe avente il compito di rappresentare i contatti della rubrica lato \inglese{presenter}, generato serializzando esclusivamente la parte che si vuole trasmettere ai client delle istanze del \inglese{transfer object} descritto in precedenza (\texttt{org.softwaresynthesis.mytalk.server.abook.UserData}).

In particolare, di un utente-contatto è possibile ottenere lo \inglese{username}, i dati anagrafici (nome e cognome) nonché l'immagine associata al profilo personale, laddove queste ultime tre informazioni sono da considerarsi facoltative e potrebbero non essere disponibili per un determinato utente.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP02 -- Rappresentazione dati}
	  \item[-] \textsf{CS03 -- Gestione rubrica}
	\end{itemize}
\end{description}

\item \texttt{JSCallList}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Classe che ha il compito di rappresentare la collezione di chiamate che corrisponde allo storico delle comunicazioni audio o audio/video di un determinato utente. È creata a seguito di una richiesta da \texttt{guicontrol.CallHistoryPanelPresenter} ed interrogata al fine di ottenere i dati che devono essere visualizzati nell'interfaccia grafica.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP02 -- Rappresentazione dati}
	  \item[-] \textsf{CS06 -- Gestione chiamate}
	\end{itemize}
\end{description}

\item \texttt{JSMessageBox}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Rappresentazione della segreteria telefonica di un determinato utente e che viene creata a seguito di una richiesta proveniente da \texttt{guicontrol.MessagePanelPresenter} e interrogata da quest'ultimo al fine di creare il contenuto della UI\@.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP02 -- Rappresentazione dati}
	\end{itemize}
\end{description}

\item \texttt{JSAddressBook}
\begin{description}
  \item{\scshape\bfseries Descrizione:}\\
Classe che ha il compito di rappresentare la rubrica associata a un determinato utente e che viene creata a seguito di una richiesta proveniente da \texttt{guicontrol.AddressBookPanelPresenter} e interrogata al fine di popolare l'interfaccia grafica con i dati corrispondenti alla rubrica utente.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP02 -- Rappresentazione dati}
	\end{itemize}
\end{description}

\item \texttt{IRemoteHandler}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Interfaccia che raccoglie la dichiarazione di tutte le operazioni astratte con cui si suppone che il server realizzi lo scambio di messaggi con il \inglese{presenter}. La sequenza di operazioni da eseguire che interessano i componenti del \inglese{presenter} (ad esempio \textsf{Gestione GUI} o \textsf{Gestione comunicazione}) saranno incapsulate nell'implementazione delle operazioni contenute in questa interfaccia.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP01 -- Gestione remota}
	  \item[-] \textsf{CS04 -- Gestione stato}
	\end{itemize}
\end{description}

\item \texttt{RemoteHandler}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Questa classe rappresenta un'applicazione del \inglese{design pattern} Singleton e implementa inoltre l'interfaccia \texttt{IRemoteHandler}. Fornisce dei metodi concreti utilizzati per ricevere le notifiche proveniente dal server, elaborando qualora necessario i dati ricevuti in input e inoltrando le richieste agli oggetti facenti parte dei diversi componenti del \inglese{presenter}.

Ad esempio, nel caso di una notifica di comunicazione in ingresso è necessario contattare il componente \textsf{Gestione comunicazione} al fine di recuperare l'indirizzo IP pubblico del client attraverso un server STUN e quindi comunicarlo al server. In tal caso, inoltre, è necessario aggiornare l'interfaccia grafica attraverso \textsf{Gestione GUI} per consentire all'utente di accettare la chiamata in ingresso.

Nel caso di un aggiornamento di stato di un contatto presente in rubrica, invece, è necessario modificare l'interfaccia grafica in modo da rispecchiare i cambiamenti avvenuti e quindi anche in questo caso è necessario inoltrare la richiesta al componente \textsf{Gestione GUI}.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP01 -- Gestione remota}
	\end{itemize}
\end{description}

\end{itemize}

\subsubsection{Package \texttt{org.softwaresynthesis.mytalk.clientpresenter.guicontrol}}
\begin{itemize}[noitemsep,nolistsep]

\item \texttt{guicontrol.AccountSettingsPanelPresenter}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP03 -- Gestione GUI}
	\end{itemize}
\end{description}

\item \texttt{guicontrol.AddressBookPanelPresenter}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Tale \inglese{presenter} viene richiamato dall'elemento grafico corrispondente al pannello della rubrica (\texttt{org.softwaresynthesis.mytalk.clientview.gui.AddressBookPanel}) e contiene la risposta a eventi quali la selezione di un contatto dalla rubrica da parte dell'utente. Contiene inoltre un'operazione di \inglese{refresh} che visualizza una lista di contatti ricevuta in input in forma grafica sulla UI\@.

Il \inglese{presenter} in questione rende inoltre possibile avviare una ricerca fra gli utenti registrati nel sistema nonché rilevare che l'operazione di ricerca è conclusa (e conseguentemente visualizzare nuovamente la rubrica). Inoltre comprende anche le funzioni di \inglese{callback} per alcune operazioni di amministrazione sulla rubrica, come la creazione e l'eliminazione di un gruppo.

I dati corrispondenti alla rubrica, ovvero le corrispondenti istanze di classi definite in \textsf{Rappresentazione dati}, se non sono presenti sul client devono essere recuperati dal server ed è responsabilità di questa classe contattare il \textsf{Façade del Server} al fine di ottenere le informazioni necessarie.

Infine, in modo simile sono comunicati al server gli esiti delle operazioni di amministrazione sulla rubrica che hanno un effetto sulle informazioni di modello.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP03 -- Gestione GUI}
	  \item[-] \textsf{CV01 -- GUI}
	\end{itemize}
\end{description}

\item \texttt{guicontrol.CallHistoryPanelPresenter}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Questo \inglese{presenter} gestisce l'elemento corrispondente al pannello dello storico delle chiamate presente nell'interfaccia grafica, permettendo la visualizzazione di un array di chiamate corrispondenti alle comunicazioni di un determinato utente.Poiché il componente grafico supervisionato è totalmente passivo, non sono presenti operazioni di \inglese{callback} da associare alle componenti grafiche vere e proprie.

Qualora i dati corrispondenti allo storico delle chiamate non fossero disponibili sul client che ospita questo \inglese{presenter} è inoltre responsabilità di quest'ultimo interrogare il server (attraverso il componente \textsf{Façade del server}) al fine di ottenere le informazioni necessarie.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP03 -- Gestione GUI}
	  \item[-] \textsf{CV01 -- GUI}
	\end{itemize}
\end{description}

\item \texttt{guicontrol.CommunicationPanelPresenter}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Tale \inglese{presenter} si occupa della gestione del componente grafico corrispondente al pannello di comunicazione fra utenti. In particolare, comprende le operazioni necessarie all'aggiornamento della grafica corrispondente alle chat testuali e alle condivisioni, nonché alla visualizzazione dello \inglese{stream} video nel corso di una comunicazione audio/video o dell'immagine associata al profilo utente nel caso di una sola comunicazione audio.

Le principali funzioni di \inglese{callback} utilizzate dall'interfaccia grafica presenti in questa classe corrispondono alla possibilità di interrompere una chiamata in corso, avviare/interrompere una condivisone di risorse, avviare/interrompere una registrazione, visualizzare/nascondere le aree di chat (che sono indipendenti dalla comunicazione corrente).

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP03 -- Gestione GUI}
	  \item[-] \textsf{CV01 -- GUI}
	\end{itemize}
\end{description}

\item \texttt{guicontrol.ContactPanelPresenter}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Tale \inglese{presenter} ha la responsabilità di controllare l'aggiornamento della sezione dell'interfaccia grafica incaricata di visualizzare il profilo di un utente in risposta alla selezione dalla rubrica o dall'esito di una ricerca.

Poiché, inoltre, a partire da tale componente grafico è possibile avviare una comunicazione, tale classe comprende al proprio interno anche le funzioni che devono essere richiamate in risposta all'azione da parte dell'utente di dare avvio a una comunicazione.

Poiché da \texttt{org.softwaresynthesis.mytalk.clientview.gui.ContactPanel} è possibile anche svolgere alcune attività di amministrazione della rubrica utente, in questo \inglese{presenter} sono presenti anche le funzioni di \inglese{callback} necessarie per l'aggiunta e la rimozione di un contatto particolare ad un gruppo, nonché per l'aggiunta di contatto alla rubrica se il suo profilo è stato aperto a seguito di una ricerca fra gli utenti registrati nel sistema.

Dal momento che, infine, tali operazioni di amministrazione hanno un effetto sulle entità del modello dei dati che risiedono sul server, tale classe ha la responsabilità di notificare gli aggiornamenti sul server al fine di mantenere la consistenza delle informazioni.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP03 -- Gestione GUI}
	  \item[-] \textsf{CV01 -- GUI}
	\end{itemize}
\end{description}

\item \texttt{guicontrol.LanguagePanelPresenter}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Il \inglese{presenter} in questione ha il compito di popolare il contenuto dell'elemento grafico corrispondente al pannello di configurazione della UI e, in particolare, della lingua in cui questa viene visualizzata.

Contiene un'unica operazione di \inglese{callback} per la grafica, che riceve la selezione dell'utente e propaga le modifiche tramite il \texttt{PresenterMediator} a tutti i \inglese{presenter} associati alle componenti grafiche. Non ammette invece alcuna operazione di aggiornamento della GUI in quanto gli elementi da visualizzare sono noti al momento dell'inizializzazione e non subiscono modifiche ulteriori a tempo di esecuzione.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP03 -- Gestione GUI}
	  \item[-] \textsf{CV01 -- GUI}
	\end{itemize}
\end{description}

\item \texttt{guicontrol.MainPanelPresenter}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Classe base per i \inglese{presenter} associati ai diversi componenti dell'interfaccia grafica. Contiene i metodi necessari all'inizializzazione di questi ultimi nonché i controlli che ne attivano la comparsa o scomparsa in risposta alle preferenze di visualizzazione dell'utente. Inoltre, contiene un riferimento a \texttt{PresenterMediator} per la collaborazione tra tutti i \inglese{presenter}, che è ereditato da questi ultimi in quanto sottoclassi.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP03 -- Gestione GUI}
	  \item[-] \textsf{CV01 -- GUI}
	\end{itemize}
\end{description}

\item \texttt{guicontrol.MessagePanelPresenter}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Tale \inglese{presenter} contiene le operazioni necessarie a visualizzare l'elenco dei messaggi presenti nella segreteria telefonica di un determinato utente.

Poiché a partire dalla vista associata è possibile avviare/arrestare la riproduzione di un messaggio, questo oggetto deve contenere opportune funzioni di \inglese{callback} per rispondere alle richieste dell'utente in tal senso. La cancellazione di un messaggio, corrispondente al requisito RUFF15.4.0, è anch'essa possibile attraverso un'operazione di questo \inglese{presenter}, così come il cambiamento di stato del messaggio una volta che viene ascoltato.

È prevista inoltre la possibilità di aggiornamento del componente grafico, in quanto la ricezione di nuovi messaggi può avvenire anche se l'utente è in linea (ad esempio se questi è impegnato in un'altra conversazione).

Qualora i dati corrispondenti alla segreteria telefonica di un utente non fossero disponibili sul client, è responsabilità di questa classe interrogare il server al fine di ottenere le informazioni necessarie nonché istanziare le opportune classi di \textsf{Rappresentazione dati}.

Infine, per le operazioni che hanno effetto sulla rappresentazione del modello dei dati sul server, quali la cancellazione di un messaggio o il cambiamento di stato di un messaggio, devono essere notificati al server attraverso il componente \textsf{Façade del server}.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP03 -- Gestione GUI}
	  \item[-] \textsf{CV01 -- GUI}
	\end{itemize}
\end{description}

\item \texttt{guicontrol.PresenterMediator}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
L'istanza di tale classe ha il compito di gestire le collaborazioni fra i diversi \inglese{presenter} associati alle viste dell'interfaccia grafica e smistare i messaggi che questi si devono scambiare. A tale scopo, è necessario che tutti i \inglese{presenter} si registrino su di essa in modo da poter ricevere le successive richieste tramite chiamata di metodo. Inoltre, questi ultimi detengono (o ereditano) un riferimento all'istanza del mediatore cui notificano gli eventi di interesse.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP03 -- Gestione GUI}
	  \item[-] \textsf{CP04 -- Gestione remota}
	\end{itemize}
\end{description}

\item \texttt{guicontrol.ToolsPanelPresenter}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Tramite tale \inglese{presenter} è possibile inizializzare la barra laterale degli strumenti rappresentata da \texttt{org.softwaresynthesis.mytalk.clientview.gui.ToolsPanel}. Gli aggiornamenti cui tale porzione della vista è soggetta consistono nella visualizzazione/scomparsa di uno o più strumenti su richiesta dell'utente e per ognuno di questi è prevista la presenza di un'operazione.

D'altra parte, gli eventi scatenati dall'interazione dell'utente con il pannello degli strumenti che comportano la modifica dell'elemento mostrato nella regione centrale al posto del pannello principale, sono raccolti da questo \inglese{presenter} e le corrispondenti richieste sono inoltrate al \texttt{PresenterMediator} per la corretta gestione. In questo modo è possibile far comparire il pannello di gestione dei dati personali corrispondenti al proprio account, della segreteria, lo storico delle chiamate e la selezione della lingua.

Poiché inoltre da (\texttt{org.softwaresynthesis.mytalk.clienview.gui.ToolsPanel} è possibile impostare il proprio stato, il \inglese{presenter} ad esso associato contiene le funzioni che notificano l'avvenuto cambiamento di stato al componente \textsf{Façade del server}.

	\item{\scshape\bfseries Componenti che ne fanno uso:}
	\begin{itemize}[noitemsep,nolistsep]
	  \item[-] \textsf{CP03 -- Gestione GUI}
	  \item[-] \textsf{CV01 -- GUI}
	\end{itemize}
\end{description}

\end{itemize}

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{package_presenter}
  \caption{Diagramma delle classi - Architettura \texttt{mytalk.clientpresenter}}\label{fig:package_presenter}
  \end{figure}
\clearpage

\section{Architettura \texttt{mytalk.clientview}}\label{sec:clientview}
Come già accennato in precedenza, nella sezione \ref{sec:introdesign} e \ref{sec:clientpresenter}, \texttt{clientview} ha il compito di definire la struttura di visualizzazione dei dati costituendo la GUI del sistema lato client.

Le motivazioni che hanno portato a separare tale sotto-architettura dalla parte logica sono da ricercare nei vantaggi di riutilizzo del codice e semplificazione della manutenzione:
\begin{itemize}
 	\item \textbf{future espansioni}: innanzitutto tale scelta permetterà ai progettisti di sviluppare (in futuro) molteplici tipologie di ``viste'', implementabili liberamente svincolando i programmatori dal conoscere al dettaglio la logica sottostante per la gestione delle comunicazioni.
 	\item \textbf{semplificare la manutenzione}: così come scrivere da zero una nuova vista, anche modificare quelle già presenti risulta essere più facile, per gli stessi motivi descritti al punto precedente.
\end{itemize}

La sotto-architettura \texttt{clientview} rappresenta quindi una vista di \inglese{default} fornita dal team, con lo scopo di rappresentare in modo chiaro ed organizzato le possibilità di iterazione, da parte dell'utente finale, con l'applicativo \caName.

Nell'utilizzare tale vista l'utente non avrà la percezione di come sia stata progettata l'architettura totale del sistema, svincolandolo cosi dal dover conoscere le procedure necessarie all'esecuzione di una determinata operazione.

In figura \ref{fig:gui} si riporta un abbozzo dell'interfaccia grafica utente realizzata mediante le classi di questa sotto-architettura. In conformità con quanto stabilito dai requisiti (RSDO10.0.0) l'interfaccia si sviluppa in un'unica pagina.

\begin{figure}[h]
  \centering
  \includegraphics[width=.9\textwidth]{GUI}
  \caption{Rappresentazione ad alto livello della GUI}\label{fig:gui}
\end{figure}

Per quanto riguarda la componentistica, la sotto-architettura \texttt{clientview} è costituita da:
\begin{itemize}[noitemsep,nolistsep]
	\item[-] \textsf{CV01 -- GUI}
\end{itemize}
per le specifiche del quale si rimanda alla sezione successiva. I nomi di tutte le classi riportate nella presente sezione sono inoltre implicitamente parte del package \texttt{org.softwaresynthesis.mytalk.clientview}, pertanto tale prefisso sarà omesso nella loro denominazione.

Analogamente a quanto osservato per la sotto-architettura \texttt{clientpresenter}, la rappresentazione tramite classi e oggetti è utilizzata a livello prettamente logico indipendentemente dal dominio applicativo concreto di implementazione.

In riferimento alla bozza di interfaccia utente presentata in figura \ref{fig:gui}, la parte denominata \texttt{AddressBookPanel} conterrà la lista degli utenti nella rubrica, mentre \texttt{ToolsPanel} conterrà i componenti grafici che rappresentano tutte le funzionalità offerte dal sistema. 

Il contenuto del \texttt{MainPanel}, invece, è destinato in relazione alla funzionalità scelta dall'utente in quel momento. Ad esempio, qualora l'utente selezioni un contatto presente nella rubrica, verrà visualizzato il profilo corrispondente al contatto scelto in \texttt{ContactPanel}, mentre nel caso in cui si attiva una forma di comunicazione, sarà visibile la parte grafica di un'istanza di \texttt{CommunicationPanel}.

\subsection{Componenti evidenziati}

\subsubsection{CV01 -- GUI}\label{sec:gui}
\begin{description}
	\item{\scshape\bfseries Descrizione:}\\
Questo componente si occupa della presentazione dell'interfaccia grafica presentata all'utente finale. Le classi in esso contenute servono pertanto per la visualizzazione dei punti di accesso alle funzionalità offerte dal sistema all'utente.

Si noti che tale componente demanda tutta la logica di applicazione al \inglese{presenter} ed è quindi relativo solo ed esclusivamente alla grafica. Tutti i pannelli, che corrispondono ad altrettante viste, hanno pertanto un canale di comunicazione aperto con il \inglese{presenter} loro associato, e gli eventi generati dall'utente devono essere gestiti collegando l'evento alle opportune funzioni di \inglese{callback} offerte dai \inglese{presenter}.

	\item{\scshape\bfseries Diagramma delle classi:}
Il diagramma non è riportato perché, coincidendo le classi di questo componente con l'unico package della sotto-architettura \texttt{clientview}, esso verrebbe ad essere identico a quello presentato in \vref{fig:classclientiew}. Si rimanda pertanto a quest'ultimo per la rappresentazione UML del componente GUI\@.
	
	\item{\scshape\bfseries Classi utilizzate:} 
	\begin{itemize}[noitemsep,nolistsep]
		\item[-] \texttt{gui.MainPanel}
		\item[-] \texttt{gui.ToolsPanel}
		\item[-] \texttt{gui.AddressBookPanel}
		\item[-] \texttt{gui.ContactPanel}
		\item[-] \texttt{gui.MessagePanel}
		\item[-] \texttt{gui.LanguagePanel}
		\item[-] \texttt{gui.AccountSettingsPanel}
		\item[-] \texttt{gui.CallHistoryPanel}
		\item[-] \texttt{gui.CommunicationPanel}
	\end{itemize}  
\end{description}

\subsection{Descrizione delle classi}

\subsubsection{Package \texttt{org.softwaresynthesis.clientview.gui}}

\begin{itemize}[leftmargin=0em]

\item \texttt{AddressBookPanel}
\begin{description}
  \item{\scshape\bfseries Descrizione}\\
Pannello che permette la visualizzazione della rubrica dell'utente connesso al sistema, e di accedere ad alcune delle funzionalità di amministrazione della rubrica stessa (ad esempio l'aggiunta o la rimozione di gruppi).

In questo pannello sono anche presenti le funzionalità di ricerca fra gli utenti presenti nel sistema, con la visualizzazione dei risultati della ricerca al posto della lista dei contatti presenti in rubrica.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CV01 -- GUI}
  \end{itemize}
\end{description}

\item \texttt{MainPanel}
\begin{description}
  \item{\scshape\bfseries Descrizione}\\
Classe padre della gerarchia di oggetti grafici che possono comparire nella sezione principale dell'interfaccia utente. La parte comune a tutte le sottoclassi permette all'utente di impostare il proprio stato e di uscire dall'applicazione. Ogni sua specializzazione definisce un nuovo tipo di pannello che costituisce l'elemento in primo piano dell'applicazione.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CV01 -- GUI}
  \end{itemize}
\end{description}

\item \texttt{ToolsPanel}
\begin{description}
  \item{\scshape\bfseries Descrizione}\\
Classe che rappresenta il pannello degli strumenti della \inglese{home screen} dell'applicativo, mediante il quale è possibile accedere alle funzionalità di ricerca, di segreteria telefonica, selezione della lingua, modifica dei dati dell'utente e storico delle chiamate.

All'occorrenza il pannello può essere messo in secondo piano e non essere più visibile per intero nella finestra principale. Inoltre, in questo pannello è visualizzato lo stato corrente dell'utente ed è possibile modificarlo per passare da ``occupato'' a ``disponibile'' o per disconnettersi e passare a ``\inglese{offline}''.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CV01 -- GUI}
  \end{itemize}
\end{description}

\item \texttt{ContactPanel}
\begin{description}
  \item{\scshape\bfseries Descrizione}\\
Sottoclasse di \texttt{MainPanel} utilizzata per rappresentare il profilo di un utente. Solo accedendo quest'ultimo sarà possibile avviare una comunicazione con l'utente. Il contatto viene visualizzato selezionando l'utente dalla rubrica oppure tra i risultati di una ricerca.

Attraverso questo pannello è inoltre possibile effettuare alcune operazioni di amministrazione sulla rubrica: aggiungere o rimuovere un utente ad uno dei gruppi della propria rubrica, bloccare un contatto o, se il profilo visualizzato corrisponde a un utente che non appartiene alla rubrica personale, aggiungerlo ad essa.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CV01 -- GUI}
  \end{itemize}
\end{description}

\item \texttt{MessagePanel}
\begin{description}
  \item{\scshape\bfseries Descrizione}\\
Questa sottoclasse di \texttt{MainPanel} permette di accedere all'elenco dei messaggi in segreteria di un determinato utente e ne permette la gestione. La visualizzazione si attiva quando viene premuto il relativo pulsante mostrato dall'istanza di \texttt{ToolsPanel}.

Tramite questo elemento grafico è possibile anche riprodurre il contenuto di un messaggio, dopo che quest'ultimo è stato scaricato dal server (se non era già presente in memoria), arrestarne la riproduzione oppure cancellarlo se non si desidera che venga conservato.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CV01 -- GUI}
  \end{itemize}
\end{description}

\item \texttt{LanguagePanel}
\begin{description}
  \item{\scshape\bfseries Descrizione}\\
Questa sottoclasse di \texttt{MainPanel} è impiegata per permettere da parte dell'utente finale la selezione della lingua desiderata. La visualizzazione del pannello avviene in seguito all'attivazione del pulsante corrispondente situato nel pannello degli strumenti.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CV01 -- GUI}
  \end{itemize}
\end{description}

\item \texttt{AccountSettingsPanel}
\begin{description}
  \item{\scshape\bfseries Descrizione}\\
Questa classe è utilizzata per rappresentare il \underline{\inglese{form}} che si presenta all'utente per la modifica dei propri dati. Costituisce inoltre una sottoclasse di \texttt{MainPanel} e viene visualizzata quando l'utente preme il relativo pulsante nel pannello degli strumenti.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CV01 -- GUI}
  \end{itemize}
\end{description}

\item \texttt{CallHistoryPanel}
\begin{description}
  \item{\scshape\bfseries Descrizione}\\
Questa classe estende \texttt{MainPanel} e viene impiegata per rappresentare lo storico delle chiamate visualizzato quando l'utente attiva il pulsante corrispondente presente nel \texttt{ToolsPanel}. Oltre alla visualizzazione dello storico delle chiamate non è prevista alcuna forma di interazione attiva con l'utente.

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CV01 -- GUI}
  \end{itemize}
\end{description}

\item \texttt{CommunicationPanel}
\begin{description}
  \item{\scshape\bfseries Descrizione}\\
Tale componente grafico si attiva nel momento in cui è stata avviata una forma di comunicazione, sia essa audio, audio/video oppure testuale. Per le comunicazioni audio e audio/video consente la visualizzazione dell'immagine associata al profilo dei destinatari oppure dei relativi \inglese{stream} video e permette di visualizzare le risorse condivise.

Inoltre, tale entità grafica prevede anche la presenza di una o più aree di chat che non corrispondono necessariamente alla comunicazione in corso (perché è possibile avere più comunicazioni testuali in parallelo fra loro e con una comunicazione multimediale).

  \item{\scshape\bfseries Componenti che ne fanno uso:}
  \begin{itemize}[noitemsep,nolistsep]
    \item[-] \textsf{CV01 -- GUI}
  \end{itemize}
\end{description}

\end{itemize}

\begin{figure}[H]
  \centering
  \includegraphics[width=1\textwidth]{Package_view}
  \caption{Diagramma delle classi - Architettura \texttt{mytalk.clientview}}\label{fig:classclientiew}
\end{figure}
\clearpage

\section{Design pattern utilizzati}
In conformità con quanto stabilito nella sezione 7.2 del documento \textit{norme\_di\_progetto.3.0.pdf}, per ognuno dei \inglese{design pattern} sono riportati lo scopo, un diagramma esemplificativo e una descrizione del contesto di applicazione del \inglese{pattern} all'interno di una componente di sistema, evidenziando in particolar modo i vantaggi derivati.

Per una visione d'insieme dei componenti utilizzati da un \inglese{pattern}, e dei \inglese{pattern} utilizzati da un componente, rimandiamo alle sottosezioni ``Tracciamenti Componenti-Design Pattern'' e ``Tracciamenti Design Pattern-Componenti'' della sezione \vref{sec:tracciamenti}.

\subsection{Abstract Factory}
\subsubsection{Scopo}
Il \inglese{pattern} fornisce un'interfaccia per la creazione di famiglie di oggetti correlati, senza specificare le classi concrete ma garantendo un utilizzo coerente di prodotti appartenenti allo stesso insieme.

\subsubsection{Diagramma esemplificativo}
%TODO questo diagramma deve essere ancora fatto!
% \begin{figure}[h]
% \centering
% \includegraphics[width=.8\textwidth]{abstractfactory}
% \caption{Diagramma ad alto livello del \inglese{pattern} Abstract Factory}\label{fig:abstractfactory}
% \end{figure}

\subsubsection{Componenti che lo implementano}
\begin{description}
  \item{\bfseries\scshape Gestione database}\\
Il componente Gestione database sfrutta la presenza di un'interfaccia \texttt{IDAOFactory} le cui operazioni restituiscono i tipi interfaccia necessari per la gestione della persistenza dei dati (\texttt{IMessageDAO}, \texttt{IGroupDAO}, \texttt{ICallDAO} e \texttt{IUserDataDAO}).

È quindi fornita un'implementazione della \inglese{factory} specifica per MySQL, mediante la quale è possibile ottenere le classi DAO in cui le implementazioni delle operazioni di inserimento, modifica e cancellazione sono specifiche per tale DBMS\@.

Il vantaggio dell'utilizzo di Abstract Factory è che permette la creazione di un insieme omogeneo di oggetti specifici per MySQL che necessitano di essere utilizzati nello stesso contesto, senza però limitare la possibilità di future espansioni perché creando nuovi set di prodotti e nuove \inglese{factory} è possibile ottenere un altro insieme di oggetti da utilizzare insieme.
\end{description}

\subsection{Data Access Object (DAO)}

\subsubsection{Scopo}
Il \inglese{pattern} DAO ha lo scopo di disaccoppiare la logica di \inglese{business} dalla logica di accesso ai dati. Questo si ottiene spostando la logica di accesso ai dati dai componenti di \inglese{business} stessi ad una classe DAO ad hoc per il DBMS scelto, rendendo i componenti che implementano la \inglese{business logic} indipendenti dalla natura del dispositivo di persistenza.

Un simile approccio garantisce che un eventuale cambiamento del dispositivo di persistenza non comporti modifiche sui componenti di \inglese{business}.

\subsubsection{Diagramma esemplificativo}
  \begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{dao}
  \caption{Diagramma ad alto livello del \inglese{pattern} Data Access Object}\label{fig:dao}
\end{figure}

\subsubsection{Componenti che lo implementano}
\begin{description}
\item{\scshape\bfseries CS01 -- Gestione database}\\
Le classi DAO consentono di isolare l'accesso alle tabelle del database dalla parte di \inglese{business logic} corrispondente alle entità TO, incapsulando in metodi di alto livello le operazioni sui record del database sottostante.

Operando una distinzione di questo tipo, gli utenti esterni possono considerare gli oggetti che richiedono la mappatura nel database alla stregua di normali oggetti Java (POJO) senza preoccuparsi del meccanismo di persistenza dei dati.
\end{description}

\subsection{Façade}

\subsubsection{Scopo}
Fornire un'interfaccia unificata per un insieme di interfacce o classi presenti in una sotto-architettura. Façade definisce inoltre un'interfaccia di livello più alto che rende la sotto-architettura più semplice da utilizzare.

\subsubsection{Diagramma esemplificativo}
\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{facade}
  \caption{Diagramma ad alto livello del \inglese{pattern} Façade}\label{fig:façade}
\end{figure}

\subsubsection{Componenti che lo implementano}
\begin{description}
  \item{\scshape\bfseries CS07 -- Façade del server}\\
L'uso di Façade permette di esporre verso i client una sorta di interfaccia semplificata nascondendo i componenti della sotto-architettura \texttt{server}, fornendo un punto di accesso centralizzato e riducendo il numero di dipendenze funzionali fra le classi del server e i componenti appartenenti a sotto-architetture esterne.

\end{description}

\subsection{Factory Method}

\subsubsection{Scopo}
Definisce un'interfaccia per la creazione di un oggetto, lasciando alle sottoclassi la decisione sulla classe concreta che deve essere istanziata e consente di deferire l'istanziazione di una classe alle sottoclassi.

\subsubsection{Diagramma esemplificativo}
\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{factory_method}
  \caption{Diagramma ad alto livello del \inglese{pattern} Factory Method}\label{fig:factory_method}
\end{figure}

\subsubsection{Componenti che lo implementano}
\begin{description}
  \item{\scshape\bfseries CS07 -- Façade del server}\\
Factory Method permette ai client di ottenere con facilità degli oggetti simili a \inglese{proxy} che siano conformi ai contratti stabiliti dalle interfacce \texttt{server.message.IMessage} e \texttt{server.abook.IUserData}.

Questo permette di ridurre il traffico di rete in quanto oggetti potenzialmente di grandi dimensioni rimangono sul server e vengono scaricati solo quando se ne presenta l'effettiva necessità nonché di proteggere i dati presenti sul server (in quanto non tutte le operazioni get/set hanno effetto sui contatti utente).

  \item{\scshape\bfseries CS02 -- Gestione connessione}\\
Gli oggetti che rappresentano connessioni, sottotipi di \texttt{server.connection.IConnection} sono ottenuti mediante un Factory Method nelle classi concrete che implementano l'interfaccia \texttt{server.connection.ICommunicationHandler}.

Ciò garantisce maggiore flessibilità in quanto permette in futuro di gestire più categorie di \inglese{handler} che restituiscono diversi tipi connessione.
\end{description}

\subsection{Model-View-Presenter}\label{sec:MVP}

\subsubsection{Scopo}
Il pattern architetturale \inglese{Model-View-Presenter} similmente a quanto accade per \inglese{Model-View-Controller} (MVC), ha lo scopo di mantenere separata la \inglese{business logic}, cioè la gestione dei dati secondo le regole di un determinato dominio e la loro memorizzazione in forma persistente, dalla presentazione e manipolazione mediante interfaccia utente.

\subsubsection{Diagrammi esemplificativi}
\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{mvpHLdiagram}
  \caption{Diagramma ad alto livello del \inglese{pattern} MVP}\label{fig:mvpHL}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=\textwidth]{diagrammasequenzaMVP}
  \caption{Diagramma di sequenza che illustra le collaborazioni in MVP}\label{fig:mvpSD}
\end{figure}

Come si evince dal diagramma riportato in figura \ref{fig:mvpSD} le interazioni avvengono solo tra \inglese{view} e \inglese{presenter} oppure tra \inglese{presenter} e \inglese{model}, senza che avvenga mai uno scambio di dati diretto fra \inglese{model} e \inglese{view}.

Ciò si deve al fatto che la \inglese{business logic} e il modello dei dati risiedono nel server mentre il \inglese{presenter} e la \inglese{view} sono situati nel client. Quando un utente richiede un servizio tramite l'interfaccia grafica, la richiesta viene inoltrata dalla \inglese{view} al \inglese{presenter}.

Qualora quest'ultimo fosse in grado di soddisfare tale richiesta con le risorse di cui dispone, i dati sono restituiti immediatamente alla \inglese{view} senza alcun bisogno di richiedere l'intervento del server. Nel caso, invece, in cui il \inglese{presenter} non fosse in grado di servire autonomamente la \inglese{view}, interrogherebbe il server al fine di ottenere i dati da restituire alla componente grafica.

Il vantaggio di un simile schema di interazione consiste nella riduzione del traffico di rete e nel conseguente incremento delle prestazioni in termini di velocità e, di conseguenza, dell'esperienza utente in generale.

\subsubsection{Componenti che lo implementano}
MVP viene utilizzato come il pattern più ad alto livello del nostro sistema. La distinzione fra \inglese{model}, \inglese{presenter} e \inglese{view} è infatti rispecchiata dalla suddivisione del sistema nelle tre sotto-architetture \texttt{server}, \texttt{clientpresenter} e \texttt{clientview}.

In generale, l'utilizzo di MVP riduce l'accoppiamento tra le sotto-architetture minimizzando le modifiche richieste a ognuno di essi come conseguenza di cambiamenti all'interno degli altri.

Inoltre, i componenti di questa sotto-architettura non sono vincolati a utilizzare la rete per accedere alle informazioni che sono memorizzate sul server quando queste sono già disponibili (e possono essere elaborate) sul client, migliorando quindi l'esperienza utente.

In particolare, le componenti del sistema che prendono parte alle collaborazioni previste dal \inglese{pattern} MVP sono
\begin{description}
  \item{\scshape\bfseries CS01 -- Gestione database}\\
Componente che ha il ruolo di gestire la persistenza dei dati sul server.

  \item{\textsc{\bfseries CS06 -- Gestione chiamate}, \textsc{\bfseries Gestione rubrica} e \textsc{\bfseries Gestione segreteria}}\\
Contengono le rappresentazioni delle entità della \inglese{business logic} lato server, che devono essere interrogate per ricavare le informazioni necessarie ai client in forma opportuna.

  \item{\scshape\bfseries CS07 -- Façade del server}\\
Componente del server interessato dalla ricezione delle richieste da parte dei \inglese{presenter}, recupera le informazioni di cui questi ultimi necessitano e le restituisce in forma serializzata e compatiblie con il dominio applicativo dei client.

  \item{\scshape\bfseries CP04 -- Gestione remota}\\
Intercetta le comunicazioni entranti verso il client a partire dal server che non hanno origine in una richiesta esplicita da parte del client come, ad esempio, gli aggiornamenti di stato dei diversi utenti o le chiamate in ingresso.
  
  \item{\scshape\bfseries CP03 -- Gestione GUI}\\
Riceve i comandi dalla vista ed è responsabile del suo aggiornamento e dell'interrogazione del server.

  \item{\scshape\bfseries GUI}\\
Corrisponde alla vista ed è accessibile al \inglese{presenter} tramite le DOM API di JavaScript.
\end{description}

\subsection{Observer}

\subsubsection{Scopo}
Definire una dipendenza uno a molti fra oggetti, in modo tale che se un oggetto cambia il suo stato tutti gli oggetti dipendenti da questo siano notificati e aggiornati automaticamente.

\subsubsection{Diagramma esemplificativo}
\begin{figure}[H]
  \centering
  \includegraphics[width=.7\textwidth]{observer}
  \caption{Diagramma ad alto livello del \inglese{pattern} Observer}\label{fig:observer}
\end{figure}

\subsubsection{Componenti che lo implementano}
\begin{description}
  \item{\scshape\bfseries CS04 -- Gestione stato}\\
Il pattern Observer è utile in quanto permette agli utenti di osservare lo stato degli altri, ricevendo in modo automatico e trasparente una notifica nel caso in cui uno di questi ultimi subisse variazioni, essendo ogni utente sia osservato che osservatore.

Al momento della connessione, infatti, ogni utente si registra come osservatore sui suoi contatti che sono online e, al contempo, li aggiunge tra i propri osservatori. In tal modo gli utenti notificano in \inglese{broadcast} le loro variazioni di stato e sono sempre aggiornati sullo stato dei contatti della loro rubrica.
\end{description}

\subsection{Singleton}

\subsubsection{Scopo}
Il pattern creazionale Singleton, garantisce che una determinata classe possa essere istanziata una sola volta, e di fornirne un punto di accesso globale. Questo \inglese{pattern} va utilizzato negli ambiti in cui si ha la necessità che l'accesso ad una determinata entità sia unico, in modo da permettere la gestione ottimale della risorsa stessa.

\subsubsection{Diagramma esemplificativo}
\begin{figure}[H]
\centering
\includegraphics[width=.5\textwidth]{singleton}
\caption{Diagramma ad alto livello del \inglese{pattern} Singleton}\label{fig:singleton}
\end{figure}

\subsubsection{Componenti che lo implementano}
\begin{description}
  \item{\scshape\bfseries CS01 -- Gestione database}\\
La classe \texttt{server.dao.HibernateUtil} è implementata come Singleton dal momento che si desidera che in ogni momento ne sia attiva un'unica istanza. Tramite i metodi che essa mette a disposizione, le classi DAO sono in grado di procurarsi un riferimento alla sessione di connessione al DBMS al fine di effettuare le transazioni di cui necessitano.
  
  \item{\scshape\bfseries CS02 -- Gestione connessione}\\
La classe \texttt{server.connection.StandardCommunicationHandler} è implementata come Singleton in modo da centralizzare la responsabilità di creare nuove connessioni in risposta alle esigenze dei client.

  \item{\scshape\bfseries CS07 -- Façade del server}\\
Il \inglese{pattern} Singleton pone un limite superiore stretto al numero di istanze che possono esistere di una determinata classe e perciò è utile utilizzarlo per poter controllare il numero di oggetti \texttt{server.StandardServerFacade} che in questo caso è pari a uno. L'unicità del Façade garantisce la presenza di un solo punto di accesso alle funzionalità della sotto-architettura \texttt{server}.

  \item{\scshape\bfseries CP04 -- Gestione remota}\\
Il \inglese{pattern} Singleton è altresì utile per controllare il numero di istanze attive della classe \texttt{clientpresenter.kernel.RemoteHandler} per gli stessi motivi evidenziati in precedenza, ossia l'unicità del punto di accesso alle funzionalità della sotto-architettura \texttt{clientpresenter}.

\end{description}

\subsection{State}

\subsubsection{Scopo}
Permette ad un oggetto di cambiare il suo comportamento al variare del suo stato interno, quindi a \inglese{runtime}. L'oggetto si comporterà come se avesse cambiato la sua classe.

\subsubsection{Diagramma esemplificativo}
\begin{figure}[H]
  \centering
  \includegraphics[width=.7\textwidth]{state}
  \caption{Diagramma ad alto livello del \inglese{pattern} State}\label{fig:state}
\end{figure}

\subsubsection{Componenti che lo implementano}
\begin{description}
\item{\scshape\bfseries CS04 -- Gestione stato}\\
Il \inglese{pattern} State permette di gestire gli utenti del sistema determinando un comportamento diverso per questi ultimi a seconda del loro stato.

È stata definita un'apposita gerarchia di stati che permette quindi di specializzare nella maniera più adatta alle necessità del sistema le operazioni sugli utenti senza bisogno di condizionali annidati.
\end{description}
\clearpage

\section{Diagrammi delle attività}
In questa sezione saranno descritti i diagrammi di attività che rappresentano il flusso di utilizzo dei vari servizi messi a disposizione dal prodotto \caName.

\subsection{Diagramma di attività generale}

Il diagramma in figura \vref{fig:ADhome} rappresenta il flusso principale dell'applicazione \caName. Innanzitutto, l'accesso alle funzionalità del sistema è vincolato allo svolgimento con successo dell'azione di autenticazione, illustrata con maggiori dettagli nel diagramma di sotto-attività \vref{fig:ADautenticazione}.

\begin{figure}[H]
\centering
\includegraphics[width=.8\textwidth]{home}
\caption{Diagramma di attività generale che descrive l'interazione con il sistema}\label{fig:ADhome}
\end{figure}

A seguito dell'autenticazione, diviene possibile scegliere una fra le azioni di amministrazione, vale a dire
\begin{itemize}[noitemsep,nolistsep]
  \item[-] scelta lingua GUI;
  \item[-] gestione segreteria (illustrata dal diagramma \ref{fig:ADgestionesegreteria});
  \item[-] gestione rubrica (illustrata dal diagramma \ref{fig:ADgestionerubrica});
  \item[-] gestione account (illustrata dal diagramma \ref{fig:ADgestioneaccount});
  \item[-] gestione dello stato personale;
\end{itemize}
oppure di consultazione informazioni, in particolare:
\begin{itemize}[noitemsep,nolistsep]
  \item[-] visualizzazione dello storico delle chiamate;
  \item[-] visualizzazione della rubrica;
  \item[-] ricerca di un utente.
\end{itemize}

A partire infine dalla visualizzazione del profilo di un utente, cui è possibile accedere tanto tramite una ricerca quanto dall'elenco dei contatti in rubrica, è possibile dare inizio a una comunicazione (diagramma \vref{fig:ADconnessione}).

\subsection{Diagrammi di attività Autenticazione}
Il diagramma riportato in figura \vref{fig:ADautenticazione} illustra la sotto-attività di autenticazione di un utente al sistema. A partire dalla schermata iniziale è possibile inserire le proprie credenziali di accesso al sistema se ne si è provvisti, richiederle se è la prima volta che si effettua l'accesso al sistema (avviando la procedura di registrazione riportata in figura \ref{fig:ADregistrazione}) oppure recuperarle (sotto-attività in figura \vref{fig:ADrecuperopassword}).

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{autenticazione}
  \caption{Diagramma di attività relativo all'autententicazione}\label{fig:ADautenticazione}
\end{figure}

\subsubsection{Diagramma di attività Registrazione}
In dettaglio, la registrazione di un utente al sistema (fig.~\vref{fig:ADregistrazione}) prevede l'inserimento di una serie di dati alcuni dei quali obbligatori (indirizzo email, password, domanda segreta e relativa risposta) e altri facoltativi (nome, cognome e immagine del profilo). Al termine della procedura di registrazione l'utente dispone di un account personale e delle credenziali di accesso allo stesso.

\begin{figure}[H]
  \centering
  \includegraphics[width=.6\textwidth]{registrazione}
  \caption{Diagramma di attività relativo alla registrazione}\label{fig:ADregistrazione}
\end{figure}

\subsubsection{Diagramma di attività Recupero password}
Il recupero della password (fig.~\vref{fig:ADrecuperopassword}) prevede invece l'inserimento dell'email, la visualizzazione della domanda segreta impostata in fase di creazione dell'account e l'inserimento della relativa risposta. In caso di risposta corretta si ha il termine della sotto-attività con l'invio dei dati richiesti via email, in caso contrario la procedura deve essere ripetuta.

\begin{figure}[H]
  \centering
  \includegraphics[width=.6\textwidth]{recupero_pass}
  \caption{Diagramma di attività relativo al recupero della password}\label{fig:ADrecuperopassword}
\end{figure}

\subsection{Diagramma di attività Gestione rubrica}
La sotto-attività di gestione (diagramma in fig.~\vref{fig:ADgestionerubrica}) della rubrica prevede l'accesso a due classi di azioni, a seconda che sia o meno richiesta da parte dell'utente una conferma esplicita per il completamento dell'attività.

In particolare, la prima categoria di azioni comprende:
\begin{itemize}[noitemsep,nolistsep]
  \item[-] l'aggiunta di un contatto alla rubrica;
  \item[-] l'ordinamento della rubrica;
  \item[-] l'eliminazione di un contatto;
  \item[-] la ricerca di un contatto;
  \item[-] l'inserimento di un contatto in un gruppo;
\end{itemize}
mentre la seconda categoria raggruppa azioni quali:
\begin{itemize}[noitemsep,nolistsep]
  \item[-] l'eliminazione di un gruppo;
  \item[-] la modifica di un gruppo;
  \item[-] l'importazione della rubrica da un file locale in formato XML;
  \item[-] l'esportazione della rubrica personale in un file XML.
\end{itemize}

La risposta affermativa alla domanda di conferma in seguito alla scelta di un'azione della seconda categoria porta alla conclusione della sotto-attività, mentre una risposta negativa comporta la scelta di una nuova azione amministrativa.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{gestione_rub_pers}
  \caption{Diagramma di attività relativo alla gestione della rubrica personale}\label{fig:ADgestionerubrica}
\end{figure}

\subsection{Diagramma di attività Gestione account personale}
La gestione dell'account personale (fig.~\vref{fig:ADgestioneaccount}) comporta in primo luogo la visualizzazione di una schermata che mette a disposizione le operazioni disponibili, quindi la scelta di una di queste ultime. Le azioni che possono essere effettuate sono, in particolare:
\begin{itemize}[noitemsep,nolistsep]
  \item[-] modifica della password utente;
  \item[-] modifica dei dati anagrafici;
  \item[-] modifica dell'immagine del profilo;
  \item[-] modifica della domanda segreta e/o della relativa risposta per il recupero della password.
\end{itemize}

Al termine dell'operazione è prevista la visualizzazione di una domanda di conferma e, in caso di risposta affermativa da parte dell'utente, la modifica va a buon fine. In caso contrario, l'operazione non sortisce alcun effetto e si ritorna alla possibilità di scegliere l'azione amministrativa da effettuare.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{gestione_account_pers}
  \caption{Diagramma di attività relativo alla gestione dei dati dell'account personale}\label{fig:ADgestioneaccount}
\end{figure}

\subsection{Diagramma di attività Gestione segreteria}
La gestione della segreteria prevede la scelta fra le seguenti azioni:
\begin{itemize}[noitemsep,nolistsep]
 \item[-] ascoltare un messaggio della segreteria;
 \item[-] cancellare un messaggio;
 \item[-] impostare lo stato (ascoltato/non ascoltato) di un messaggio;
\end{itemize}

Compiere una di queste azioni comporta l'uscita dalla sotto-attività ma l'esecuzione di più di una di queste azioni in sequenza è comunque possibile grazie al \inglese{merge} antecedente l'azione ``Visualizza attività'' nel diagramma di attività generale riportato in figura \vref{fig:ADhome}.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{gestione_segreteria}
  \caption{Diagramma di attività relativo alla gestione della segretria}\label{fig:ADgestionesegreteria}
\end{figure}

\subsection{Diagrammi di attività Connessione}
L'utente ha inoltre la possibilità di connettersi con altri utenti tramite l'attività di connessione.

Come si evince dal diagramma riportato in figura \vref{fig:ADconnessione}, la comunicazione con un utente dipende intrinsecamente dallo stato in cui si trova: se questo è \inglese{offline} oppure \inglese{online} ma occupato, può essere raggiunto in maniera indiretta solo tramite la segreteria telefonica (diagramma \ref{fig:ADmessegreteria}), mentre se l'utente è disponibile può essere contattato immediatamente.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{connessione}
  \caption{Diagramma di attività relativo alla connessione}\label{fig:ADconnessione}
\end{figure}

Esistono tre tipologie di comunicazione a seconda del mezzo utilizzato:
\begin{itemize}[noitemsep,nolistsep]
  \item[-] audio (illustrata nel diagramma in fig.~\ref{fig:ADcomaudio});
  \item[-] audio/video (diagramma in fig.~\ref{fig:ADcomaudiovideo});
  \item[-] testuale (diagramma in fig.~\ref{fig:ADcomtestuale});
\end{itemize}


Tutte e tre le tipologie di connessione prevedono la condivisione di risorse, secondo le modalità riportate in figura \ref{fig:ADcondrisorse}. Inoltre, nel corso di una comunicazione di tipo audio oppure audio/video è possibile registrare una chiamata, secondo me modalità riportate in figura \ref{fig:ADregistrachiamata} nonché visualizzare le statistiche sulla comunicazione corrente (diagramma in fig.~\vref{fig:ADstatistiche}).

\subsubsection{Diagramma di attività Comunicazione audio}
La comunicazione audio (fig.~\vref{fig:ADcomaudio}) prevede la possibilità svolgimento di più azioni in parallelo, in particolare la registrazione, la condivisione di risorse, una comunicazione testuale e la visualizzazione delle statistiche sulla comunicazione in corso. Inoltre, a discrezione dell'utente, una comunicazione audio può essere promossa in una comunicazione audio/video oppure può essere estesa a nuovi partecipanti.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{com_audio}
  \caption{Diagramma di attività relativo alla comunicazione audio}\label{fig:ADcomaudio}
\end{figure}

\subsubsection{Diagramma di attività Comunicazione audio/video}
La comunicazione audio/video (fig.~\vref{fig:ADcomaudiovideo}) prevede la possibilità svolgimento di più azioni in parallelo, in particolare la registrazione, la condivisione di risorse, una comunicazione testuale e la visualizzazione delle statistiche sulla comunicazione in corso. Inoltre, a discrezione dell'utente, una comunicazione audio/video può essere declassata in una comunicazione audio semplice oppure può essere estesa a nuovi partecipanti.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{com_audiovideo}
  \caption{Diagramma di attività relativo alla comunicazione audio/video}\label{fig:ADcomaudiovideo}
\end{figure}

\subsubsection{Diagramma di attività Comunicazione testuale}
La comunicazione testuale, come illustrato dal diagramma riportato in figura \vref{fig:ADcomtestuale} può avvenire in parallelo con una condivisione di risorse, può essere promossa a comunicazione audio o audio/video e può essere estesa a più partecipanti. Non è prevista, durante una comunicazione testuale, la possibilità di visualizzare statistiche sulla comunicazione o di registrare la stessa in forma persistente.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{com_testuale}
  \caption{Diagramma di attività relativo alla comunicazione testuale}\label{fig:ADcomtestuale}
\end{figure}

\subsubsection{Diagramma di attività Condivisione di risorse}
La sotto-attività di condivisione (fig.~\vref{fig:ADcomtestuale}) di risorse comporta la possibilità di scegliere se condividere un file PDF, un file oppure lo schermo con gli altri partecipanti ad una comunicazione audio, audio/video oppure testuale.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{condividi_ris}
  \caption{Diagramma di attività relativo alla condivisione di risorse}\label{fig:ADcondrisorse}
\end{figure}

\subsubsection{Diagramma di attività Registrazione chiamata}
La registrazione di una chiamata (fig.~\vref{fig:ADregistrachiamata}), sotto-attività cui è possibile accedere solo durante una comunicazione audio oppure audio/video, comporta innanzitutto l'inoltro di una richiesta di registrazione agli altri partecipanti della chiamata. Se si ottiene il consenso da parte di tutti, la registrazione ha inizio e prosegue fino a che non viene esplicitamente terminata. Se invece almeno uno degli utenti coinvolti non dà il proprio consenso alla registrazione, questa non può avere luogo.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{registrazione_chiamata}
  \caption{Diagramma di attività relativo alla registrazione della chiamata}\label{fig:ADregistrachiamata}
\end{figure}

\subsubsection{Diagramma di attività Statistiche comunicazione}
Nel corso di una comunicazione multimediale è possibile visualizzare una serie di informazioni (fig.~\vref{fig:ADstatistiche})fra cui:
\begin{itemize}[noitemsep,nolistsep]
  \item[-] il numero di byte inviati e ricevuti;
  \item[-] la velocità di trasmissione;
  \item[-] la latenza della connessione;
  \item[-] il numero di fps (nel caso delle sole comunicazioni video).
\end{itemize}

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{statistiche_com}
  \caption{Diagramma di attività relativo alla visualizzazione delle statistiche della comunicazione}\label{fig:ADstatistiche}
\end{figure}

\subsubsection{Diagramma di attività Messaggio in segreteria}
In conclusione, si ricorda che è possibile lasciare un messaggio nella segreteria di un determinato contatto se non presente in linea nel momento in cui desideriamo comunicare con lui \vref{fig:ADmessegreteria}. I messaggi che possono essere lasciati in segreteria possono essere costituiti da una sola traccia audio oppure da una traccia audio e da una traccia video.

\begin{figure}[H]
  \centering
  \includegraphics[width=.8\textwidth]{mes_segreteria}
  \caption{Diagramma di attività relativo alla memorizzazione di un messaggio in segreteria}\label{fig:ADmessegreteria}
\end{figure}
\clearpage

\section{Tracciamenti}\label{sec:tracciamenti}
Nella seguente sezione vengono proposti tutti i tracciamenti eseguiti mediante il sistema \manager. I tracciamenti proposti sono giustificati dalle seguenti due motivazioni:

\begin{itemize}
	\item Dimostrare il soddisfacimento per necessità e sufficienza della corrispondenza tra gli elementi tracciati (e.g. un componente deve rispondere necessariamente alle esigenze di uno o più requisiti, tali insomma che ne giustifichino l'esistenza. D'altro canto è richiesto che ogni requisito definito in fase d'analisi sia soddisfatto e risolto da almeno un componente).
	\item dare una lettura generale delle varie: componenti, requisiti, \inglese{design pattern} e classi.
\end{itemize}

\input{tracciamenti.tex}

\end{document}
